<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>QGIS-Tim - Building Pit The Hague</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./tutorial_Rijsenhout.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="_static/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./_static/iMOD-doc-logo.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">QGIS-Tim</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./install.html" rel="" target="">
 <span class="menu-text">Installation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./tutorial.html" rel="" target="" aria-current="page">
 <span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./developer.html" rel="" target="">
 <span class="menu-text">Development</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Deltares/QGIS-Tim" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tutorial_TheHague.html">Building Pit The Hague</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="fa-solid fa-book" aria-label="book"></i> Tutorials</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_Rijsenhout.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Building Pit Rijsenhout</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_TheHague.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Building Pit The Hague</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#requirements" id="toc-requirements" class="nav-link active" data-scroll-target="#requirements">Requirements</a></li>
  <li><a href="#description" id="toc-description" class="nav-link" data-scroll-target="#description">Description</a></li>
  <li><a href="#objective" id="toc-objective" class="nav-link" data-scroll-target="#objective">Objective</a></li>
  <li><a href="#introduction-case-the-hague" id="toc-introduction-case-the-hague" class="nav-link" data-scroll-target="#introduction-case-the-hague">Introduction case <em>The Hague</em></a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting Started</a>
  <ul class="collapse">
  <li><a href="#install-plugins" id="toc-install-plugins" class="nav-link" data-scroll-target="#install-plugins">Install plugins</a></li>
  <li><a href="#prepare-your-project" id="toc-prepare-your-project" class="nav-link" data-scroll-target="#prepare-your-project">Prepare your project</a></li>
  <li><a href="#open-the-qgis-tim-panel" id="toc-open-the-qgis-tim-panel" class="nav-link" data-scroll-target="#open-the-qgis-tim-panel">Open the QGIS-Tim panel</a></li>
  </ul></li>
  <li><a href="#checking-available-data-from-lhm" id="toc-checking-available-data-from-lhm" class="nav-link" data-scroll-target="#checking-available-data-from-lhm">Checking available data from LHM</a></li>
  <li><a href="#start-your-tim-model" id="toc-start-your-tim-model" class="nav-link" data-scroll-target="#start-your-tim-model">Start your Tim model</a>
  <ul class="collapse">
  <li><a href="#adding-a-leaky-line-doublet" id="toc-adding-a-leaky-line-doublet" class="nav-link" data-scroll-target="#adding-a-leaky-line-doublet">Adding a Leaky Line Doublet</a></li>
  <li><a href="#adding-a-well" id="toc-adding-a-well" class="nav-link" data-scroll-target="#adding-a-well">Adding a Well</a></li>
  </ul></li>
  <li><a href="#computing-the-groundwater-head-drawdown" id="toc-computing-the-groundwater-head-drawdown" class="nav-link" data-scroll-target="#computing-the-groundwater-head-drawdown">Computing the groundwater head drawdown</a></li>
  <li><a href="#studying-output-results" id="toc-studying-output-results" class="nav-link" data-scroll-target="#studying-output-results">Studying output results</a>
  <ul class="collapse">
  <li><a href="#adding-observations-wells" id="toc-adding-observations-wells" class="nav-link" data-scroll-target="#adding-observations-wells">Adding observations wells</a></li>
  <li><a href="#creating-a-cross-section" id="toc-creating-a-cross-section" class="nav-link" data-scroll-target="#creating-a-cross-section">Creating a cross section</a></li>
  </ul></li>
  <li><a href="#making-calculations-with-parameter-variations-or-checking-bandwidth" id="toc-making-calculations-with-parameter-variations-or-checking-bandwidth" class="nav-link" data-scroll-target="#making-calculations-with-parameter-variations-or-checking-bandwidth">Making calculations with parameter variations or checking bandwidth</a></li>
  <li><a href="#sheet-piles-with-extra-depth" id="toc-sheet-piles-with-extra-depth" class="nav-link" data-scroll-target="#sheet-piles-with-extra-depth">Sheet piles with extra depth</a></li>
  <li><a href="#effect-of-a-not-closed-wall-about-20-cm" id="toc-effect-of-a-not-closed-wall-about-20-cm" class="nav-link" data-scroll-target="#effect-of-a-not-closed-wall-about-20-cm">Effect of a not closed wall (about 20 cm)</a></li>
  <li><a href="#using-python-for-sensitivity-analyses-with-a-qgis-tim-model" id="toc-using-python-for-sensitivity-analyses-with-a-qgis-tim-model" class="nav-link" data-scroll-target="#using-python-for-sensitivity-analyses-with-a-qgis-tim-model">Using Python for sensitivity analyses with a QGIS-Tim model</a></li>
  <li><a href="#creating-a-transient-model" id="toc-creating-a-transient-model" class="nav-link" data-scroll-target="#creating-a-transient-model">Creating a transient model</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Building Pit The Hague</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<style>
r { color: Red }
o { color: Orange }
g { color: Green }
b { color: Blue }
y { color: Yellow }
gr { color: Gray }
</style>
<style>
ul.a {list-style-type: circle;}
ul.b {list-style-type: disc;}
ul.c {list-style-type: square;}
ol.d {list-style-type: armenian;}
ol.e {list-style-type: cjk-ideographic;}
ol.f {list-style-type: decimal;}
ol.g {list-style-type: decimal-leading-zero;}
ol.h {list-style-type: georgian;}
ol.i {list-style-type: hebrew;}
ol.j {list-style-type: hiragana;}
ol.k {list-style-type: hiragana-iroha;}
ol.l {list-style-type: katakana;}
ol.m {list-style-type: katakana-iroha;}
ol.n {list-style-type: lower-alpha;}
ol.o {list-style-type: lower-greek;}
ol.p {list-style-type: lower-latin;}
ol.q {list-style-type: lower-roman;}
ol.r {list-style-type: upper-alpha;}
ol.s {list-style-type: upper-greek;}
ol.t {list-style-type: upper-latin;}
ol.u {list-style-type: upper-roman;}
ol.v {list-style-type: none;}
ol.w {list-style-type: inherit;}
</style>
<!--
<ul class="a">
  <li>Circle type</li>
  <li>Tea</li>
  <li>Coca Cola</li>
</ul>
-->
<section id="requirements" class="level2">
<h2 class="anchored" data-anchor-id="requirements">Requirements</h2>
<ul>
<li>Be sure QGIS version 3.22.00 or higher is installed.</li>
<li>Be sure the <code>gistim</code> Python package is installed (see <a href="./install.html">installation</a> for instructions).</li>
<li>Download the tutorial material. <a href="https://deltares.thegood.cloud/s/JWsmtC82zZjSRx3" target="_blank">Follow this link.</a></li>
<li>Installation of the QGIS-Tim plugin and the MOD plugin is part of this Tutorial. The necessary ZIP files are included in the tutorial material.</li>
<li>Internet connections is optional during this Tutorial. It is only required for installation of additional plugins and the use of an online topographic background map.</li>
</ul>
</section>
<section id="description" class="level2">
<h2 class="anchored" data-anchor-id="description">Description</h2>
<p>In this tutorial, you will learn how to:</p>
<ul>
<li>install and use the QGIS-Tim plugin;</li>
<li>use the basic of QGIS for pre- and postprocessing of Tim;</li>
<li>create several steady state models (TimML) and a transient model (TTim);</li>
<li>analyse the results;</li>
<li>export your model to a Python script.</li>
</ul>
</section>
<section id="objective" class="level2">
<h2 class="anchored" data-anchor-id="objective">Objective</h2>
<p>Calculation of a pumping well extraction.</p>
</section>
<section id="introduction-case-the-hague" class="level2">
<h2 class="anchored" data-anchor-id="introduction-case-the-hague">Introduction case <em>The Hague</em></h2>
<p>In the old city centre of The Hague a building plan with a parking basement is constructed. The dimensions of the building pit are <strong>34.2 m * 83.2 m.</strong> The area is shown in <a href="#fig-TheHagueCityCentre">Figure&nbsp;1</a>.</p>
<div id="fig-TheHagueCityCentre" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/photo-TheHagueCityCentre.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Schematization of the building area in The Hague city centre (orange: building pit)</figcaption>
</figure>
</div>
<p>To carry out the construction in dry conditions, the groundwater level needs to be lowered by <strong>3.5 m.</strong> The required drainage time is 4 months. <br> The environment is vulnerable with valuable buildings and monuments (see <a href="#fig-TheMonumentalEnvironment">Figure&nbsp;2</a>) that have a shallow foundation. The subsoil consists of sandy layers which locally contain shallow peat/clay/silt layers and deeper layers of clay/silt. The builder contractor must use a sheet pile wall that needs to be installed in a water-retarding layer (aquitard).</p>
<div id="fig-TheMonumentalEnvironment" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/photo-TheMonumentalEnvironment.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;2: The monumental environment</figcaption>
</figure>
</div>
<p><strong>The questions to be elaborated in the hydrogeological advice is:</strong> <br> <em>“How deep should a sheet pile wall be placed to prevent damage? Can risks arise from a leak?”</em></p>
<p>Applications of a sheet pile wall (with a hydraulic resistance of 100 days) and a concrete cut off wall (with a hydraulic resistance of 1000 days) need to be studied.</p>
<p>The soil profile has been investigated with borings and CPTs. An example of a CPT is shown in <a href="#fig-CPT01">Figure&nbsp;3</a>.</p>
<div id="fig-CPT01" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-CPT01.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;3: CPT to a depth of NAP -20 m</figcaption>
</figure>
</div>
<p>The interpretation of the CPT and borings gives the following soil layer scheme:</p>
<ul>
<li>The soil mainly consists of fine sand in Holocene layers (max depth NAP -15 m) and coarse sand in deeper Pleistocene layers.</li>
<li>Just below the groundwater level (NAP -0.5 m), there is an approximately 1.5 m thick peat/clay/silt layer (not in CPT).</li>
<li>The layer between NAP –5.5 m and –8.5 m consists of clay lenses. There is little certainty about the resistance of that layer.</li>
<li>Between NAP –13 m and –15 m there is a clay/silt layer.</li>
</ul>
<p>Based on experience in this region, the following geohydrological schematization is known (<a href="#tbl-GeohydrologicalModelSubsoil">Table&nbsp;1</a>). The layer depth is indicated relative to the groundwater level of NAP-0.5m, because only that part is relevant for our model. In <a href="#tbl-GeohydrologicalModelSubsoil">Table&nbsp;1</a> c = vertical hydraulic resistance, k= horizontal permeability, S’= specific storage: :</p>

<style scoped="">
table {
  font-size: 13px;
}
</style>
<div id="tbl-GeohydrologicalModelSubsoil" class="anchored">
<table class="table">
<caption>Table&nbsp;1: Geohydrological model of the subsoil</caption>
<thead>
<tr class="header">
<th style="text-align: center;">Cluster</th>
<th style="text-align: right;">Layer type</th>
<th style="text-align: right;">Layer Bottom</th>
<th style="text-align: right;">c</th>
<th style="text-align: right;">k</th>
<th style="text-align: right;">S’</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">[m-REF]</td>
<td style="text-align: right;">[days]</td>
<td style="text-align: right;">[m/day]</td>
<td style="text-align: right;">[1/m]</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: right;">Aquitard</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">3000</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0.01</td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: right;">Aquifer</td>
<td style="text-align: right;">-5</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0.00025</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: right;">Aquitard</td>
<td style="text-align: right;">-8</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0.0002</td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: right;">Aquifer</td>
<td style="text-align: right;">-13</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0.00005</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: right;">Aquitard</td>
<td style="text-align: right;">-15</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0.001</td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: right;">Aquifer</td>
<td style="text-align: right;">-60</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0.00001</td>
</tr>
</tbody>
</table>
</div>
<p>According to <a href="https://www.dinoloket.nl" target="_blank">DINO loket</a> the average groundwater level on site is NAP -0.5 m. There are strict demands from authorities for allowable groundwater lowering. The maximum allowed drawdown outside the construction pit is 0.1 m. <br> To perform the calculation, dewatering is schematized to 8 wells. <strong>Tip: Don’t place the wells in the model too close to the sheet piles.</strong> <br></p>
<p>Tasks:</p>
<ul>
<li>Which element from the Tim package would you use to place the wells and sheet piles?</li>
<li>Do you need to install sheet piles deep (in sand layers of aquifer 1 and 2) or shallow (only in the first sand layer of aquifer 1)?</li>
<li>Investigate the effect of the presence of a lower or higher hydraulic resistance in the layer between NAP -5.5 m and -8.5 m.</li>
<li>Estimate the extraction rate to keep the building pit dry.</li>
<li>What are the risks? Look at the groundwater drawdown outside the construction pit in situations with different sheet pile depth.</li>
<li>Also check for point leaks. Model these leaks with a hole in the sheet pile in the southwest corner of the area.</li>
</ul>
</section>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting Started</h2>
<p>Let’s first configure the gistim python installation again, to be sure that QGIS can find the gistim software.</p>
<ol class="example" type="1">
<li>Open the Deltaforge prompt (search in Windows Start for “Deltaforge Prompt”). A black window pops up.</li>
<li>In this window type <code>python -m gistim configure</code> and press ENTER.</li>
<li>You can close this window now.</li>
<li>Launch QGIS from your START menu, from your desktop or click on …\QGIS3.28.0\bin\qgis-bin.exe.</li>
</ol>
<blockquote class="blockquote">
<p><strong>Intermezzo:</strong> <em>QGIS language settings</em></p>
<p>Perhaps your QGIS was installed in another language than English. Because the Tutorial refers to the English version, let’s change to English.</p>
<ol type="a">
<li>From the main menu click on <em>Settings</em> and select <em>Options</em> (e.g.&nbsp;in Dutch <em>Extra</em> and <em>Opties</em>).</li>
<li>In the new window go to the <em>General section</em> (Dutch: <em>Algemeen</em>) on the left.</li>
<li>Check the box to allow <em>Override System Locale</em> (Dutch: <em>Landinstellingen negeren</em>) and expand this sub menu.</li>
<li>From the drop-down menu <em>“User interface translation”</em> (Dutch: <em>Vertaling gebruikers-interface</em>) select <em>American English</em> and click <em>OK</em>.</li>
<li>Close QGIS and open it again to activate your language change.</li>
</ol>
</blockquote>
<p>We start with the creation of a new QGIS project.</p>
<ol start="5" class="example" type="1">
<li>From the main menu click on <em>Project</em> and select <em>New</em>.</li>
</ol>
<p>The case in this tutorial is located in The Netherlands, so next we select the appropriate projection.</p>
<ol start="6" class="example" type="1">
<li>From the main menu click on <em>Project</em> and select <em>Properties</em>.</li>
<li>In the <em>Properties</em> window select the category <em>CRS</em>, search for “EPSG:28992” and you find “Amersfoort / RD New”. Select this option and click the <em>Apply</em> button, followed by the <em>OK</em> button to close the window.</li>
</ol>
<blockquote class="blockquote">
<p>In case your work is mostly in The Netherlands and in the “Amersfoort / RD New” projection, consider making this your default projection.</p>
<ul>
<li>From the main menu click on <em>Settings</em> and select <em>Options…</em>.</li>
<li>In the section <em>CRS and Transforms</em> select <em>CRS (handling)</em>, pick the radio button <em>Use a default CRS</em> and select “EPSG:28992 -Amersfoort / RD New”.</li>
<li>Click OK.</li>
<li>Close this window.</li>
</ul>
</blockquote>
<section id="install-plugins" class="level3">
<h3 class="anchored" data-anchor-id="install-plugins">Install plugins</h3>
<p>This is the moment to download/import four plugins needed for this tutorial. This is the list:</p>
<ul>
<li>the QGIS-Tim plugin. The development version, imported from a ZIP file.</li>
<li>the iMOD plugin. The development version, imported from a ZIP file.</li>
<li>the Value Tool. The official version, installed via the Plugin Manager of QGIS (internet connection required).</li>
<li>the PDOK plugin. The official version, installed via the Plugin Manager of QGIS (internet connection required). This plugin gives access to a large database from which we will load the topographic maps and use the navigation option.</li>
</ul>
<ol start="8" class="example" type="1">
<li>Go to <em>Plugins</em> from the main menu and select <em>Manage and Install Plugins…</em> to open the plugin window.</li>
<li>On the left section select <em>Install from ZIP</em>.</li>
<li>Click the <em>Browse</em> button (<img src="figures/tutorial/button-Qgis-browse.png" class="img-fluid" style="width:4.0%">) and from the tutorial dataset select the ZIP file “QGIS-Tim_Tutorial-TheHague\QGIS-iMOD-plugin.zip”.</li>
<li>Click <em>Install Plugin</em>.</li>
<li>In the same way, install the QGIS-Tim plugin using the ZIP file “QGIS-Tim_Tutorial-TheHague\QGIS-Tim-plugin.zip”.</li>
</ol>
<p>If you have an internet connection continue with the installation of the next two plugins from the QGIS plugin library.</p>
<ol start="13" class="example" type="1">
<li>From the left section, select the group <em>All</em> to see all available plugins.</li>
<li>Search for “Value Tool” and install it.</li>
<li>Search for “PDOK services plugin” and install it.</li>
<li>Make sure that under <em>Plugins &gt; Manage and Install Plugins &gt; Installed</em> now the 4 added plugins are checked.</li>
<li><em>Close</em> the Plugins window.</li>
</ol>
<p>See in the toolbar section of QGIS that the plugins are installed:</p>
<ul>
<li>iMOD Toolbar <img src="figures/tutorial/button_iMOD-Toolbar.png" class="img-fluid" style="width:30.0%"></li>
<li>QGIS-Tim <img src="figures/tutorial/button-Qgis-tim.png" class="img-fluid" style="width:4.0%"></li>
<li>Value Tool <img src="figures/tutorial/button_valuetool.png" class="img-fluid" style="width:4.0%"></li>
<li>PDOK Services Plugin <img src="figures/tutorial/button-PDOK.png" class="img-fluid" style="width:4.0%"></li>
</ul>
<p>Further in this Tutorial we will use some default toolbars that might be hidden at the moment. Let’s check that and unhide if necessary.</p>
<ol start="18" class="example" type="1">
<li>Select <em>View</em> from the main menu and choose <em>Panels</em> and be sure these two toolbars are checked: <br> - Layers <br> - Browser.</li>
<li>Select <em>View</em> from the main menu and choose <em>Toolbars</em> and be sure these three toolbars are checked: <br> - Advanced Digitizing Toolbar <br> - Snapping Toolbar <br> - Attributes Toolbar.</li>
</ol>
</section>
<section id="prepare-your-project" class="level3">
<h3 class="anchored" data-anchor-id="prepare-your-project">Prepare your project</h3>
<p>For navigation purposes, let’s load a topographic map for The Netherlands from the online PDOK database.</p>
<blockquote class="blockquote">
<p>No internet connection? Follow the next steps to import a simple PNG file as a background.</p>
<ul>
<li>Go to <em>Layer</em> in the main menu, go to <em>Add layer</em> and select <em>Add Raster layer</em>.</li>
<li>Use the <em>Browse</em> button (<img src="figures/tutorial/button-Qgis-browse.png" class="img-fluid" style="width:4.0%">) and from the tutorial material select “…\QGIS-Tim_Tutorial-TheHague\TopographicMapTheHague.png”.</li>
<li>Click on <em>Add</em> and <em>Close</em> the window.</li>
<li>If you do not see the map, select the layer “TopographicMapTheHague”, click your right mouse button and select “Zoom to Layer(s)”.</li>
<li>Continue after step 26.</li>
</ul>
</blockquote>
<ol start="20" class="example" type="1">
<li>If you do have an internet connection click on the PDOK plugin button (<img src="figures/tutorial/button-PDOK.png" class="img-fluid" style="width:4.0%">) to open the “PDOK Services Plugin” window.</li>
<li>From the tab <em>PDOK Services</em> search for “pastel” and you will find a WMTS type layer called “BRT Achtergrondkaart WMTS”.</li>
<li>Select the layer.</li>
<li>In the section “laag toevoegen” click the button <em>Onder</em>.</li>
<li>Close the PDOK window.</li>
</ol>
<p>Our project area is in the centre of the city of The Hague so let’s navigate to that city using the PDOK plugin.</p>
<ol start="25" class="example" type="1">
<li>Type “Parkstraat” in the PDOK search field, near the PDOK button (<img src="figures/tutorial/button-PDOK-search.png" class="img-fluid" style="width:20.0%">)</li>
<li>One of the locations PDOK will find is “Parkstraat, ’s-Gravenhage”. Click on it and QGIS will fly you to the project location.</li>
</ol>
<p>Let’s now open a shape file containing the circumference of the building location.</p>
<ol start="27" class="example" type="1">
<li>Go to <em>Layer</em> in the main menu, go to <em>Add layer</em> and select <em>Add Vector layer</em>.</li>
<li>Use the <em>Browse</em> button (<img src="figures/tutorial/button-Qgis-browse.png" class="img-fluid" style="width:4.0%">) and from the tutorial material select “…\QGIS-Tim_Tutorial-TheHague\building_pit.shp”.</li>
<li>Click on <em>Add</em> and <em>Close</em> the window.</li>
</ol>
<p><img src="figures/tutorial/emoji-tip.png" class="img-fluid" style="width:3.0%"> <strong>Tip:</strong> a fast alternative for adding layers: from the menu <em>View &gt; Toolbar</em> add the <em>Manage Layers Toolbar</em> and use the button <img src="figures/tutorial/button-Qgis-VectorLayer.png" class="img-fluid" style="width:4.0%">.</p>
<ol start="30" class="example" type="1">
<li>In the <em>Layers</em> panel on the left, select the layer “building_pit”.</li>
<li>Click your right mouse button and from the menu select <em>Properties</em>.</li>
<li>In the new window go to the section <em>Symbology</em> on the left and try to pick a polygon style with only a contour color.</li>
<li>Click on <em>OK</em> a to save and close the window.</li>
</ol>
<p>Let’s save this project to be able to return to it later or in case of a crash of QGIS.</p>
<ol start="34" class="example" type="1">
<li>Go to <em>Project</em> in the main menu, select <em>Save As</em> and select a folder and a file name for your project, e.g.&nbsp;“…\QGIS-Tim_Tutorial-TheHague\TheHague.qgz”</li>
</ol>
</section>
<section id="open-the-qgis-tim-panel" class="level3">
<h3 class="anchored" data-anchor-id="open-the-qgis-tim-panel">Open the QGIS-Tim panel</h3>
<p>Now we are ready to activate the QGIS-Tim plugin.</p>
<ol start="35" class="example" type="1">
<li>Click on the QGIS-Tim plugin button (<img src="figures/tutorial/button-Qgis-tim.png" class="img-fluid" style="width:4.0%">) and the QGIS-Tim panel appears.</li>
<li>Go to the tab <em>GeoPackage</em>. <br> Here we will create an empty database (geopackage) to store all elements and parameters for the model.</li>
<li>Click the <em>New</em> button to create the GeoPackage and save it for instance in the folder with your tutorial data, e.g.&nbsp;“..\QGIS-Tim_Tutorial-TheHague\case-TheHague.gpkg”.</li>
</ol>
<p>Your window looks like in <a href="#fig-Panel-QGIS-Tim_v02">Figure&nbsp;4</a>.</p>
<div id="fig-Panel-QGIS-Tim_v02" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/Panel-QGIS-Tim_v02.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;4: QGIS-Tim panel</figcaption>
</figure>
</div>
<ol start="38" class="example" type="1">
<li>Check in the <em>Layers</em> panel on the left that your new geopackage is added as a group. <br> A sub group <strong>timml</strong> for the steady state model input, the sub group <strong>ttim</strong> for the transient model input and a series of output formats (vector/mesh/raster).</li>
</ol>
<p>If you had no introduction to the Tim plugin, read the Intermezzo below for a general explanation of the components.</p>
<blockquote class="blockquote">
<p><strong>Intermezzo:</strong> <em>introduction Tabs on the Tim panel</em></p>
<ol type="a">
<li>GeoPackage: an overview of the elements in your geopackage. In case you switch to transient modelling, an extra column with <em>ttim</em> elements is added.</li>
<li>Elements: a list of 14 Tim elements from which you can build your model.</li>
<li>Compute: here you can define your domain and cell size, decide if your model is transient or not and change the output name.</li>
<li>Extract: open an existing 3d geohydrological model (NC file) and extract the data for your project area.</li>
</ol>
</blockquote>
<p>Let’s save this project to be able to return to it later or in case of a crash of QGIS.</p>
<ol start="39" class="example" type="1">
<li>Go to <em>Project</em> in the main menu, select <em>Save As</em> and select a folder and a file name for your project, e.g.&nbsp;“…\QGIS-Tim_Tutorial-TheHague\TheHague.qgz”</li>
</ol>
</section>
</section>
<section id="checking-available-data-from-lhm" class="level2">
<h2 class="anchored" data-anchor-id="checking-available-data-from-lhm">Checking available data from LHM</h2>
<p>We will now research what possible layer info is available from the LHM database (Landelijk hydrologisch model). Information from LHM is made available in the provided file “…\QGIS-Tim_Tutorial-TheHague\LHM4.1-ondergrondmodel.nc”. The file contains rasterdata of both the 3D geological layering within The Netherlands and the corresponding geological parameterization (permeability, resistance, thickness).</p>
<ol start="40" class="example" type="1">
<li>In the QGIS-Tim panel go to the <em>Extract</em> tab.</li>
<li>Open the file “..\QGIS-Tim_Tutorial-TheHague\LHM4.1-ondergrondmodel.nc” (this may take a minute because the file is 350 MB).</li>
<li>Click the button <em>Select by Polygon</em> and draw a large polygon (&gt; 250x250m) to select the area around the building location between <em>Parkstraat</em> and <em>Oranjestraat</em> (see <a href="#fig-TheHagueCityCentre">Figure&nbsp;1</a>). Left-click several times and close the polygon with a right click.</li>
<li>Then click the <em>Extract</em> button and save the extracted subsoil data to a CSV file, e.g.&nbsp;“Ex2DH.csv”.</li>
<li>A separate python window is opened and the selection is performed. You can follow the progress in your tool bar. There is no message indicating the process has ended. Just ignore the black screen and continue with the next step.</li>
</ol>
<blockquote class="blockquote">
<p><img src="figures/tutorial/figure_ExtractionError.png" id="fig-figure_ExtractionError" class="img-fluid" style="width:90.0%"> <br> QGIS displays this error message in case your polygon is too small. In that case redraw your polygon for a larger area.</p>
</blockquote>
<p>Automatically 2 CSV files will be created. One with average values for bottom and top of layers and aquifer permeabilities and aquitard resistances. The other contains statistics on the data.</p>
<ol start="45" class="example" type="1">
<li>From a file manager on your laptop (e.g.&nbsp;Explorer) open the CSV files.</li>
</ol>
<p>An example of values from the first CSV are presented in <a href="#tbl-SubsoilCharacteristicsLHM">Table&nbsp;2</a>. In each LHM layer the Aquitard information is positioned on top of Aquifer.</p>
<div id="tbl-SubsoilCharacteristicsLHM" class="anchored">
<table class="table">
<caption>Table&nbsp;2: The characteristics of the subsoil based on LHM data (example, your values may differ)</caption>
<colgroup>
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>fid <br> -</th>
<th>layer <br> -</th>
<th style="text-align: center;">aquitard <br> c</th>
<th style="text-align: center;">aquitard <br> npor</th>
<th style="text-align: center;">aquitard <br> s</th>
<th style="text-align: center;">aquifer <br> k</th>
<th style="text-align: center;">aquifer <br> npor</th>
<th style="text-align: center;">aquifer <br> s</th>
<th style="text-align: center;">aquifer <br> top</th>
<th style="text-align: center;">aquifer <br> bottom</th>
<th style="text-align: center;">semiconf <br> top</th>
<th style="text-align: center;">semiconf <br> head</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td style="text-align: center;">287</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">62.37</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-18.97</td>
<td style="text-align: center;">-38.30</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>2</td>
<td>2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">37.94</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-38.30</td>
<td style="text-align: center;">-60.54</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>3</td>
<td>3</td>
<td style="text-align: center;">3056</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">13.21</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-66.62</td>
<td style="text-align: center;">-77.50</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>4</td>
<td>4</td>
<td style="text-align: center;">708</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">9.25</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-84.59</td>
<td style="text-align: center;">-88.38</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>5</td>
<td>5</td>
<td style="text-align: center;">3143</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">10.94</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-106.06</td>
<td style="text-align: center;">-120.63</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>6</td>
<td>6</td>
<td style="text-align: center;">8092</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">5.68</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-151.11</td>
<td style="text-align: center;">-254.94</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>7</td>
<td>7</td>
<td style="text-align: center;">17752</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">3.10</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">-307.82</td>
<td style="text-align: center;">-390.71</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
<p>A choice should be made at which depth the hydrogeological base is chosen for this project. Where high aquifer k is followed by a large aquifer c the base is chosen. For this case the base is chosen at -60.5 m (all depth data in <a href="#tbl-SubsoilCharacteristicsLHM">Table&nbsp;2</a> are m NAP). As you can see, values for Holocene layers are not available here and thus not displayed in LHM results. <br><br> Aquitard resistance in the city is quite high, so a value of 3000 days is best guess from experience. <br><br> For marine deposits at -12 a value of 50 to 100 days per meter layer thickness is a proper choice. The permeability of fine Holocene sand is chosen at 10 m/d.</p>
</section>
<section id="start-your-tim-model" class="level2">
<h2 class="anchored" data-anchor-id="start-your-tim-model">Start your Tim model</h2>
<p>We are now ready to define our first steady state model by parameterizing our Aquifer.</p>
<ol start="46" class="example" type="1">
<li>From the <em>Layers</em> panel, select the layer <em>timml Aquifer:Aquifer</em>.</li>
<li>Click your right mouse button and from the menu select <em>Open Attribute table</em> (<img src="figures/tutorial/button-Qgis-OpenAttributeTable.png" class="img-fluid" style="width:3.0%">). Search for the same icon somewhere on the <em>Attributes Toolbar</em>.</li>
<li>Switch to the editing mode in the table with a click on (<img src="figures/tutorial/button-Qgis-AttributeTable-StartEditingMode.png" class="img-fluid" style="width:4.0%">) <em>Toggle Editing</em>.</li>
<li>Then by clicking 3 times on (<img src="figures/tutorial/button-Qgis-AttributeTable-AddFeature.png" class="img-fluid" style="width:4.0%">) <em>Add feature</em> you will see new rows are added.</li>
<li>Now you are able to fill in the desired values shown in <a href="#fig-AquiferAttrTable_v01">Figure&nbsp;5</a>. <br> <strong>NB! Do not fill in column FID. ‘Autogenerate’ will take care.</strong></li>
</ol>
<div id="fig-AquiferAttrTable_v01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/Panel-Timml AquiferAttrTable_v01.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5: The characteristics of the aquifer</figcaption>
</figure>
</div>
<p><strong>NB!</strong> Closing this table window with the <img src="figures/tutorial/Button_CloseWindow.png" class="img-fluid" style="width:2.5%"> will not save the filled in data or stop the editing mode!</p>
<ol start="51" class="example" type="1">
<li>Click on the <em>Save-Edits</em> button (<img src="figures/tutorial/button_SavelayerEdits.png" class="img-fluid" style="width:3.0%">) to save you data during the process or click on the <em>Toggle Editing Mode</em> button (<img src="figures/tutorial/button-Qgis-AttributeTable-StartEditingMode.png" class="img-fluid" style="width:4.0%">) to stop edditing and QGIS askes you if your changes should be saved.</li>
<li>Now you can close the Attribute Table window.</li>
</ol>
<p>In the QGIS-Tim Window we now introduce the following elements for ground water modelling in the QGIS-Tim tab <em>Element</em>:</p>
<ul>
<li>Leaky Line Doublet</li>
<li>Well</li>
</ul>
<section id="adding-a-leaky-line-doublet" class="level3">
<h3 class="anchored" data-anchor-id="adding-a-leaky-line-doublet">Adding a Leaky Line Doublet</h3>
<ol start="53" class="example" type="1">
<li>In the QGIS-Tim window go to tab <em>Elements</em> and select the button <em>Leaky Line Doublet</em>.</li>
<li>Fill in the name of the layer in the pop-up panel, e.g.&nbsp;‘sheet_pile’, and click <em>OK</em> and this new Layer is added to the <em>Layers</em> panel.</li>
</ol>
<p>First, we will <em>draw</em> the location of the sheet pile before <em>adding</em> the parameter values.</p>
<ol start="55" class="example" type="1">
<li>In the <em>Layers</em> panel right click on the layer <img src="figures/tutorial/figure_Leakylinedoublet_icon.png" class="img-fluid" style="width:4.0%"> <em>timml Leaky Line Doublet:sheet_pile</em> and start the editing mode by clicking the <em>Toggle Editing</em> button (<img src="figures/tutorial/button-Qgis-AttributeTable-StartEditingMode.png" class="img-fluid" style="width:4.0%">).</li>
</ol>
<p>Two important remarks before drawing the sheet pile:</p>
<ul>
<li>Start drawing at the most southern corner of the building pit to make a variation for an extra purpose later on in this tutorial.</li>
<li>In order to make a closed area surrounded with the sheet piles, the first and last point must have the same coordinate and intersect. For this we must activate the Snapping option in QGIS.</li>
</ul>
<ol start="56" class="example" type="1">
<li>In the main menu go to <em>Project</em> and select <em>Snapping Options..</em>.</li>
<li>From the new toolbar (see <a href="#fig-button_ToolbarSnappingSettings">Figure&nbsp;6</a>), click on the <em>Enable Snapping</em> button (<img src="figures/tutorial/button_EnableSnapping.png" class="img-fluid" style="width:3.0%">).</li>
</ol>
<div id="fig-button_ToolbarSnappingSettings" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/button_ToolbarSnappingSettings.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Switching on snapping options</figcaption>
</figure>
</div>
<ol start="58" class="example" type="1">
<li>Then select the <em>Add line feature</em> icon (<img src="figures/tutorial/button_AddLineFeature.png" class="img-fluid" style="width:3.0%">) to start the drawing of the sheet pile.</li>
<li>Draw the sheet pile around the building pit (start south corner) with your left mouse button and close the feature on the first point.</li>
<li>In the pop-up window fill in the resistance (1000 d, see * below) and layer number (layer=0, see ** below) as in <a href="#fig-LeakylinedoubletFeatureAttributes">Figure&nbsp;7</a> and click OK to close the window.</li>
</ol>
<div id="fig-LeakylinedoubletFeatureAttributes" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_LeakylinedoubletFeatureAttributes.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;7: The characteristics of the Leaky line doublet</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p>Remarks to the provided values: <br> * Because of a known issue in the TimML software, until this issue is resolved, the value of the resistance must be multiplied by the permeability. For normal sheet pile walls a resistance value of 100-250 d for interlock leakage is a good choice. In this case the chosen value needs to be increased by multiplying with the applicable aquifer permeability in the effected layer (R=100 d becomes R=10*100 d). <br> ** In the real-world counting starts with 1. However, Tim is programmed in Python and in Python counting starts with 0. You will get used to it.</p>
</blockquote>
<ol start="61" class="example" type="1">
<li>Close the editing mode with a click on (<img src="figures/tutorial/button-Qgis-AttributeTable-StartEditingMode.png" class="img-fluid" style="width:4.0%">) and you are asked to save your changes.</li>
<li>Open the attribute table for <em>Leaky Line Doublet</em> (click <img src="figures/tutorial/button-Qgis-OpenAttributeTable.png" class="img-fluid" style="width:3.0%"> or press F6) to check hydraulic resistance values for the sheet pile walls.</li>
</ol>
</section>
<section id="adding-a-well" class="level3">
<h3 class="anchored" data-anchor-id="adding-a-well">Adding a Well</h3>
<ol start="63" class="example" type="1">
<li>In GIS-Tim go to the tab <em>Elements</em> and select the <em>Well</em> element.</li>
<li>A name for the element can be given in the pop-up panel, e.g.&nbsp;<em>pumping_wells</em>.</li>
<li>In the <em>Layers</em> panel right click on the layer <img src="figures/tutorial/figure_well_icon.png" class="img-fluid" style="width:3.0%"> <em>timml Well:pumping_wells</em> and start the editing mode by clicking the <em>Toggle Editing</em> button (<img src="figures/tutorial/button-Qgis-AttributeTable-StartEditingMode.png" class="img-fluid" style="width:4.0%">).</li>
<li>Next click on <em>Add point feature</em> (<img src="figures/tutorial/button_AddPointFeature.png" class="img-fluid" style="width:4.0%">).</li>
<li>With you left mouse button add the first well location similar to point 1 in <a href="#fig-SchematizationTheHague">Figure&nbsp;8</a>.</li>
<li>In the pop-up window, fill in the well parameters discharge (50 m3/d), radius (0.1 m), resistance (1 d) and layer (0).</li>
<li>Now add the other 7 wells locations in a fast way: do not import parameters with every single point. We will do that later. Just click <em>OK</em> on each <em>Feature Attribute</em> window.</li>
</ol>
<div id="fig-SchematizationTheHague" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_SchematizationTheHague.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Schematization of the pumping wells, sheet piles and observation locations</figcaption>
</figure>
</div>
<ol start="70" class="example" type="1">
<li>In the <em>Layers</em> panel right select layer <em>timml Well:pumping_wells</em> and open the <em>Attribute Table (F6)</em>.</li>
<li>Start the editing mode and fill in the values shown in <a href="#fig-WellAttributeTable">Figure&nbsp;9</a>. Don’t forget the column ‘Label’. <br> The discharge value in the table is a first guess to be adjusted later to desired level of -3.5 m groundwater lowering in the building pit.</li>
<li>Stop the editing mode, save your work and close the window.</li>
<li>Select layer <em>timml Well:pumping_wells</em> again, click right and from the menu select <em>Show labels</em>.</li>
</ol>
<div id="fig-WellAttributeTable" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_WellAttributeTable.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;9: Well properties</figcaption>
</figure>
</div>
<p>When you finished the input of the wells and their parameters, you have to look back to the combination of wells and sheet pile wall. The reason is that near a well the flow is strong and therefore the flow through the wall is increased. This may lead to extremities in the calculation if wall segments are chosen too large. Tim uses control points but they are set at regular distances on the doublet (the number of control points is 1+order). It is necessary to divide the wall in smaller sections near well locations. The length of each section should be chosen equal to approximately the distance of the wall to the nearest well.</p>
<ol start="74" class="example" type="1">
<li>Select the Leaky Line Doublet in the <em>Layers</em> panel and start the editing mode.</li>
<li>Activate the Vertex Tool (<img src="figures/tutorial/button_VertexTool.png" class="img-fluid" style="width:4.0%">) and then hoover along the sheet pile line in your drawing. The line element near your pointer lights up.</li>
<li>With the combination of <strong>Shift + double left click</strong>, you can add a new vertex to the line. Repeat that for the number of points you want to add.</li>
</ol>
<p><a href="#fig-figure_SheetPileExtraPoints">Figure&nbsp;10</a> shows the result of positioned extra points in the line.</p>
<div id="fig-figure_SheetPileExtraPoints" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_SheetPileExtraPoints.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;10: Extra points for segmentation of the sheet pile element</figcaption>
</figure>
</div>
</section>
</section>
<section id="computing-the-groundwater-head-drawdown" class="level2">
<h2 class="anchored" data-anchor-id="computing-the-groundwater-head-drawdown">Computing the groundwater head drawdown</h2>
<ol start="77" class="example" type="1">
<li>Zoom in or out to desired domain for which you want to see the model results.</li>
<li>In the QGIS-Tim panel select the tab <em>Compute</em>.</li>
<li>Select the button <em>Set to current extent</em> to define the Domain.</li>
<li>Grid spacing will follow automatically but for now make the results mesh more dense by changing “Grid spacing” to 3.00 m.</li>
<li>In the “Output” section give the name of the file where you want to store the results.</li>
<li>For contouring, select the check box “Auto-generate contours”.</li>
<li>Set the increment for contouring to a proper value: 0.5, 0.25 or 0.1 as applicable for your study.</li>
<li>Press the <em>Compute</em> button to have the program perform the calculations.</li>
</ol>
<p>A black Python.exe window pops up indicating that the TIM calculation started on the background. You can ignore this window but keep it open. Of course you van minimize it. If the calculation was completed successful, you will see this echo in QGIS. <img src="figures/tutorial/Panel-QGIS-Tim-completion.png" class="img-fluid" style="width:80.0%">.</p>
</section>
<section id="studying-output-results" class="level2">
<h2 class="anchored" data-anchor-id="studying-output-results">Studying output results</h2>
<p>After the calculation you see that the result is automatically added to the <em>Layers</em> panel, probably called “case-TheHague output”. Results are presented as Mesh, Raster and Vector data. Contours are saved as vector. <br> Although these layers / groups are checked, the data is not visible. That is because the geopackage was added last, and QGIS adds layers at the end of the list. <br> Let’s move the layer “pastel” to the background.</p>
<ol start="85" class="example" type="1">
<li>Select the layer “pastel” and drag it with your left mouse button to the bottom of the list of layers.</li>
<li>Uncheck mesh and raster to only visualize contours on the base map.</li>
<li>Uncheck contour lines of layer 1 and 2 to get only the result for layer 0 on screen as in <a href="#fig-DrawdownConstructionPit_v01">Figure&nbsp;11</a>.</li>
</ol>
<div id="fig-DrawdownConstructionPit_v01" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_DrawdownConstructionPit_v01.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;11: Updated results of groundwater head lowering contours due to 8 wells 50 m3/d and a sheet pile wall with 100 d wall resistance.</figcaption>
</figure>
</div>
<p>The lowering in the building pit is shown to be around -6.20 m. To get it around -3.50 m as demanded, the well discharge should be decreased accordingly. An extra calculation with half the flow per well will be sufficient.</p>
<ol start="88" class="example" type="1">
<li>Go to the well attribute table, adjust the flow to 60% (30 m3/d per well) and compute the model again.</li>
</ol>
<section id="adding-observations-wells" class="level3">
<h3 class="anchored" data-anchor-id="adding-observations-wells">Adding observations wells</h3>
<p>The city authorities that perform quality checks on the effect of construction projects insisted on the installation of some piezometers to assure reduction of risks for surrounding old monumental structures.</p>
<ol start="89" class="example" type="1">
<li>In the QGIS-Tim panel go to the <em>Elements</em> tab and select the element <em>Observation</em>.</li>
<li>Give a name in the pop-up panel, e.g.&nbsp;“observations”.</li>
<li>Then go to the <em>Layers</em> panel and select the layer <img src="figures/tutorial/figure_Observation_icon.png" class="img-fluid" style="width:3.0%"><em>timml Observation:observations</em>.</li>
<li>Go to the toolbar with drawing options and activate Toggle editing (<img src="figures/tutorial/button-Qgis-AttributeTable-StartEditingMode.png" class="img-fluid" style="width:4.0%">).</li>
<li>Go right to the Add point feature (<img src="figures/tutorial/button_AddPointFeature.png" class="img-fluid" style="width:3.0%">) and drop some piezometers in the drawing. <br> We propose to use 5 points (see <a href="#fig-SchematizationTheHague">Figure&nbsp;8</a>): 1 point in the centre of the building pit, 1 near the lower corner outside, 1 outside near the middle of the eastern sheet pile section and just 2 near street corners.</li>
<li>Compute the model again.</li>
</ol>
<p>Results of calculations at the observation locations are presented as <em>Vector</em> data in the <em>Layers</em> panel.</p>
<ol start="95" class="example" type="1">
<li>Uncheck/check layers in order to display observation results only.</li>
</ol>
<p>By default, the label at each observation location is the calculated head for layer 0. Perhaps you see a second number near the location. For your information: this is the “location number” label belonging to the model input in layer <em>timml Observation:observations</em>.</p>
<p>We can observe that the lowering of groundwater around the building pit is quite high due to leakage of the sheet piles or leakage through the bottom clay layer with small resistance. Therefore, it is needed to improve the wall quality or the length. First we check the effect of the clay layer by studying a cross section.</p>
</section>
<section id="creating-a-cross-section" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-cross-section">Creating a cross section</h3>
<ol start="96" class="example" type="1">
<li>To make a cross section, use the iMOD plugin toolbar and click on the Cross Section widget (<img src="figures/tutorial/button_iMOD-Cross-section.png" class="img-fluid" style="width:3.0%">)</li>
<li>From the dropdown menu on the left of this panel, select the mesh (<img src="figures/tutorial/button_Mesh.png" class="img-fluid" style="width:3.0%">) with *_layer_0.</li>
<li>Press <em>Add</em>.</li>
<li>Start to define your cross section with a click on the button <em>Select location</em>.</li>
<li>Draw your cross section by left clicking on the map. Stop drawing with a right click. You can redraw this line anytime you like.</li>
<li>Satisfied with your line? Click the button <em>Plot</em> to draw this layer in the cross section. Your screen might look like <a href="#fig-HeadsInCrosssection03">Figure&nbsp;12</a>.</li>
<li>By using the <em>Export</em> button you can store results from the cross section in a CSV file.</li>
</ol>
<div id="fig-HeadsInCrosssection03" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_HeadsInCrosssection03.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;12: Cross section of groundwater heads per layer, sheet pile wall R=100d and 8 wells at 30 m3/d each in layer0</figcaption>
</figure>
</div>
</section>
</section>
<section id="making-calculations-with-parameter-variations-or-checking-bandwidth" class="level2">
<h2 class="anchored" data-anchor-id="making-calculations-with-parameter-variations-or-checking-bandwidth">Making calculations with parameter variations or checking bandwidth</h2>
<p>The authorities demand a drawdown effect of dewatering at a maximum of 0.10 m at surrounding buildings. This means that improvements for leakage control are needed but first we need to discover what parameter to focus on.</p>
<p>To check whether the wall resistance or the bottom resistance of the layer 1 (below the building pit) is more important we can make 2 variations; one with C-clay=200 d and one with R-wall=500 d.&nbsp;<br> Of course you can change your model input, rerun the model and overwrite your model results. The next steps show you how to change the model input and save the results in separate <em>.gpkg and </em>.nc files.</p>
<ol start="103" class="example" type="1">
<li>In the input group select layer <em>timml Aquifer:…</em></li>
<li>Open the <em>Attrribute Table</em> (F6) and change the value for “aquitard_c” in layer 1 into 200 d.</li>
<li>In the QGIS-Tim panel go to the tab <em>Compute</em> and change the name of the output, e.g.&nbsp;case-TheHague_v1.</li>
<li>Click <em>Compute</em> to run variant 1.</li>
</ol>
<p>Check in the <em>Layers</em> panel and see that the results are not overwritten but added to the groups, e.g.&nbsp;layer <em>case-TheHague_v1-timml Observation:observations</em> is added to the group <em>Vector</em>.</p>
<ol start="107" class="example" type="1">
<li>Fill in your calculated heads at the observation locations in <a href="#tbl-CalculatedHeads2Variants">Table&nbsp;4</a> or use Excel.</li>
</ol>
<div id="tbl-CalculatedHeads2Variants" class="anchored">
<table class="table">
<caption>Table&nbsp;3: Table: calculated heads [m] in observation points for 2 variants compared to the initial situations. Your values will differ.</caption>
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>Observation <br>location</th>
<th>Default:<br>Cc=40d<br>Rw=100d*</th>
<th><img src="figures/tutorial/button-pencil.png" class="img-fluid" style="width:20.0%"> <br> your value:</th>
<th>Variant 1:<br>Cc=200d<br>Rw=100d*</th>
<th>your value:</th>
<th>Variant 2:<br>Cc=40d<br>Rw=500d*</th>
<th>your value:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pb1 centre pit</td>
<td>-3.95</td>
<td>…</td>
<td>-10.44</td>
<td>…</td>
<td>-4.00</td>
<td>…</td>
</tr>
<tr class="even">
<td>Pb2 south corner</td>
<td>-0.43</td>
<td>…</td>
<td>-0.54</td>
<td>…</td>
<td>-0.35</td>
<td>…</td>
</tr>
<tr class="odd">
<td>Pb3 street corner</td>
<td>-0.35</td>
<td>…</td>
<td>-0.43</td>
<td>…</td>
<td>-0.31</td>
<td>…</td>
</tr>
<tr class="even">
<td>Pb4 south point</td>
<td>-0.29</td>
<td>…</td>
<td>-0.32</td>
<td>…</td>
<td>-0.25</td>
<td>…</td>
</tr>
<tr class="odd">
<td>Pb5 east wall</td>
<td>-0.51</td>
<td>…</td>
<td>-0.70</td>
<td>…</td>
<td>-0.41</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<p>* Known issue in TimML: you have to multiply Rw by layer permeability (Rw*10).</p>
<p>Let’s now run Variant 2.</p>
<ol start="108" class="example" type="1">
<li>In layer <em>timml Aquifer:…</em> reset the value for “aquitard_c” in layer 1 to the default of 40 d.</li>
<li>In layer <em>timml Leaky Line Doublet:…</em> change the value for “resistance” into 5000 d (500x10).</li>
<li>In the QGIS-Tim panel go to the tab <em>Compute</em> and change the name of the output, e.g.&nbsp;case-TheHague_v2.</li>
<li>Click <em>Compute</em> to run variant 2.</li>
<li>Fill in your calculated heads at the observation locations in the table above.</li>
</ol>
<p>To get the same lowering in the building pit, in the second variation the well flow might be reduced to 33% (10m3/d per well). For the sheet pile wall, increasing the wall quality or decreasing interlock leakage doesn’t make a big difference. <br> We can conclude that the best investment during the phase of design would be to perform extra hydrogeological research, e.g.&nbsp;by making more cpt’s, borings or performing a pumping test.</p>
</section>
<section id="sheet-piles-with-extra-depth" class="level2">
<h2 class="anchored" data-anchor-id="sheet-piles-with-extra-depth">Sheet piles with extra depth</h2>
<p>Suppose the best guess value of the clay layer resistance was right, then a mitigation measure for the effect of dewatering in the construction phase could be the installation of the wall to a deeper level where additional hydraulic resistance of 100d can be found at a depth of -13 m to -15 m NAP.</p>
<p>If we want to create extra depth of the sheet pile we will have to introduce it in a deeper layer. There are 2 options to implement it in your model:</p>
<ul>
<li>Add a copy of the geometry of the sheet pile wall to the existing <em>Leaky Line Doublet</em> shape and assign it to layer 1.</li>
<li>We recommend to create an extra <em>Leaky Line Doublet</em> element. In this case it is more easy to switch on/off this additional element in your sensitivity analysis.</li>
</ul>
<p>How to copy the sheet pile wall to an extra <em>Leaky Line Doublet</em> element?</p>
<ol start="113" class="example" type="1">
<li>In the QGIS-Tim panel go to the tab <em>Elements</em> and add a second <em>Leaky Line Doublet</em> and give it a name, e.g.&nbsp;“sheet_pile_L1”</li>
<li>Go to the tab <em>GeoPackage</em> and see that the element separately is added to the list. Here is can switch this element on / off for a calculation.</li>
<li>In the <em>Layers</em> panel select the new layer <em>timml Leaky Line Doublet:sheet_pile_l1</em>.</li>
<li>Open its <em>Attribute Table</em> (F6) and start the editing mode. The table is empty.</li>
<li>Also open the <em>Attribute Table</em> of the first <em>Leaky Line Doublet</em> and select the existing element.</li>
<li>Click on the <em>Copy</em> button (<img src="figures/tutorial/button_Copy_Selected_Row.png" class="img-fluid" style="width:3.0%">) in the source table to copy the selected row to the clipboard.</li>
</ol>
<p><img src="figures/tutorial/figure_Leakylinedoublet_copy.png" class="img-fluid" style="width:70.0%"></p>
<ol start="119" class="example" type="1">
<li>In the target table, paste it with the <em>Paste</em> button (<img src="figures/tutorial/button_Paste_Feature.png" class="img-fluid" style="width:3.0%">) as a new layer.</li>
<li>Assign this new sheet pile to layer=1.</li>
<li>Stop editing and save the new element.</li>
<li>Click <em>Compute</em> to start the computation again.</li>
</ol>
<p>The results are directly visible in the contours and cross-section again. <br> We can conclude that the drawdown in the building pit increases with a factor of almost 2 (-7.48 m at the centre of the building pit). Therefore, we adjust the well flow to 3.95/7.48*30=15.54 m3/d per well.</p>
<ol start="123" class="example" type="1">
<li>Implement this change in the <em>timm Well</em> element and recalculate the model.</li>
</ol>
<div id="fig-figure_HeadsInCrosssection04" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_HeadsInCrosssection04.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;13: Cross section of groundwater heads per layer, sheet pile wall R=500d in layers 0 and 1 and 8 wells at 15.25 m3/d each in layer0</figcaption>
</figure>
</div>
<p>We conclude that the drawdown of groundwater level around the building pit with deep sheet piles decreased significantly.</p>
<p>Next also alternatives with a shallow concrete cut-off wall will be calculated for a shallow and a deep wall. In that case we have R=1000 d, but note that the input in the attribute than becomes k*R=10000 due to the error in Tim.</p>
<ol start="124" class="example" type="1">
<li>After changing the value in attribute tables of wall elements, we can compute again, switching off and on the element for the deep wall section (tab Geopackage on the QGIS-Tim panel).</li>
</ol>
<p>Again extra calculation is needed to adjust well extractions for drawdown in the building pit.<br> Results of calculations are gathered in the following table, showing extractions and head outside the wall at South East monitoring position.</p>
<div id="tbl-CalculatedHeads2Variants" class="anchored">
<table class="table">
<caption>Table&nbsp;4: Effect of 4 Wall alternatives on extraction rate and drawdown South East.</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Wall alternative <br> at c1=40 d</th>
<th>Wall resistance <br> [d]</th>
<th>Groundwater extraction <br> [m3/d]</th>
<th>Head SE monitoring <br> [dh in m]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Shallow sheet pile wall</td>
<td>100</td>
<td>240</td>
<td>-0.39</td>
</tr>
<tr class="even">
<td>Deep sheet pile wall</td>
<td>100</td>
<td>122</td>
<td>-0.16</td>
</tr>
<tr class="odd">
<td>Shallow cut-off wall</td>
<td>1000</td>
<td>208</td>
<td>-0.30</td>
</tr>
<tr class="even">
<td>Deep cut-off wall</td>
<td>1000</td>
<td>80</td>
<td>-0.04</td>
</tr>
</tbody>
</table>
</div>
<p>Installation of 15 m deep sheet pile wall or cut-off wall can be elaborated in a geotechnical design. <br> Still, probably some decrease of interlock leakage is needed when sheet piles are chosen. Interlock sealing or maybe irrigation of water in a shallow drain pipe around the building pit could lead to approval by authorities.</p>
</section>
<section id="effect-of-a-not-closed-wall-about-20-cm" class="level2">
<h2 class="anchored" data-anchor-id="effect-of-a-not-closed-wall-about-20-cm">Effect of a not closed wall (about 20 cm)</h2>
<p>Authorities are afraid that leakage incidents could be harmful for surrounding monuments. The effect of leakage can be studied by creating a fictitious little opening in the wall. This can be done e.g.&nbsp;by changing the values of first and last coordinate of the leaky line doublet.</p>
<ol start="125" class="example" type="1">
<li>Select the <em>Leaky Line Doublet</em> in the <em>Layers</em> panel</li>
<li>In the editing toolbar go to the toggle editing option (<img src="figures/tutorial/button-Qgis-AttributeTable-StartEditingMode.png" class="img-fluid" style="width:4.0%">) and check the vertex option (<img src="figures/tutorial/button_VertexTool.png" class="img-fluid" style="width:4.0%">).</li>
<li>On the drawing panel select a point in the line element of the wall and right click.</li>
</ol>
<p>The list with coordinates appears in the vertex editor at the lower left corner of the screen. There you can edit the coordinates of all points in the line. Another option is to zoom in and select a point in the line element and drag it to a new position.</p>
<p>When the coordinates differ a gap results, in the studied case we created a 0.2 m wide gap. It might be elaborate to perform but the result is shown in the next figure. The result is calculated by using a small grid spacing. At this created gap a large flow results in the corner of the building pit, leading to an insufficient drawdown in the building pit and a 0.1 – 0.2 m larger lowering outside the building pit at that location.</p>
<div id="fig-figure_LeakageEffectCorner" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_LeakageEffectCorner.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;14: Calculated effect of leakage at one corner in the building pit</figcaption>
</figure>
</div>
<p>When the contractor wants to restore the dewatering level inside the building pit, the drawdown outside the gap will even grow further.</p>
</section>
<section id="using-python-for-sensitivity-analyses-with-a-qgis-tim-model" class="level2">
<h2 class="anchored" data-anchor-id="using-python-for-sensitivity-analyses-with-a-qgis-tim-model">Using Python for sensitivity analyses with a QGIS-Tim model</h2>
<p>QGIS-Tim offers the opportunity to export the geopackage of the created model to a Python script. This makes it possible to use the script for other ways of calculation, e.g.: - Calculation of model results in other Python environments, like Anaconda or Spyder or in a notebook. - Use in other Python oriented programs, like the Probabilistic Toolkit.</p>
<ol start="128" class="example" type="1">
<li>If input of all elements is ready and the model has proved to run properly, go to the QGIS-Tim panel and the tab <em>Geopackage</em>.</li>
<li>At the bottom press the button <em>Convert GeoPackage to Python script</em>.</li>
<li>After a short period for translation in Python the explorer panel appears where you can enter the name you want to give for the python file, e.g.&nbsp;“case-TheHague.py” and store it in a directory you choose to save your work. The file looks like:</li>
</ol>
<div id="fig-figure_PythonExport01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure_PythonExport01.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;15: Python script</figcaption>
</figure>
</div>
<p>As can be seen the converted Python file start with calls (e.g.&nbsp;import timml) to main necessary Python packages. After that, for each timm element in the model, all data coordinates and parameter values follow. At the end of the Python file the “model.solve” command is stated after which all head values in the domain with the desired mesh density are determined and also at demanded observation points.</p>
<p>As can be seen the Python script for TimML is written in a very dedicated and condensed manner.</p>
<p>To get the Python file running in a platform like Anaconda or Spyder, extra lines should be added at wish, to get the output that the user needs.</p>
<p>Next this file can be used for geostatistical and scenario-analysis. There are several ways of handling this kind of study, like writing an additional Python program to perform repeated calculations and statistical analysis on results. But an easy way is to use the Probabilistic Toolkit (PTK), a platform for statistical analysis to be used together with geotechnical design programs, developed by Deltares. The PTK can be used for study of model sensitivity for variation of parameter values or reliability analysis.</p>
<p>The PTK can be downloaded free of charge at <a href="https://download.deltares.nl/ptk" target="_blank">Probabilistic Toolkit - download.</a></p>
<ol start="131" class="example" type="1">
<li>Open the <strong>Probabilistic Toolkit</strong> from your desktop (<img src="figures/tutorial/icon-probabiliticToolKit.png" class="img-fluid" style="width:4.0%">) or Windows menu (Deltares folder).</li>
</ol>
<p>The Toolkit opens at the first of 5 tabs: <em>Model</em>.</p>
<ol start="132" class="example" type="1">
<li>In the section <em>Model Type</em> check if the dropdown menu <em>Type</em> is set to <em>Internal</em>.</li>
<li>In the section <em>Model Type</em> check if the dropdown menu <em>Language</em> is set to <em>Python</em> and a the field <em>Version</em> appears.</li>
<li>Select the tree points (‘…’) in the field <em>Version</em> and give the path where PTK can find the Python interpreter, e.g.&nbsp;Spyder at “C:\roelofs_fs\_software\deltaforge\pythonw.exe”.</li>
<li>Than you copy the content of the Python file we converted from QGIS-Tim into the window “Model code”.</li>
</ol>
<p>We handle the process in this way because we want to change some lines in the source code to get the program running in PTK.</p>
<p>Next the specific parameters must be selected that are expected to be probably most relevant to variations in results. In the source code used in the PTK, those parameters will not have input on a value but need to be mentioned with a name that the PTK can use for input selection in the calculations. <br> The parameters that seem to be important are:</p>
<ul>
<li>The hydraulic resistance of the sheet pile wall Rwall.</li>
<li>The resistance c1 of the first clay layer.</li>
<li>The permeability of the sand layer k01.</li>
<li>The resistance c2 of the second clay layer at -14 m NAP.</li>
</ul>
<div id="fig-figure-PTK-VariableNameValue" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-VariableNameValue.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;16: Declaration of Variables to control the analysis and first guess for values.</figcaption>
</figure>
</div>
<p>In PTK we have to set these parameters:</p>
<ol start="136" class="example" type="1">
<li>In the PTK panel <em>Input</em> click 4 times on the <em>Add</em> button (<img src="figures/tutorial/button-PTK-add.png" class="img-fluid" style="width:3.0%">), to add 4 variables and name them Rshp, czba, khol and cbasis (see <a href="#fig-figure-PTK-VariableNameValue">Figure&nbsp;16</a>)</li>
<li>In the tab <em>Variables</em> give these 4 variables the values 10000, 40, 10 and 100.</li>
<li>Return to the tab <em>Model</em> and assign these variable values to the parameters in the source code by copying this code block to the top of the Python source code (see <a href="#fig-figure-PTK02">Figure&nbsp;17</a>). <br> <code>Rwall = Rshp</code> <br> <code>c0    = czba</code> <br> <code>k0    = khol</code> <br> <code>c2    = cbasis</code></li>
<li>Finaly, replace the fixed value (<strong>NB!</strong> 2 times “Rwall”, for each sheet pile definition) in the Python code for the parameter name (see red elements in <a href="#fig-figure-PTK02">Figure&nbsp;17</a>).</li>
</ol>
<div id="fig-figure-PTK02" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK02.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;17: Replace parameters in the Python code.</figcaption>
</figure>
</div>
<ol start="140" class="example" type="1">
<li>At the end of the source code, eliminate the following lines from the converted file:</li>
</ol>
<p><code>head = model.headgrid(xg=np.arange(80940.0, 81166.0, 4), yg=np.arange(455554.0, 455360.0, -4) )</code></p>
<ol start="141" class="example" type="1">
<li>Also eliminate the lines:</li>
</ol>
<p><code>observation_peilbuis_2 = model.head(x=80970.16497991727, y=455495.54316352855)</code> <code>observation_peilbuis_3 = model.head(x=81004.86605597858, y=455389.68291883526)</code> <code>observation_peilbuis_4 = model.head(x=81049.06450220713, y=455485.0645022071)</code></p>
<ol start="142" class="example" type="1">
<li>Because we only are interested in 2 points, use the first two observation points and add these lines at the end of the Python script:</li>
</ol>
<p><code>pb0 = observation_observations_0[0]</code><br> <code>pb1 = observation_observations_1[0]</code></p>
<ol start="143" class="example" type="1">
<li>In the panel <em>Output</em> of the PTK use the <em>Add</em> button (<img src="figures/tutorial/button-PTK-add.png" class="img-fluid" style="width:3.0%">) the new defined variables “pb0” and “pb1”.</li>
<li>Check if the program works properly. Field <em>Analysis</em> must contain “Run model”, field <em>Results</em> must contain “Single run”</li>
<li>Press the RUN button (<img src="figures/tutorial/button-PTK-START.png" class="img-fluid" style="width:3.0%">) to calculate the model.</li>
</ol>
<p>In the tab <em>Run model</em> we find the results of our calculation.</p>
<ol start="146" class="example" type="1">
<li>Check if it complies with your earlier calculations in QGIS-Tim.</li>
</ol>
<div id="fig-figure-PTK03" class="quarto-figure quarto-figure-left anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK03.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;18: Result of test run in PTK to check model outcome.</figcaption>
</figure>
</div>
<p>If results are as expected, we can step to a sensitivity analyses.</p>
<ol start="147" class="example" type="1">
<li>In the tab <em>Field</em>, set the Analysis option to “Sensitivity*.</li>
<li>Go to the tab <em>Variables</em>.</li>
</ol>
<p>For each selected parameter a distribution is defined with certain limits or characteristic values. Distribution formulas can be chosen based on knowhow of the user. Best guess of the parameter value distributions is given in the next example window.</p>
<ol start="149" class="example" type="1">
<li>Change the distributon types for each Variable in the column “Distrubution” and fill in the other values.</li>
</ol>
<div id="fig-figure-PTK04" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK04.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;19: Best guess of the parameter value distributions</figcaption>
</figure>
</div>
<ol start="150" class="example" type="1">
<li>Select the row with sheetpile resistance (Rshp) and in the panel below the distribution is shown (see <a href="#fig-figure-PTK-graph01">Figure&nbsp;20</a>).</li>
</ol>
<p>Parameter value distributions of silt layer resistance (czba), basic peat layer resistance (cbasis) and permeability of Holocene sand (khol) are shown in graphs below.</p>
<div id="fig-figure-PTK-graph01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-graph01.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;20: Parameter value distributions of sheetpile resistance Rshp</figcaption>
</figure>
</div>
<div id="fig-figure-PTK-graph02" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-graph02.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;21: Parameter value distributions of silt layer resistance czba</figcaption>
</figure>
</div>
<div id="fig-figure-PTK-graph03" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-graph03.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;22: Parameter value distributions of basic peat layer resistance cbasis</figcaption>
</figure>
</div>
<div id="fig-figure-PTK-graph04" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-graph04.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;23: Parameter value distributions of permeability of Holocene sand khol</figcaption>
</figure>
</div>
<p>Low and high value of resistivity are set in the tab <em>Calculation</em> to 10% and 90%.</p>
<ol start="151" class="example" type="1">
<li>Press RUN (<img src="figures/tutorial/button-PTK-START.png" class="img-fluid" style="width:3.0%">) to recalculate the model in the Sensitivity mode.</li>
<li>After the run is finished, a new tab <em>Sensitivity</em> is visible. Go to the tab.</li>
</ol>
<p>Here we can find what extent parameter variations contribute to model results. In <a href="#fig-figure-PTK-Sensitivity01">Figure&nbsp;24</a> it is shown what parameter variation means for drawdown in the building pit. We conclude that for a situation with a sheet pile wall in only the first sand layer the variation of the resistance of the loamy layer (czba) determines the drawdown, and with that this factor determines the amount of extraction in that situation for the largest part. Translated to practical considerations, it is worthwhile to spend extra budget on determining the homogeneity of that layer and the vertical permeability of the loamy layer in more detail.</p>
<div id="fig-figure-PTK-Sensitivity01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-Sensitivity01.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;24: Sensitivity of drawdown in building pit to parameter value distributions of sheetpile resistance (Rshp), silt layer resistance (czba), basic peat layer resistance (cbasis) and permeability of Holocene sand (khol).</figcaption>
</figure>
</div>
<p>However, with this model we get a varying outcome for the level in the building pit and this is not realistic for a practical situation. In real projects, the dewatering contractor would like to know what the effect on dewatering demand and interaction with environment would be if the aim is to reach the designed groundwater head in the building pit while adjusting the rate of extraction in the wells. <br></p>
<p>We can do this quite simply with the aid of the Python file. To perform this analysis we follow the assumption that the relation between drawdown and well extraction is linear.<br></p>
<ol start="153" class="example" type="1">
<li>Go to the tab <em>Model</em> and in the panel <em>Model code</em> remove from the end of the script the lines for <code>pb0</code> and the line for <code>pb1</code>.</li>
<li>On the top of the script, below the line <code>k01 = khol</code> add a value for the fixed total extraction flux and the fixed head within the building pit: <br> <code>Qws = 100</code> <br> <code>pb0d = -3.5</code></li>
<li>Now add the following lines to the code. <strong>NB!</strong> <em>Use the same observation variable name as is used in your script!</em><br> <code>pb0  = observation_observations_0[0]</code> <br> <code>fact = pb0d/pb0</code><br> <code>Qtot = 8*Qws*fact</code><br> <code>pb1  = observation_observations_1[0]*fact</code><br></li>
<li>Within the section of each of the 8 wells, go to the line defining the pumping rate (Qw) and make it variable: <code>Qw=Qws</code></li>
<li>Recalculate the sensitivity.</li>
<li>After the calculation is finisched, go to the tab <em>Sensitivity</em> and in the top left field select “Qtot” and or “pb1”.</li>
</ol>
<p>Again, we see that the parameter value for the hydraulic resistance of the loamy clay layer (czba) is most relevant to the variation of the outcome, not only for the drawdown effect in the area surrounding the building pit (pb1, see <a href="#fig-figure-PTK-Sensitivity02">Figure&nbsp;25</a>) but also for the total flow to the extraction wells (Qtot, see <a href="#fig-figure-PTK-Sensitivity03">Figure&nbsp;26</a>).</p>
<div id="fig-figure-PTK-Sensitivity02" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-Sensitivity02.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;25: Sensitivity of Pb1 (drawdown outside building pit) due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol with constant lowering inside the building pit.</figcaption>
</figure>
</div>
<div id="fig-figure-PTK-Sensitivity03" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-Sensitivity03.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;26: Sensitivity of Qtot (groundwater extraction from the building pit) due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol, with constant lowering inside the building pit.</figcaption>
</figure>
</div>
<p>Based on the same statistic distributions for the parameter values we now are also able to calculate the uncertainty in output for this case, using a sheet pile wall in the first aquifer. <br> The distribution of the results for drawdown just outside the building pit is given in <a href="#fig-figure-PTK-Uncertainty01">Figure&nbsp;27</a>, which in the lower part shows the distribution for total flow rate from the dewatering in the building pit.</p>
<div id="fig-figure-PTK-Uncertainty01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-Uncertainty01.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;27: Uncertainty in drawdown outside building pit due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol with constant lowering inside the building pit</figcaption>
</figure>
</div>
<div id="fig-figure-PTK-Uncertainty02" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-Uncertainty02.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;28: Uncertainty in groundwater extraction from the building pit due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol with constant lowering inside the building pit</figcaption>
</figure>
</div>
<p>The probabilistic model gives a 50% probability on a flow of 297 m3/d, even with a 10% chance of an overrun to 659 m3/d.&nbsp;The groundwater drawdown at the standpipe outside the building pit amounts -0.44 m with 50% probability but with 10% value of -1.10 m. <br></p>
<p>Moreover, it is possible to perform a calculation of reliability with the PTK.</p>
<ol start="159" class="example" type="1">
<li>Go to the tab <em>Analysis</em> and select the option <em>Reliability</em>.</li>
<li>Then we check the variable distributions again.</li>
<li>Next, we open the tab <em>Calculation</em>.</li>
</ol>
<p>This gives the possibility to introduce a failure criterium for certain variable, like in our case pb1. We choose a less strict criterium because with a shallow sheetpile wall it is not possible to meet the requirements anyhow.</p>
<ol start="162" class="example" type="1">
<li>Choose a comparison with undershooting a critical value of REF -0.5 m for the groundwater head in pb1 (see <a href="#fig-figure-PTK-Calculation01">Figure&nbsp;29</a>).</li>
</ol>
<p>At the right hand side in the settings window a calculation method needs to be selected. Many statistical methods are available, like Monte Carlo method etc. They are described in the help of the PTK in the main menu. We chose FORM (First Order Reliability Method) as a fast method because it is an automated intelligent iteration process to find a design point for reliability by using first calculated realisations (p.97 in the Help manual, see PTK menu).</p>
<div id="fig-figure-PTK-Calculation01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-Calculation01.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;29: Setting up a reliability calculation by choosing a failure criterium and selecting a calculation method.</figcaption>
</figure>
</div>
<ol start="163" class="example" type="1">
<li>Recalculate the model and go to the tab <em>Reliability</em>.</li>
</ol>
<p>From the result (see <a href="#fig-figure-PTK-Reliability01">Figure&nbsp;30</a>) we conclude that the FORM method is able to find a solution in just a few iterations.</p>
<div id="fig-figure-PTK-Reliability01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/figure-PTK-Reliability01.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;30: Result of the reliability analysis for the selected failure criterium.</figcaption>
</figure>
</div>
<p>It follows that the probability of failure for even a not very discriminating criterium as a drawdown outside the building pit of REF -0.5 m is 42%. The calculation method also returns the contributions of all relevant parameters to the outcome. It is obvious that the loamy layer at shallow depth below the building pit does not deliver enough hydraulic resistance to isolate the building activities from surrounding monuments. <br></p>
<p>As is clear, the studied layout of the building pit plus dewatering will not meet the demands of the local authorities regarding the limitations on drawdown. By waterlocking the sheet pile wall we can hardly expect a satisfactory decrease of drawdown effects around the building site, therefore, the best solution is to install the sheet pile wall to a deeper level. <br></p>
<p>Repeating the calculations with sheetpile wall in 2 layers the results will prove the possibility to meet the demands on groundwater effects with that building pit design.<br></p>
<p>This description of the possibilities like exporting a Python script from Qgis-Tim and using this in statistical analysis is just a short peek into all the options. To find more information we must refer to the manual of the Probabilistic toolkit PTK.</p>
</section>
<section id="creating-a-transient-model" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-transient-model">Creating a transient model</h2>
<p>At this moment, it is not possible to create a transient (time dependent) model with correct answers to case studies with sheetpile walls. The TTim solution needs to be updated. <br> Nevertheless in this section we want to guide you on setting up a basic transient model. <br></p>
<ol start="164" class="example" type="1">
<li>Return to QGIS and in the QGIS-Tim panel go to the tab <em>Compute</em>.</li>
<li>In the section <em>Output</em> turn on the option “Transient”.</li>
<li>In the panel <em>Layers</em> select <em>timml Aquifer:Aquifer</em>.</li>
</ol>
<p>As can be seen in <a href="#fig-Panel-TimmlAquiferAttrTable_v02">Figure&nbsp;31</a>, the matrix of properties is extended in the transient mode with cells for transient parameters, like specific storage coefficients (aquitard_s, and aquifer_s) and porosities (aquitard_npor and aquifer_npor). Take care that specific storage coefficient is a storage per meter layer thickness. In older MWell course material a speadsheet is presented for estimation of coefficient values but there we calculated storage coefficients per whole layer. Those values should be divided by layer thickness.</p>
<div id="fig-Panel-TimmlAquiferAttrTable_v02" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/Panel-Timml AquiferAttrTable_v02.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;31: Attribute Table for Aquifer in transient condition.</figcaption>
</figure>
</div>
<ol start="167" class="example" type="1">
<li>Fill in the Table with the corresponding values.</li>
<li>In the TTim section in the <em>Layers panel</em> go to the list of elements for transient calculations.</li>
<li>Select <em>ttim Temporal Settings:Aquifer</em> and open its <em>Attribute Table</em> (F6). Here the length of the time series is specified.</li>
<li>Set the starting time to 0.</li>
</ol>
<p>But calculations take place for the range of time steps between “time_min” and “time_max”. The time unit is according to central settings in the project, mostly time in days. “Time_min” should not be zero but given a slight offset. Here we also find a “Stehfest_M” number, related to the number of terms in the calculation method performing transformation of formulas in solving differential equations. A reference date can be set to relate the calculation to real time data.</p>
<ol start="171" class="example" type="1">
<li>Fill in the table according to <a href="#fig-Panel-TTimAquiferAttrTable_v01">Figure&nbsp;32</a>.</li>
</ol>
<div id="fig-Panel-TTimAquiferAttrTable_v01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/Panel-TTim AquiferAttrTable_v01.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;32: Table for <em>ttim Temporal Settings:Aquifer</em></figcaption>
</figure>
</div>
<p><strong>NB!</strong>: In QGIS it is an obligation to use a “reference_date” to get the model running and present outcomes!</p>
<ol start="172" class="example" type="1">
<li>Select <em>ttim Computation Times:Domain</em> and set the time values for time steps where we want to get calculations of spatially distributed heads in mesh or raster points and contours.</li>
</ol>
<div id="fig-Panel-TTim_DomainAttrTable_v01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/Panel-TTim_DomainAttrTable_v01.png" class="img-fluid figure-img" style="width:30.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;33: Table for <em>ttim Computation Times:Domain</em></figcaption>
</figure>
</div>
<p>For this case we will leave this table blank, because calculating several head distributions at different time steps is rather time consuming during this course.</p>
<ol start="173" class="example" type="1">
<li>Select <em>ttim Observation:observations</em> and here we can set the time steps for a time series at certain points we want to monitor the calculation results. We set points at intervals that follow a (approximately) logarithmic increase in time intervals. Proposed values are shown in the next table.</li>
</ol>
<div id="fig-Panel-TTim_ObservationsAttrTable_v01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/tutorial/Panel-TTim_ObservationsAttrTable_v01.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;34: Table for <em>ttim Observation:observations</em></figcaption>
</figure>
</div>
<p>Don’t choose exactly the same time as when changing the flow. So if 60 is an end value, choose 59.9.</p>
<p>In the <em>Attribute Table</em> of layer <em>ttim Well:pumping_wells</em> we can set the discharge amount. The value might change during time when excavation is considered or construction is performed in phases. For each change we have to add a line of input. In case there are a lot of switch on/off moments, this is a lot of work. <br> We just leave this option without any change because there is an other option in case each well has only a singel start and end time.</p>
<ol start="174" class="example" type="1">
<li>Therefor go to the layer <em>timml Well:pumping_wells</em> layer. This layer contains simple elements to make it behave as a simple Timm element.</li>
<li>In the <em>Attribute Table</em> make start_time=5, end_time=30 and discharge_transient=15.</li>
<li>But fill in a value of 0 m3/d in column “Discharge” because this variable is part of TimML well element. We use the “discharge_transient” variable to define flow in TTim. Remember: Solution of TTim is superposed on solution of TimML.</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./tutorial_Rijsenhout.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Building Pit Rijsenhout</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>