[
  {
    "objectID": "install.html",
    "href": "install.html",
    "title": "Install",
    "section": "",
    "text": "QGIS-Tim consists of two parts: A QGIS plugin and the gistim Python package, which runs in a separate Python environment. The installation of QGIS-Tim therfore consists of three steps:"
  },
  {
    "objectID": "install.html#install-qgis",
    "href": "install.html#install-qgis",
    "title": "Install",
    "section": "1. Install QGIS",
    "text": "1. Install QGIS\nDownload and install a recent version of QGIS (>3.22): https://www.qgis.org/en/site/forusers/download.html"
  },
  {
    "objectID": "install.html#install-gistim-in-a-seperate-python-environment",
    "href": "install.html#install-gistim-in-a-seperate-python-environment",
    "title": "Install",
    "section": "2. Install gistim in a seperate Python environment",
    "text": "2. Install gistim in a seperate Python environment\ngistim requires a seperate Python environment, because it depends on packages incompatible with the packages in QGIS’ own Python environment. There are two approaches: either using the fully-fletched Deltaforge distribution (Recommended) or the leaner Miniforge distribution.\n\nMethod 1: with Deltaforge (Recommended)\nDownload and install Deltaforge. Make sure you use Deltaforge version 0.3.0 or higher!\n\nOpen the Deltaforge prompt (search in Windows Start for \"Deltaforge Prompt\").\nConfigure the gistim installation, so that the QGIS plugin is able to find it. Run: python -m gistim configure\n\n\n\nMethod 2: with Miniforge\nDownload and install a miniforge Python installation\n\nOpen the miniforge prompt (search in Windows Start for \"Miniforge Prompt\").\nCreate a new conda environment, run: conda create --name tim python=3.9\nActivate the environment: conda activate tim\nRun: conda install -c conda-forge gistim\nConfigure the gistim installation, so that the QGIS plugin is able to find it. Run: python -m gistim configure"
  },
  {
    "objectID": "install.html#install-the-qgis-plugin",
    "href": "install.html#install-the-qgis-plugin",
    "title": "Install",
    "section": "3. Install the QGIS plugin",
    "text": "3. Install the QGIS plugin\nInstall the QGIS plugin now.\n\nFrom the plugin database\n–Explanation how to install from the plugin database comes here here when we released version >4.1 on the plugin database–\n\n\nFrom Zip\nThe qgistim.zip should not be unzipped manually, QGIS will do so.\n\nOpen QGIS.\nAt the top, find the Plugins menu (~sixth object in the menubar).\nFind \"Manage and Install plugins\" (first object in drop-down).\nFind \"Install from ZIP\" (Sixth in list).\nEnter the path to the qgistim.zip file.\nClick \"Install Plugin\".\n\nThis will add an icon to the toolbar(s). By clicking the icon, the plugin is started. The QGIS plugin will automatically start and external interpreter when it is required."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html",
    "href": "tutorial-QGIS-Tim.html",
    "title": "Tutorial QGIS-Tim",
    "section": "",
    "text": "Be sure QGIS version 3.22.00 or higher is installed.\nBe sure the gistim Python package is installed (see installation for instructions).\nDownload the tutorial material. Follow this link.\nInstallation of the QGIS-Tim plugin and the MOD plugin is part of this Tutorial and the necessary ZIP files are included in the tutorial material.\nInternet connections is optional during this Tutorial. It is only required for installation of additional plugins and the use of an online topographic background map."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#description",
    "href": "tutorial-QGIS-Tim.html#description",
    "title": "Tutorial QGIS-Tim",
    "section": "Description",
    "text": "Description\nIn this tutorial, you will learn how to:\n\ninstall and use the QGIS-Tim plugin;\nuse the basic of QGIS for pre- and postprocessing of Tim;\ncreate several steady state models (TimML) and a transient model (TTim);\nanalyse the results;\nexport your model to a Python script."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#objective",
    "href": "tutorial-QGIS-Tim.html#objective",
    "title": "Tutorial QGIS-Tim",
    "section": "Objective",
    "text": "Objective\nWith the basic experience from this tutorial and the online documentation on Tim you are able to use Tim in your daily work."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#introduction-case-rijsenhout",
    "href": "tutorial-QGIS-Tim.html#introduction-case-rijsenhout",
    "title": "Tutorial QGIS-Tim",
    "section": "Introduction case Rijsenhout",
    "text": "Introduction case Rijsenhout\nIn one of the fields west of Rijsenhout industrial activities are planned, the construction of green houses. From historical sources it is known that some bombs from World War 2 are still in the surface. Before building starts, these bombs are removed for safety reasons. The question is: what dewatering is necessary to be able to remove the bombs in dry conditions? The contractor plans to drill sheet piles to prevent the excavation from collapsing. The groundwater level inside the building pit is lowered with a set of wells just in the top of the aquifer within the building pit. All pumped water is infiltrated over a stretch of wells near the existing buildings. At the project location, the top layer is 12 m thick and consists of a low permeable combination of clay and peat. Below this top layer we find an aquifer of 50 m. The Westeinderplassen, a lake system with a depth of 3 m., is located East of the project area.\n\n\n\nFigure 1: Geological cross section near Rijssenhout [source: BRO GeoTOP v1.4.1]"
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#getting-started",
    "href": "tutorial-QGIS-Tim.html#getting-started",
    "title": "Tutorial QGIS-Tim",
    "section": "Getting Started",
    "text": "Getting Started\n\nLaunch QGIS from your START menu, your desktop or click on …\\QGIS3.28.0\\bin\\qgis-bin.exe.\n\n\nIntermezzo: QGIS language settings\nPerhaps your QGIS was installed in another language than English. Because the Tutorial refers to the English version, let’s change to English.\n\nFrom the main menu click on Settings and select Options (e.g. in Dutch Extra and Opties).\nIn the new window go to the General section on the left.\nCheck the box to allow Override System Locale.\nFrom the drop-down menu “User interface translation” select American English and click OK.\nClose QGIS and open it again to activate your language change.\n\n\nWe start with the creation of a new QGIS project.\n\nFrom the main menu click on Project and select New.\n\nThe case in this tutorial is located in The Netherlands, so next we select the appropriate projection.\n\nFrom the main menu click on Project and select Properties.\nIn the Properties window select the category CRS, search for “EPSG:28992” and you find “Amersfoort / RD New”. Select this option and click the Apply button, followed by the OK button to close the window.\n\n\nIn case your work is mostly in The Netherlands and in the “Amersfoort / RD New” projection, consider making this your default projection.\n\nFrom the main menu click on Settings and select Options….\nIn the section CRS and Transforms select CRS (handling), pick the radio button Use a default CRS and select “EPSG:28992 -Amersfoort / RD New”.\nClick OK.\nClose this window.\n\n\n\nInstall plugins\nThis is the moment to download/import four plugins needed for this tutorial:\n\nthe QGIS-Tim plugin. The development version imported from ZIP file.\nthe iMOD plugin. The development version imported from ZIP file.\nthe Value Tool. The official version installed via QGIS (internet connection required).\nthe PDOK plugin. The official version installed via QGIS (internet connection required).  This plugin gives access to a large database from which we will load the topographic maps and use the navigation option.\n\n\nGo to Plugins from the main menu and select Manage and Install Plugins… to open the plugin window.\nOn the left section select Install from ZIP.\nClick the Browse button () and from the tutorial dataset select the ZIP file “QGIS-Tim_training\\QGIS-iMOD-plugin.zip”.\nClick Install Plugin.\nIn the same way, install the QGIS-Tim plugin using the ZIP file “QGIS-Tim_training\\QGIS-Tim-plugin.zip”.\n\nIf you have an internet connection continue with the installation of the next two plugins.\n\nFrom the left section, select the group All to see all available plugins.\nSearch for “Value Tool” and install it.\nSearch for “PDOK services plugin” and install it.\nMake sure that under Plugins > Manage and Install Plugins > Installed now the 4 added plugins are checked.\nClose the Plugins window.\n\nSee in the toolbar section of QGIS that the plugins are installed:\n\niMOD Toolbar \nQGIS-Tim \nValue Tool \nPDOK Services Plugin \n\nFurther in this Tutorial we will use some default toolbars that might be hidden at the moment. Let’s check that and unhide if necessary.\n\nSelect View from the main menu and choose Toolbars.\nBe sure the “Advanced Digitizing Toolbar”, the “Snapping Toolbar” and the “Attributes Toolbar” is checked.\n\n\n\nPrepare your project\nFor navigation purposes, let’s load a topographic map for The Netherlands from the PDOK database.\n\nIf you do not have an internet connection, follow the next steps to import a simple PNG file as a background.\n\nGo to Layer in the main menu, go to Add layer and select Add Raster layer.\nUse the browse button () and from the tutorial material select “…\\QGIS-Tim_training\\dbase\\TopographicMapRijssenhout.png”.\nClick on Add and Close the window.\nIf you do not see the map, select the layer “TopographicMapRijssenhout”, click your right mouse button and select “Zoom to Layer(s)”.\nContinue after step 23.\n\n\n\nClick on the PDOK plugin button () to open the “PDOK Services Plugin” window.\nFrom the tab PDOK Services search for “pastel” and you will find a WMTS type layer called “brtachtergrondkaart”.\nSelect the layer.\nIn the section “laag toevoegen” click the button Onder.\nClose the PDOK window.\n\nOur project area is near the town of Rijsenhout so let’s navigate to that town using the PDOK plugin.\n\nType “Rijsenhout” in the PDOK search field, near the PDOK button ()\nPDOK will find “Rijsenhout, Haarlemmermeer, Noord-Holland”. Click on it and QGIS will fly you to the project location.\n\nLet’s now open a shape file containing the locations and depths of the bombs.\n\nGo to Layer in the main menu, go to Add layer and select Add Vector layer.\nUse the browse button () and from the tutorial material select “…\\QGIS-Tim_training\\dbase\\bombs.shp”.\nClick on Add and Close the window.\n\n Tip: a fast alternative for adding layers: from the menu View > Toolbar add the Manage Layers Toolbar and use the button .\n\nIn the Layers panel on the left, select the layer “bombs”.\nClick your right mouse button and from the menu select Show Labels.\nYou can zoom in and out with the scroll button on your mouse or navigate with the buttons in the main menu: \nUse  to pan the map with your left mouse button and use  to zoom to the extend of the layers/groups selected in the Layers panel.\n\nLet’s save this project to be able to return to it later or in case of a crash of QGIS.\n\nGo to Project in the main menu, select Save As and select a folder and a file name for your project, e.g. “…\\QGIS-Tim_training\\tutorial1.qgz”"
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#start-your-tim-model",
    "href": "tutorial-QGIS-Tim.html#start-your-tim-model",
    "title": "Tutorial QGIS-Tim",
    "section": "Start your Tim model",
    "text": "Start your Tim model\nNow we are ready to activate the QGIS-Tim plugin.\n\nClick on the QGIS-Tim plugin button () and the QGIS-Tim panel appears.\nGo to the tab GeoPackage.  Here we will create an empty database (geopackage) to store all elements and parameters for the model.\nClick the New button to create the GeoPackage and save it for instance in the folder with your training data, e.g. “..\\QGIS-Tim_training\\dbase\\case-Rijsenhout.gpkg”.\n\nYour window looks like in Figure 2.\n\n\n\nFigure 2: QGIS-Tim panel\n\n\n\nCheck in the Layers panel on the left that your new geopackage is added as a group.  A sub group timml for the steady state model input, the sub group ttim for the transient model input and a series of output formats (vector/mesh/raster).\n\nIf you had no introduction to the Tim plugin, read the Intermezzo below for a general explanation of the components.\n\nIntermezzo: introduction Tabs on the Tim panel\n\nGeoPackage: an overview of the elements in your geopackage. In case you switch to transient modelling, an extra column with ttim elements is added.\nElements: a list of 14 Tim elements from which you can build your model.\nCompute: here you can define your domain and cell size, decide if your model is transient or not and change the output name.\nExtract: open an existing 3d geohydrological model (NC file) and extract the data for your project area.\n\n\nNow we are ready to define our first steady state model by parameterizing our Aquifer."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-1-single-aquifer",
    "href": "tutorial-QGIS-Tim.html#model-1-single-aquifer",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 1: single aquifer",
    "text": "Model 1: single aquifer\nWe start with a very simple ‘model’, only the parameters of a single aquifer.  Important message: all editing of model parameters and model elements you do in the Layers panel on the left!\n\nSo select the layer “timml Aquifer:Aquifer” on the left.\nClick your right mouse button and from the menu select Attribute Table to open the table in a new window.  NB Alternative is to press F6 or use the button Open Attribute Tabll ().\nStart the editing mode with a click on the Toggle Editing Mode button ().\nHover with your mouse over the buttons and find the Add Feature button (). Perhaps number 5 from left.\nAdd a new feature with this Add Feature button. In this case a feature is a hydrological layer.\nFill the feature with the values from the table below:\n\n\n\n\nparameter\nvalue\nunit\ncomment\n\n\n\n\nfid\nAutogenerate\n[-]\nID is autogenerated by QGIS\n\n\nLayer\n0\n[-]\n(see remark below)\n\n\naquifer_top\n+2\n[m MSL]\n\n\n\naquifer_bottom\n-10\n[m MSL]\n\n\n\naquifer_c\nNULL\n[d]\n\n\n\naquifer_k\n5\n[m/d]\n\n\n\nsemiconfined_top\nNULL\n[m MSL]\n\n\n\nsemiconfined_head\nNULL\n[m MSL]\n\n\n\n\nNB! In the real world counting starts with 1. However, Tim is programmed in Python and in Python counting starts with 0. You will get used to it. Also be aware that the Aquifer element you just edited is just a table. This is indicated with the icon () just before the layer name in the left panel. For Tim this means that the properties in this table apply for the full model domain. We will introduce some inhomogeneities later as polygons within that domain.\n\nSave all changes with the Save Edits button ().\nStop the Editing Mode with a click on the button ().\nClose the Attribute Table window with a click on the X in the upper right corner.\nGo to the tab Compute in QGIS-Tim.\nClick the button Set to current extent.\nStart the calculation with a click on Compute.\n\nA black Python.exe window pops up indicating that the TIM calculation started on the background. You can ignore this window but keep it open. Of course you van minimize it. If the calculation was completed successful, you will see this echo in QGIS.\n.\nAfter the calculation you see that the result is automatically added to the geopackage, both as a mesh and raster layer. Although these layers are checked, the data is not visible. That is because the GeoPackage was added last, and QGIS adds layers at the end of the list. Let’s move the layer “pastel” to the background.\n\nSelect the layer “pastel” and drag it with your left mouse button to the bottom of the list of layers.\n\nThe calculation result is now visible and we see a raster with just the value 0, not a very exciting result because no other elements are present yet. Let’s now add a well element.\n\nIntermezzo: Mesh and Raster format explained\n\nMesh: an unstructured grid usually with temporal and other components. Preferred format in QGIS-Tim to animate temporal data, to create cross sections or evaluate values at your mouse position.\nRaster: is made up of pixels (also referred to as grid cells). They are regularly spaced and square. Preferred format in QGIS-Tim to perform calculations with the Raster Calculator tool."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-2-single-well",
    "href": "tutorial-QGIS-Tim.html#model-2-single-well",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 2: single well",
    "text": "Model 2: single well\n\nFirst hide the output layers by deselecting both the rasters (case-Rijsenhout-output:raster) and meshes (case-Rijsenhout-output:mesh).\nGo to the tab Elements in QGIS-Tim.\nClick on the element “Well” and a window opens to create a new (vector) layer in QGIS.\nGive the layer a name, e.g. “DewateringWell”.\n\nSee that layer “timml Well:DewateringWell” is added to the timml sub-group in your geopackage with ‘point’ as geometry. Also in the ttim sub-group an element with the same name is added. This is a table that can store transient well data while referring to the x/y locations in the timml layer. Next step is to add the actual well, both the location and its parameters.\n\nSelect the layer “timml Well:DewateringWell”.\nClick your right mouse button and select the Toggle Editing Mode ().\nTo add a new well (feature) to the layer click the Add Point Feature button ().\nWith your mouse, click on a location in the centre of the group of bombs.\nFill the feature with the values from the example below.\n\n\n\nClick OK.\nClick the Toggle Editing button () and if you are asked to save changes select Save.  An alternative way to save your edits is to click the Save Layer Edits button () and then stop editing with the Toggle Editing button ().\n\nNext step is to rerun the model including the new well.\n\nIn QGIS-Tim go to the tab GeoPackage and see that the Well is added.\nGo to the tab Compute and click on Compute.\n\nThe output in your Geopackage is directly overwritten with the new results.\n\nUnhide the output layer for raster, probably named “case-Rijsenhout-output:raster”.\n\nDo you like to see the values of the calculated Head under you mouse?\n\nSelect the Value Tool button ().\nHover over the area and in the “Value Tool” panel you see the value at your mouse location.\n\n\n\n\nFigure 3: Example panel Value Tool\n\n\nDo you like to see the values in a cross section? Deltares developed the Cross Section Tool, available in the iMOD Plugin.\n\nOn the iMOD Toolbar select the Cross section button () to start the iMOD Cross Section tool. In the empty cross-section we can add a selection of (geological) layers. For now, we only select the calculated heads.\nOn the iMOD Cross Section Plot click on the button Select location and draw your cross-section line from north to south (right mouse button to close the line).\nFrom the dropdown menu on the left of this toolbar, select the raster () named “case-Rijsenhout-head_layer_0”.\nClick the button Add to add this layer to the cross-section manager below.\nClick the button Plot to draw this layer in the cross section.\n\nYour screen might look like Figure 4.\nTIP: If you do not see any line, perhaps the axes are not defined well. To view all data, click you right mouse button in the figure and select the option “View All”. The alternative is to click on the small A symbol () in the lower left of the chart.\n\n\n\nFigure 4: Cross section with calculated Head"
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-3-multiple-layers",
    "href": "tutorial-QGIS-Tim.html#model-3-multiple-layers",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 3: multiple layers",
    "text": "Model 3: multiple layers\nA single aquifer is of course not enough to describe the geology of our project area. A simplification of the geology is given in the cross section in Figure 5. In this low lying polder, there is a Holocene top layer of 12 m thickness on top of an aquifer. The surface level of the top layer is 5 m below see level, it has a resistance of 1500 days and the water level within this polder is 1 meter below surface level. The aquifer has a horizontal permeability of 30 m/d and a thickness of 50 m. The anisotropy factor is 3 resulting in a vertical resistance of 0.1 day per meter. Tim can handle multiple layers so the next step is to bring these parameters into the model.\n\n\n\nFigure 5: Project area cross section (left) lifting the World War II bomb (right)\n\n\n\nIn your geopackage select the layer “timml Aquifer:Aquifer” and click your right mouse button.\nFrom the menu select Open Attribute Table and the table opens in a new window. Once again, press F6 for a quick open of the Attribute Table.\nStart the editing mode with a click on the Toggle Editing Mode button ().\nAdd three extra aquifers / features; click three times on the Add Feature button ().\n\nThe Holocene top layer is not a distinguished layer but a resistance on top of layer 0.\n\nFill the features with the values from the table below:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfid\nlayer\naquifer_top\naquifer_bottom\naquitard_c\naquifer_k\nsemiconf_top\nsemiconf_head\n\n\n\n\n1\n0\n-17\n-22\n1500\n30\n-5\n-6\n\n\n2\n1\n-22\n-27\n0.5\n30\nNULL\nNULL\n\n\n3\n2\n-27\n-47\n1.25\n30\nNULL\nNULL\n\n\n4\n3\n-47\n-67\n2\n30\nNULL\nNULL\n\n\n\n\nSave your changes and close the window.\nGo to the tab Compute and run the new model with a click on the button Compute.\n\nLet’s now check the calculated heads for the 4 layers, first with the Value Tool and then with the Cross section tool.\n\nFrom the layers select the layer “case-Rijsenhout-output:raster” and deselect the “case-Rijsenhout-output:mesh”.\nActivate the Value Tool ().\nIn the Value Tool panel go to the tab Options.\nFor Show Layers choose “Visible layers” and for Show bands choose “Active bands”.\nReturn to the tab Table and hoover over the calculated values, especially near your well.\nActivate the iMOD Cross section widget () to create your cross section with the four layers (Need instructions? Go back to step 65 for support).  NB You don’t need to ‘add’ all four layers separately. Just use the raster file “case-Rijsenhout-head_layer_0” and from the dropdown menu Variable: select the four bands/layers."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-4-add-a-set-of-sheet-piles",
    "href": "tutorial-QGIS-Tim.html#model-4-add-a-set-of-sheet-piles",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 4: add a set of sheet piles",
    "text": "Model 4: add a set of sheet piles\nNow we introduce a new but frequently used element: the sheet pile.\n\nReturn to the QGIS-Tim panel and go to the tab Elements.\nClick on the element “Leaky Line Doublet”.\nGive the layer a name, e.g. “sheetpile”.\nIn your geopackage select the layer “timml Leaky Line Doublet:sheetpile” and start editing using the Toggle Editing Mode button ().\nIn the editing mode, the Add Line Feature button () is available. Click the button and draw a box around the 5 bombs (click left to start, click right to close).\nIn the Feature Attributes window make resistance = 1500 and layer = 0.\nClick OK.\n\nYou probably tried to close the building pit but either your lines cross or do not close actually when zooming in. To close the pit, let’s snap both start and end point together.\n\nFirst enable the snapping mode with a click on the button ().\nThen activate the Vertex Tool with a click on the button .\nMove your mouse to the start point location and when it shows a small circle, click your left mouse button.\nNext, move your mouse towards the end point and you see the snapping active: the end point gets a small fuchsia box.\nClick your left mouse and you see that both vertices now connect.\n\nPerhaps you are not satisfied with your created building pit.\n\nYou can play around with other nice options in QGIS to move (), rotate () or scale () your pit.\nEnd the Toggle Editing Mode with  and save your changes.\nIn the QGIS-Tim panel go to Compute.\nRerun your model and check the calculated heads.\n\nDisappointed in the effect of the sheet piles on the calculated head? You are right if you expected no major effect because of the shallow penetration in this high permeable thick aquifer. If we would increase the aquitard_c between layers 0 and 1, perhaps we would see more effect of the sheet piles. \n\nIf you dare… try to rerun the model yourself with aquitard_c = 800 (layer 1) and see that the drawdown is limited to the building pit (Figure 6.)\nDon’t forget to undo this side path and make aquitard_c = 0.5 again for layer 1.\n\n\n\n\nFigure 6: Drawdown within the building pit"
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#how-to-reopen-tim-after-closing-qgis.",
    "href": "tutorial-QGIS-Tim.html#how-to-reopen-tim-after-closing-qgis.",
    "title": "Tutorial QGIS-Tim",
    "section": " How to reopen Tim after closing QGIS.",
    "text": "How to reopen Tim after closing QGIS.\nBefore we introduce you another new Tim element we must explain you how to reopen your Tim project after a closure of QGIS. A crash might close QGIS or just a long day of work is a reason to shut down your laptop. Always remember two things:\n\nyour geopackage (*.gpkg) contains the complete set of model features and parameter values. Every time you change a model element, you will remember, you had to save the changes. So the GPKG file is always up to date.\nyour QGIS project is saved in the *.qgz file and contains all the added layers and their format (legend, line color, labels etc.).\n\nNow let’s experience what it is to close and open QGIS including your QGIS-Tim project.\n\nSave your QGIS session (Ctrl+S).\nSelect Project from the main menu and choose New.\nAgain select Project but now choose Open Recent and find your own project in the list.\nOpen the QGIS-Tim plugin with a click on .\n\nThe Tim panel is empty but why?  It is not possible for the plugin to read your geopackage as it is loaded in the layer list. To load your Tim project you must open the geopackage from the Tim panel. This will add the geopackage to the Layers panel next to the existing one with the same name, which makes it at least confusing. We better remove the original Geopackage first before opening it with Tim. Disadvantage is that we also remove the calculated results including all your formatting efforts. The developers try to fix that in the next version.  The following steps are the right way to go for now:\n\nSelect layer case-Rijsenhout input in the panel on the left in order to remove it.\nClick your right mouse button and select Remove Group… and click OK.\nIn the same way remove layer case-Rijsenhout output.\nIn the QGIS-Tim panel on the tab GeoPackage click Open and open the GPKG file containing your model.\nYour geopackage is now added to the Tim panel and the Layers list. Don’t forget to move down the background layer “pastel”."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-5-add-infiltration-of-drainwater",
    "href": "tutorial-QGIS-Tim.html#model-5-add-infiltration-of-drainwater",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 5: add infiltration of drainwater",
    "text": "Model 5: add infiltration of drainwater\nTo prevent damage on the private properties caused by the dewatering, the authorities demand 50% of the drained flux to be infiltrated. For the infiltration a horizontal well of 400 m is used. In Tim this element is called “Line Sink Ditch”. Let’s add this element just along the Aalsmeerderweg southeast of the project area.\n\nOn the tab Elements in QGIS-Tim click on the element “Line Sink Ditch”.\nGive the layer a name, e.g. “InfiltrationWell”.\n\nSee that layer “timml Line Sink Ditch:InfiltrationWell” is added to the timml sub-group in your geopackage with ‘line’ as geometry. For the transient sum a table with the same name is added to the ttim sub-group. Next step is to add the location of the well and its capacity.\n\nClick the *Measure Line” button () from the “Attributes Toolbar”.\nWith your left mouse button try to get an idea what a distance of 400 m. looks like. Close the window.\nSelect the layer “timml Line Sink Ditch:InfiltrationWell”.\nStart editing with the Toggle Editing Mode.\nUse the Add Line Feature button () to draw a 400 m line (click left to start, click right to close).\nFill these feature within the table: discharge = -1000 (negative abstraction is into the model), resistance = 1, width = 1, layer = 0! not NULL ;-). By default order = 4.\nClick OK.\nStop editing the layer, save your changes.\nRerun the model.\nAnalyse the results with the iMOD Cross Section widget. Your graph may look like Figure 7.\n\n\n\n\nFigure 7: Calculated head from the abstraction (left) to the infiltration (right)"
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-6-add-observation-points",
    "href": "tutorial-QGIS-Tim.html#model-6-add-observation-points",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 6: add observation points",
    "text": "Model 6: add observation points\nWe have the Value Tool and the Cross section tool to check for calculated values in the rasters. Besides that, Tim has the opportunity to add observation points automatically providing you with the calculated heads.\n\nOn the tab Elements in QGIS-Tim click on the element “Observation”.\nGive the layer a name, e.g. “Piezometers”.\nStart editing with the Toggle Editing Mode and use Add Point Feature button () to add 5 points in line with 1 really close to the dewatering well (see Figure 8).\nSave your changes and rerun the model.\n\n\n\n\nFigure 8: Observation locations (A-E) together with other Tim elements\n\n\nThe observed values are saved in a new layer under the existing group “case-Rijsenhout output” and sub group “vector”.\n\nIn this sub group select the layer “case-Rijsenhout-timml Observation:Piezometers” and check the calculated values within this layer by opening the Attribute Table (F6).\nClose the Attribute Table.\n\nOne way of displaying the calculated results is still missing: contour lines.\n\nIn QGIS-Tim go to the tab Compute.\nIn the section Contour select layer “case-Rijsenhout-head_layer_0”.\nDefine the contours from -9 to -5 with an increment of 0.10 and click Export contours.\n\nA layer with your contours is saved in the group “case-Rijsenhout-output:vector”. Your map hopefully looks like Figure 9. If not, try to change the contour settings and create a better contour map.\n\n\n\nFigure 9: Calculated heads, displayed as contour lines"
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-7-determine-the-influence-of-the-nearby-lake",
    "href": "tutorial-QGIS-Tim.html#model-7-determine-the-influence-of-the-nearby-lake",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 7: determine the influence of the nearby lake",
    "text": "Model 7: determine the influence of the nearby lake\nEast of the project area there is a large lake. What will be the influence of this lake? Let’s find out.  In Tim a lake is added as an inhomogeneity within the total model domain. This domain is described in table “timml Aquifer:Aquifer” we filled in with the first model.\n\nOn the tab Elements in QGIS-Tim click on the element “Polygon Semi-Confined Top”.\nGive the layer a name, e.g. “Lake” and find out that layer “timml Polygon Semi-Confined Top:Lake” is added to the geopackage.\nStart editing with the Toggle Editing Mode and use Add Polygon Feature button () to add the Lake contour.  NB Try to minimize the number of segments because each segment slows down the calculations. With QGIS it is tempting to use detail but the influence of detail on the outcome is small.\nFill the Lake feature with the following parameters: aquitard_c = 500, semiconf_top = -7 (bottom of the Lake) and semiconf_head = -2 (water level).\nSave your changes and rerun the model.\nAnalyse the results and perhaps create contour lines from the tab “Compute”.\n\n\n\n\nFigure 10: Contour lines after adding the Lake element in the east\n\n\nYou can not miss the effect of the Lake in this calculation. In many cases you like to analyse or even save this difference. Let’s see how we can use Tim and QGIS to isolate the effect. Therefor we rerun the model without the Lake and rename the output.\n\nIn QGIS-Tim go to the tab Geopackage.\nIn the list of Steady State elements switch off “timml Polygon Semi-Confined Top:Lake”.\nGo to the tab Compute.\nClick the button Set path as … and change the name of the output, e.g. “case-Rijsenhout-NoLake”.\nClick Compute to run the model without the Lake.\n\nThe new results are added as new layer to the project. Check for instance sub-group “raster” under the group “case-Rijsenhout output”. Now we use QGIS to calculate the head difference for layer 0. For raster calculations we prefer Raster Calculator over the Mesh Calculator in QGIS.\n\nFrom the QGIS main menu Raster select the tool Raster Calculator and the tool window opens.\nIn the section Raster Calculator Expression you can create an expression using the elements from Raster Bands and Operators. Create this expression: “case-Rijsenhout-head_layer_001 - case-Rijsenhout-NoLake-head_layer_001”.\nIn Output layer give a new name for this new GeoTIFF file, e.g. “head-effect-lake”.\nClick OK to start the calculation and see that the GeoTIFF file is added as a layer.\nIn the properties of layer “head-effect-lake” go to the section Symbology and set the Render type to “Singelband pseudocolor”.\nSee that the difference in head is maximum 3 meter.\nIn Geopackage check again the Lake element.\nIn Compute reset the path to the old name."
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#model-8-abstraction-effect-over-time",
    "href": "tutorial-QGIS-Tim.html#model-8-abstraction-effect-over-time",
    "title": "Tutorial QGIS-Tim",
    "section": "Model 8: Abstraction effect over time",
    "text": "Model 8: Abstraction effect over time\nNow you are ready for the last step: make your model transient. We keep it simple: we run the model for 30 days and see the increasing effect of the well.\n\nIn Compute within the output section change “steady state” into “transient”.\nGo to Geopackage and see that only 5 elements have a transient component.\n\nBy selecting the “transient” option, columns containing extra parameters necessary for a transient model have been unhidden now. First of all we see it in the layer “timml Aquifer:Aquifer” where columns “storage” and “porosity are visible now.\n\nIn your geopackage select the layer “timml Aquifer:Aquifer”.\nOpen its table, start the editing mode and for every layer set both acquifer_s and acquitard_s to 0.001. Acquitard_s (layer 0) = 0.25. You can use copy and paste to do it quickly.\n\nNB! In transient mode, Tim can not handle aquitard with zero thickness so let’s set the aquitard thickness to 0.1 m\n\nChange the values in the column “aquifer_top” to -17.0, -22.1, -27.1 and -47.1 m.\nIn your geopackage select the layer “ttim Temporal Settings:Aquifer” to define the temporal properties of the model.\nOpen its table, start the editing mode and add a new feature.\nMake sure that tmin=0.01, tmax=30, tstart=0, reference_date=2023-03-23 00:00:00.\nIn your geopackage select the layer “ttim Computation Times:Domain” in order to define the moments in time for which raster output is saved.\n\nOpen its table, start the editing mode and add 7 features / periods (click 7 times “Add feature”).\nIn the column “time” add the moments 1,2,5,10, 15, 20 and 30.\nSave and Close the table.\n\nFor the observations we can define a different set of output moments.\n\nIn your geopackage select the layer “ttim Observation:Piezometers”.\n\nOpen its table, start the editing mode and add 10 features / periods (click 10 times “Add feature”).\nIn the column “time” add the moments 1,2,3,4,5,10,15,20,25 and 30.\nSave and Close the table.\n\nSpecial attention for the Well package while it has 2 options to make it transient:\n\nSimple: a well can be switched on and off only once. Parameters are set in the stationary part of the model, so in “timml Well:DewateringWell”.\nDetailed: a well can be switched on and off multiple times within the modelled period. Parameters are set in the transient part of the model, so in “ttim Well:DewateringWell”.\n\nIn this training we show you the simple version.\n\nIn your geopackage select the layer “timml Well:DewateringWell”.\n\nOpen its table, start the editing mode and see that columns with time dependent parameters are visible now.\nSwitch off the Steady State abstraction, make discharge = 0.\nSwitch on the Transient abstraction: time_start = 2, time_end = 30, discharge_transient = 2000, caisson_radius = 1.\nSave your changes.\nCompute your transient model in the tab Compute.\n\nIn case of a successful calculation a new layer is added to your Vector output: case-Rijsenhout-ttim Observation:Piezometers. This layer contains transient data which is indicated with the clock icon right from the layer name. There are 2 ways to visualize these calculated heads in the observations point a) animation over time and b) timeseries at location.\n\nFor the animation over time, activate the Temporal Control Panel with the button  on the Map Navigation Toolbar.\nFor timeseries at location activate the Timeseries panel with the Timeseries button () on the iMOD Toolbar.\nBe sure that “case-Rijsenhout-ttim Observation:Piezometers” is checked and “case-Rijsenhout-timml Observation:Piezometers” is unchecked.\nIn the Temporal Controller panel click the green play button (). Navigation buttons appear.\nIncrease the Step to 16 hours and start the animation with a click on the Play button ().\n\nOnly the first few days you see most prominent drawdown. Let’s now display the timeseries at the point of your mouse with data from the mesh.\n\nGo to the iMOD Time Series panel.\nBe sure the layer “case-Rijsenhout-head_layer_0” is selected.\nFor “variable:” select head and for “layers:” select 0.\n\nClick the button Select Points, your mouse changes into a . Be sure Update on Selection is checked and hover over the mesh. The graph shows the timeseries at the location of your mouse.\nDeselect the checkbox Update on Selection.\nClick the button Select Points (your mouse becomes a  and with the left mouse button select 3 points ad random.\nFinally click the Plot button and the 3 timeseries are added to the chart. Colours can be changed.\n\nIn the same way you can display the time series from the Observations.\n\nIn the iMOD time series panel select the layer “case-Rijsenhout-ttim Observation:Piezometers”.\nFor “ID column:” select label and for “Variable:” select head_layer0. Don’t forget to deselect fid.\n\nClick the button Select Points and draw a box with your mouse to select one or more observation points.\nClick the Plot button and the selected timeseries are added to the chart. Colours can be changed.\n\n\n\n\nFigure 11: Calculated time series at observations locations"
  },
  {
    "objectID": "tutorial-QGIS-Tim.html#export-your-tim-model-to-python",
    "href": "tutorial-QGIS-Tim.html#export-your-tim-model-to-python",
    "title": "Tutorial QGIS-Tim",
    "section": "Export your Tim model to Python",
    "text": "Export your Tim model to Python\nFor scenario calculation or sensitivity analysis you probably want to switch from QGIS to Python for efficiency reasons. In this training we only show you the first step: export your model to a Python file (*.py). Your Tim model is just a set of elements (points, lines, polygons) and its parameters so the Python file is not very large.\n\nIn QGIS-Tim go to the tab GeoPackage.\nClick the button Convert GeoPackage to Python script and you can save the *.py file wherever you like.\nCheck the content of the file with you text editor (e.g. Notepad).\n\nThe tutorial ends here. You can save your QGIS project if you like. Thank you!"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "QGIS-Tim",
    "section": "",
    "text": "QGIS-Tim is an open source project for multi-layer groundwater flow simulations. QGIS-Tim provides a link between QGIS and the open source analytic element method software: TimML (steady-state) and TTim (transient).\nThe benefit of the analytic element method (AEM) is that no grid or time-stepping is required. Geohydrological features are represented by points, lines, and polygons. QGIS-Tim stores these features in a GeoPackage.\nQGIS-Tim consists of a “front-end” and a “back-end”. The front-end is a QGIS plugin that provides a limited graphical interface to setup model input, visualize, and analyze model input. The back-end is a Python package. It reads the contents of the GeoPackage and transforms it into a TimML or TTim model, computes a result, and writes it to a file that the QGIS plugin loads."
  }
]