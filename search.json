[
  {
    "objectID": "developer.html",
    "href": "developer.html",
    "title": "Developer Notes",
    "section": "",
    "text": "QGIS-Tim uses pixi to manage installing dependencies and run common tasks.\nFollow the instructions on the Getting Started page.\n\n\nTo build the TimML and TTim server application with PyInstaller, run pixi run build-backend\nThis creates a built PyInstaller application in ./dist/gistim.\nRun pixi run zip-backend to create a ZIP file of the PyInstaller application. Run pixi run zip-plugin to create a ZIP file of the QGIS plugin that can be installed in QGIS.\nTo test the created ZIP files: Install the QGIS from the ZIP file, start the QGIS plugin and try to install the ZIP file via the “Install TimML and TTim server” button."
  },
  {
    "objectID": "developer.html#pixi",
    "href": "developer.html#pixi",
    "title": "Developer Notes",
    "section": "",
    "text": "QGIS-Tim uses pixi to manage installing dependencies and run common tasks.\nFollow the instructions on the Getting Started page.\n\n\nTo build the TimML and TTim server application with PyInstaller, run pixi run build-backend\nThis creates a built PyInstaller application in ./dist/gistim.\nRun pixi run zip-backend to create a ZIP file of the PyInstaller application. Run pixi run zip-plugin to create a ZIP file of the QGIS plugin that can be installed in QGIS.\nTo test the created ZIP files: Install the QGIS from the ZIP file, start the QGIS plugin and try to install the ZIP file via the “Install TimML and TTim server” button."
  },
  {
    "objectID": "developer.html#creating-new-release",
    "href": "developer.html#creating-new-release",
    "title": "Developer Notes",
    "section": "Creating new release",
    "text": "Creating new release\n\nMake a GitHub release\nTo create a new release:\n\nGo to the QGIS-Tim releases page\nClick on the “Draft a new release” button.\nCreate a new tag.\nWrite a title and description.\nPublish the release.\nPyInstaller applications will now be automatically built.\n\nGitHub actions have been defined to automatically build PyInstaller applications on Windows, macOS, and Linux; and to create a ZIP file of the QGIS plugin. These run automatically when a new tag is defined. The defined workflows will upload their files to an existing release. This means tags should only be created via the GitHub “Draft a new release” functionality, or no release will be available to upload to.\n\n\nUpload the plugin to the QGIS respository\nLogin to the QGIS plugin repository and upload the ZIP file of the QGIS plugin."
  },
  {
    "objectID": "install.html",
    "href": "install.html",
    "title": "Install",
    "section": "",
    "text": "QGIS-Tim consists of two parts: A QGIS plugin and the gistim Python package, which runs in a separate Python environment. The installation of QGIS-Tim therfore consists of three steps:"
  },
  {
    "objectID": "install.html#install-qgis",
    "href": "install.html#install-qgis",
    "title": "Install",
    "section": "1. Install QGIS",
    "text": "1. Install QGIS\nDownload and install a recent version of QGIS (&gt;=3.28): https://www.qgis.org/en/site/forusers/download.html"
  },
  {
    "objectID": "install.html#install-the-qgis-plugin",
    "href": "install.html#install-the-qgis-plugin",
    "title": "Install",
    "section": "2. Install the QGIS plugin",
    "text": "2. Install the QGIS plugin\n\nMethod A: From the QGIS plugin database (recommended)\n\nOpen QGIS.\nAt the top, find the Plugins menu (~sixth object in the menubar).\nFind \"Manage and Install plugins\" (~first object in drop-down).\nFind \"All\" (~first in left section).\nSearch for \"Qgis-Tim\".\nClick \"Install Plugin\".\n\n\n\nMethod B: From ZIP file\n\nDownload the \"QGIS-Tim-plugin.zip\" from the GitHub Releases page (do not unzip!).\nOpen QGIS.\nAt the top, find the Plugins menu (~sixth object in the menubar).\nFind \"Manage and Install plugins\" (~first object in drop-down).\nFind \"Install from ZIP\" (~fourth in left section).\nEnter the path to the file \"QGIS-TIM-plugin.zip\".\nClick \"Install Plugin\".\n\nThis will add an icon to the toolbar(s). \nBy clicking the icon, the plugin is started."
  },
  {
    "objectID": "install.html#install-the-timml-and-ttim-server",
    "href": "install.html#install-the-timml-and-ttim-server",
    "title": "Install",
    "section": "3. Install the TimML and TTim server",
    "text": "3. Install the TimML and TTim server\nWith the plugin installed, we can already define model input and convert it to Python scripts or JSON files. To run TimML and TTim computations directly from QGIS, we need to install a server program which contains TimML and TTim.\n\nMethod A: Install from GitHub (requires internet connection)\n\nStart the QGIS-Tim plugin by clicking the QGIS-Tim icon in the toolbar.\nFind and click the “Install TimML and TTim server” button at the bottom of the plugin window.\nClick the “Install latest release from GitHub” button to download and install the server program.\n\n\n\nMethod B: Install from ZIP file\nSpecific releases can also be manually downloaded from the GitHub Releases page:\n\nDownload the gistim ZIP file for your platform: Windows, macOS, or Linux.\nStart the QGIS-Tim plugin by clicking the QGIS-Tim icon in the toolbar.\nFind and click the “Install TimML and TTim server” button at the bottom of the plugin window.\nSet the path to the downloaded ZIP file in the “Install from ZIP file” section.\nClick the “Install” button."
  },
  {
    "objectID": "tutorial_TheHague.html",
    "href": "tutorial_TheHague.html",
    "title": "Building Pit The Hague",
    "section": "",
    "text": "Be sure QGIS version 3.22.00 or higher is installed.\nBe sure the gistim Python package is installed (see installation for instructions).\nDownload the tutorial material. Follow this link.\nInstallation of the QGIS-Tim plugin and the MOD plugin is part of this Tutorial. The necessary ZIP files are included in the tutorial material.\nInternet connections is optional during this Tutorial. It is only required for installation of additional plugins and the use of an online topographic background map."
  },
  {
    "objectID": "tutorial_TheHague.html#requirements",
    "href": "tutorial_TheHague.html#requirements",
    "title": "Building Pit The Hague",
    "section": "",
    "text": "Be sure QGIS version 3.22.00 or higher is installed.\nBe sure the gistim Python package is installed (see installation for instructions).\nDownload the tutorial material. Follow this link.\nInstallation of the QGIS-Tim plugin and the MOD plugin is part of this Tutorial. The necessary ZIP files are included in the tutorial material.\nInternet connections is optional during this Tutorial. It is only required for installation of additional plugins and the use of an online topographic background map."
  },
  {
    "objectID": "tutorial_TheHague.html#description",
    "href": "tutorial_TheHague.html#description",
    "title": "Building Pit The Hague",
    "section": "Description",
    "text": "Description\nIn this tutorial, you will learn how to:\n\ninstall and use the QGIS-Tim plugin;\nuse the basic of QGIS for pre- and postprocessing of Tim;\ncreate several steady state models (TimML) and a transient model (TTim);\nanalyse the results;\nexport your model to a Python script."
  },
  {
    "objectID": "tutorial_TheHague.html#objective",
    "href": "tutorial_TheHague.html#objective",
    "title": "Building Pit The Hague",
    "section": "Objective",
    "text": "Objective\nCalculation of a pumping well extraction."
  },
  {
    "objectID": "tutorial_TheHague.html#introduction-case-the-hague",
    "href": "tutorial_TheHague.html#introduction-case-the-hague",
    "title": "Building Pit The Hague",
    "section": "Introduction case The Hague",
    "text": "Introduction case The Hague\nIn the old city centre of The Hague a building plan with a parking basement is constructed. The dimensions of the building pit are 34.2 m * 83.2 m. The area is shown in Figure 1.\n\n\n\nFigure 1: Schematization of the building area in The Hague city centre (orange: building pit)\n\n\nTo carry out the construction in dry conditions, the groundwater level needs to be lowered by 3.5 m. The required drainage time is 4 months.  The environment is vulnerable with valuable buildings and monuments (see Figure 2) that have a shallow foundation. The subsoil consists of sandy layers which locally contain shallow peat/clay/silt layers and deeper layers of clay/silt. The builder contractor must use a sheet pile wall that needs to be installed in a water-retarding layer (aquitard).\n\n\n\nFigure 2: The monumental environment\n\n\nThe questions to be elaborated in the hydrogeological advice is:  “How deep should a sheet pile wall be placed to prevent damage? Can risks arise from a leak?”\nApplications of a sheet pile wall (with a hydraulic resistance of 100 days) and a concrete cut off wall (with a hydraulic resistance of 1000 days) need to be studied.\nThe soil profile has been investigated with borings and CPTs. An example of a CPT is shown in Figure 3.\n\n\n\nFigure 3: CPT to a depth of NAP -20 m\n\n\nThe interpretation of the CPT and borings gives the following soil layer scheme:\n\nThe soil mainly consists of fine sand in Holocene layers (max depth NAP -15 m) and coarse sand in deeper Pleistocene layers.\nJust below the groundwater level (NAP -0.5 m), there is an approximately 1.5 m thick peat/clay/silt layer (not in CPT).\nThe layer between NAP –5.5 m and –8.5 m consists of clay lenses. There is little certainty about the resistance of that layer.\nBetween NAP –13 m and –15 m there is a clay/silt layer.\n\nBased on experience in this region, the following geohydrological schematization is known (Table 1). The layer depth is indicated relative to the groundwater level of NAP-0.5m, because only that part is relevant for our model. In Table 1 c = vertical hydraulic resistance, k= horizontal permeability, S’= specific storage: :\n\n\n\n\nTable 1: Geohydrological model of the subsoil\n\n\nCluster\nLayer type\nLayer Bottom\nc\nk\nS’\n\n\n\n\n\n\n[m-REF]\n[days]\n[m/day]\n[1/m]\n\n\n1\nAquitard\n-1\n3000\n\n0.01\n\n\n\nAquifer\n-5\n\n10\n0.00025\n\n\n2\nAquitard\n-8\n40\n\n0.0002\n\n\n\nAquifer\n-13\n\n10\n0.00005\n\n\n3\nAquitard\n-15\n100\n\n0.001\n\n\n\nAquifer\n-60\n\n25\n0.00001\n\n\n\n\nAccording to DINO loket the average groundwater level on site is NAP -0.5 m. There are strict demands from authorities for allowable groundwater lowering. The maximum allowed drawdown outside the construction pit is 0.1 m.  To perform the calculation, dewatering is schematized to 8 wells. Tip: Don’t place the wells in the model too close to the sheet piles. \nTasks:\n\nWhich element from the Tim package would you use to place the wells and sheet piles?\nDo you need to install sheet piles deep (in sand layers of aquifer 1 and 2) or shallow (only in the first sand layer of aquifer 1)?\nInvestigate the effect of the presence of a lower or higher hydraulic resistance in the layer between NAP -5.5 m and -8.5 m.\nEstimate the extraction rate to keep the building pit dry.\nWhat are the risks? Look at the groundwater drawdown outside the construction pit in situations with different sheet pile depth.\nAlso check for point leaks. Model these leaks with a hole in the sheet pile in the southwest corner of the area."
  },
  {
    "objectID": "tutorial_TheHague.html#getting-started",
    "href": "tutorial_TheHague.html#getting-started",
    "title": "Building Pit The Hague",
    "section": "Getting Started",
    "text": "Getting Started\nLet’s first configure the gistim python installation again, to be sure that QGIS can find the gistim software.\n\nOpen the Deltaforge prompt (search in Windows Start for “Deltaforge Prompt”). A black window pops up.\nIn this window type python -m gistim configure and press ENTER.\nYou can close this window now.\nLaunch QGIS from your START menu, from your desktop or click on …\\QGIS3.28.0\\bin\\qgis-bin.exe.\n\n\nIntermezzo: QGIS language settings\nPerhaps your QGIS was installed in another language than English. Because the Tutorial refers to the English version, let’s change to English.\n\nFrom the main menu click on Settings and select Options (e.g. in Dutch Extra and Opties).\nIn the new window go to the General section (Dutch: Algemeen) on the left.\nCheck the box to allow Override System Locale (Dutch: Landinstellingen negeren) and expand this sub menu.\nFrom the drop-down menu “User interface translation” (Dutch: Vertaling gebruikers-interface) select American English and click OK.\nClose QGIS and open it again to activate your language change.\n\n\nWe start with the creation of a new QGIS project.\n\nFrom the main menu click on Project and select New.\n\nThe case in this tutorial is located in The Netherlands, so next we select the appropriate projection.\n\nFrom the main menu click on Project and select Properties.\nIn the Properties window select the category CRS, search for “EPSG:28992” and you find “Amersfoort / RD New”. Select this option and click the Apply button, followed by the OK button to close the window.\n\n\nIn case your work is mostly in The Netherlands and in the “Amersfoort / RD New” projection, consider making this your default projection.\n\nFrom the main menu click on Settings and select Options….\nIn the section CRS and Transforms select CRS (handling), pick the radio button Use a default CRS and select “EPSG:28992 -Amersfoort / RD New”.\nClick OK.\nClose this window.\n\n\n\nInstall plugins\nThis is the moment to download/import four plugins needed for this tutorial. This is the list:\n\nthe QGIS-Tim plugin. The development version, imported from a ZIP file.\nthe iMOD plugin. The development version, imported from a ZIP file.\nthe Value Tool. The official version, installed via the Plugin Manager of QGIS (internet connection required).\nthe PDOK plugin. The official version, installed via the Plugin Manager of QGIS (internet connection required). This plugin gives access to a large database from which we will load the topographic maps and use the navigation option.\n\n\nGo to Plugins from the main menu and select Manage and Install Plugins… to open the plugin window.\nOn the left section select Install from ZIP.\nClick the Browse button () and from the tutorial dataset select the ZIP file “QGIS-Tim_Tutorial-TheHague\\QGIS-iMOD-plugin.zip”.\nClick Install Plugin.\nIn the same way, install the QGIS-Tim plugin using the ZIP file “QGIS-Tim_Tutorial-TheHague\\QGIS-Tim-plugin.zip”.\n\nIf you have an internet connection continue with the installation of the next two plugins from the QGIS plugin library.\n\nFrom the left section, select the group All to see all available plugins.\nSearch for “Value Tool” and install it.\nSearch for “PDOK services plugin” and install it.\nMake sure that under Plugins &gt; Manage and Install Plugins &gt; Installed now the 4 added plugins are checked.\nClose the Plugins window.\n\nSee in the toolbar section of QGIS that the plugins are installed:\n\niMOD Toolbar \nQGIS-Tim \nValue Tool \nPDOK Services Plugin \n\nFurther in this Tutorial we will use some default toolbars that might be hidden at the moment. Let’s check that and unhide if necessary.\n\nSelect View from the main menu and choose Panels and be sure these two toolbars are checked:  - Layers  - Browser.\nSelect View from the main menu and choose Toolbars and be sure these three toolbars are checked:  - Advanced Digitizing Toolbar  - Snapping Toolbar  - Attributes Toolbar.\n\n\n\nPrepare your project\nFor navigation purposes, let’s load a topographic map for The Netherlands from the online PDOK database.\n\nNo internet connection? Follow the next steps to import a simple PNG file as a background.\n\nGo to Layer in the main menu, go to Add layer and select Add Raster layer.\nUse the Browse button () and from the tutorial material select “…\\QGIS-Tim_Tutorial-TheHague\\TopographicMapTheHague.png”.\nClick on Add and Close the window.\nIf you do not see the map, select the layer “TopographicMapTheHague”, click your right mouse button and select “Zoom to Layer(s)”.\nContinue after step 26.\n\n\n\nIf you do have an internet connection click on the PDOK plugin button () to open the “PDOK Services Plugin” window.\nFrom the tab PDOK Services search for “pastel” and you will find a WMTS type layer called “BRT Achtergrondkaart WMTS”.\nSelect the layer.\nIn the section “laag toevoegen” click the button Onder.\nClose the PDOK window.\n\nOur project area is in the centre of the city of The Hague so let’s navigate to that city using the PDOK plugin.\n\nType “Parkstraat” in the PDOK search field, near the PDOK button ()\nOne of the locations PDOK will find is “Parkstraat, ’s-Gravenhage”. Click on it and QGIS will fly you to the project location.\n\nLet’s now open a shape file containing the circumference of the building location.\n\nGo to Layer in the main menu, go to Add layer and select Add Vector layer.\nUse the Browse button () and from the tutorial material select “…\\QGIS-Tim_Tutorial-TheHague\\building_pit.shp”.\nClick on Add and Close the window.\n\n Tip: a fast alternative for adding layers: from the menu View &gt; Toolbar add the Manage Layers Toolbar and use the button .\n\nIn the Layers panel on the left, select the layer “building_pit”.\nClick your right mouse button and from the menu select Properties.\nIn the new window go to the section Symbology on the left and try to pick a polygon style with only a contour color.\nClick on OK a to save and close the window.\n\nLet’s save this project to be able to return to it later or in case of a crash of QGIS.\n\nGo to Project in the main menu, select Save As and select a folder and a file name for your project, e.g. “…\\QGIS-Tim_Tutorial-TheHague\\TheHague.qgz”\n\n\n\nOpen the QGIS-Tim panel\nNow we are ready to activate the QGIS-Tim plugin.\n\nClick on the QGIS-Tim plugin button () and the QGIS-Tim panel appears.\nGo to the tab GeoPackage.  Here we will create an empty database (geopackage) to store all elements and parameters for the model.\nClick the New button to create the GeoPackage and save it for instance in the folder with your tutorial data, e.g. “..\\QGIS-Tim_Tutorial-TheHague\\case-TheHague.gpkg”.\n\nYour window looks like in Figure 4.\n\n\n\nFigure 4: QGIS-Tim panel\n\n\n\nCheck in the Layers panel on the left that your new geopackage is added as a group.  A sub group timml for the steady state model input, the sub group ttim for the transient model input and a series of output formats (vector/mesh/raster).\n\nIf you had no introduction to the Tim plugin, read the Intermezzo below for a general explanation of the components.\n\nIntermezzo: introduction Tabs on the Tim panel\n\nGeoPackage: an overview of the elements in your geopackage. In case you switch to transient modelling, an extra column with ttim elements is added.\nElements: a list of 14 Tim elements from which you can build your model.\nCompute: here you can define your domain and cell size, decide if your model is transient or not and change the output name.\nExtract: open an existing 3d geohydrological model (NC file) and extract the data for your project area.\n\n\nLet’s save this project to be able to return to it later or in case of a crash of QGIS.\n\nGo to Project in the main menu, select Save As and select a folder and a file name for your project, e.g. “…\\QGIS-Tim_Tutorial-TheHague\\TheHague.qgz”"
  },
  {
    "objectID": "tutorial_TheHague.html#checking-available-data-from-lhm",
    "href": "tutorial_TheHague.html#checking-available-data-from-lhm",
    "title": "Building Pit The Hague",
    "section": "Checking available data from LHM",
    "text": "Checking available data from LHM\nWe will now research what possible layer info is available from the LHM database (Landelijk hydrologisch model). Information from LHM is made available in the provided file “…\\QGIS-Tim_Tutorial-TheHague\\LHM4.1-ondergrondmodel.nc”. The file contains rasterdata of both the 3D geological layering within The Netherlands and the corresponding geological parameterization (permeability, resistance, thickness).\n\nIn the QGIS-Tim panel go to the Extract tab.\nOpen the file “..\\QGIS-Tim_Tutorial-TheHague\\LHM4.1-ondergrondmodel.nc” (this may take a minute because the file is 350 MB).\nClick the button Select by Polygon and draw a large polygon (&gt; 250x250m) to select the area around the building location between Parkstraat and Oranjestraat (see Figure 1). Left-click several times and close the polygon with a right click.\nThen click the Extract button and save the extracted subsoil data to a CSV file, e.g. “Ex2DH.csv”.\nA separate python window is opened and the selection is performed. You can follow the progress in your tool bar. There is no message indicating the process has ended. Just ignore the black screen and continue with the next step.\n\n\n  QGIS displays this error message in case your polygon is too small. In that case redraw your polygon for a larger area.\n\nAutomatically 2 CSV files will be created. One with average values for bottom and top of layers and aquifer permeabilities and aquitard resistances. The other contains statistics on the data.\n\nFrom a file manager on your laptop (e.g. Explorer) open the CSV files.\n\nAn example of values from the first CSV are presented in Table 2. In each LHM layer the Aquitard information is positioned on top of Aquifer.\n\n\nTable 2: The characteristics of the subsoil based on LHM data (example, your values may differ)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfid  -\nlayer  -\naquitard  c\naquitard  npor\naquitard  s\naquifer  k\naquifer  npor\naquifer  s\naquifer  top\naquifer  bottom\nsemiconf  top\nsemiconf  head\n\n\n\n\n0\n0\n\n\n\n\n\n\n\n\n\n\n\n\n1\n1\n287\n\n\n62.37\n\n\n-18.97\n-38.30\n\n\n\n\n2\n2\n1\n\n\n37.94\n\n\n-38.30\n-60.54\n\n\n\n\n3\n3\n3056\n\n\n13.21\n\n\n-66.62\n-77.50\n\n\n\n\n4\n4\n708\n\n\n9.25\n\n\n-84.59\n-88.38\n\n\n\n\n5\n5\n3143\n\n\n10.94\n\n\n-106.06\n-120.63\n\n\n\n\n6\n6\n8092\n\n\n5.68\n\n\n-151.11\n-254.94\n\n\n\n\n7\n7\n17752\n\n\n3.10\n\n\n-307.82\n-390.71\n\n\n\n\n\n\nA choice should be made at which depth the hydrogeological base is chosen for this project. Where high aquifer k is followed by a large aquifer c the base is chosen. For this case the base is chosen at -60.5 m (all depth data in Table 2 are m NAP). As you can see, values for Holocene layers are not available here and thus not displayed in LHM results.  Aquitard resistance in the city is quite high, so a value of 3000 days is best guess from experience.  For marine deposits at -12 a value of 50 to 100 days per meter layer thickness is a proper choice. The permeability of fine Holocene sand is chosen at 10 m/d."
  },
  {
    "objectID": "tutorial_TheHague.html#start-your-tim-model",
    "href": "tutorial_TheHague.html#start-your-tim-model",
    "title": "Building Pit The Hague",
    "section": "Start your Tim model",
    "text": "Start your Tim model\nWe are now ready to define our first steady state model by parameterizing our Aquifer.\n\nFrom the Layers panel, select the layer timml Aquifer:Aquifer.\nClick your right mouse button and from the menu select Open Attribute table (). Search for the same icon somewhere on the Attributes Toolbar.\nSwitch to the editing mode in the table with a click on () Toggle Editing.\nThen by clicking 3 times on () Add feature you will see new rows are added.\nNow you are able to fill in the desired values shown in Figure 5.  NB! Do not fill in column FID. ‘Autogenerate’ will take care.\n\n\n\n\nFigure 5: The characteristics of the aquifer\n\n\nNB! Closing this table window with the  will not save the filled in data or stop the editing mode!\n\nClick on the Save-Edits button () to save you data during the process or click on the Toggle Editing Mode button () to stop edditing and QGIS askes you if your changes should be saved.\nNow you can close the Attribute Table window.\n\nIn the QGIS-Tim Window we now introduce the following elements for ground water modelling in the QGIS-Tim tab Element:\n\nLeaky Line Doublet\nWell\n\n\nAdding a Leaky Line Doublet\n\nIn the QGIS-Tim window go to tab Elements and select the button Leaky Line Doublet.\nFill in the name of the layer in the pop-up panel, e.g. ‘sheet_pile’, and click OK and this new Layer is added to the Layers panel.\n\nFirst, we will draw the location of the sheet pile before adding the parameter values.\n\nIn the Layers panel right click on the layer  timml Leaky Line Doublet:sheet_pile and start the editing mode by clicking the Toggle Editing button ().\n\nTwo important remarks before drawing the sheet pile:\n\nStart drawing at the most southern corner of the building pit to make a variation for an extra purpose later on in this tutorial.\nIn order to make a closed area surrounded with the sheet piles, the first and last point must have the same coordinate and intersect. For this we must activate the Snapping option in QGIS.\n\n\nIn the main menu go to Project and select Snapping Options...\nFrom the new toolbar (see Figure 6), click on the Enable Snapping button ().\n\n\n\n\nFigure 6: Switching on snapping options\n\n\n\nThen select the Add line feature icon () to start the drawing of the sheet pile.\nDraw the sheet pile around the building pit (start south corner) with your left mouse button and close the feature on the first point.\nIn the pop-up window fill in the resistance (1000 d, see * below) and layer number (layer=0, see ** below) as in Figure 7 and click OK to close the window.\n\n\n\n\nFigure 7: The characteristics of the Leaky line doublet\n\n\n\nRemarks to the provided values:  * Because of a known issue in the TimML software, until this issue is resolved, the value of the resistance must be multiplied by the permeability. For normal sheet pile walls a resistance value of 100-250 d for interlock leakage is a good choice. In this case the chosen value needs to be increased by multiplying with the applicable aquifer permeability in the effected layer (R=100 d becomes R=10*100 d).  ** In the real-world counting starts with 1. However, Tim is programmed in Python and in Python counting starts with 0. You will get used to it.\n\n\nClose the editing mode with a click on () and you are asked to save your changes.\nOpen the attribute table for Leaky Line Doublet (click  or press F6) to check hydraulic resistance values for the sheet pile walls.\n\n\n\nAdding a Well\n\nIn GIS-Tim go to the tab Elements and select the Well element.\nA name for the element can be given in the pop-up panel, e.g. pumping_wells.\nIn the Layers panel right click on the layer  timml Well:pumping_wells and start the editing mode by clicking the Toggle Editing button ().\nNext click on Add point feature ().\nWith you left mouse button add the first well location similar to point 1 in Figure 8.\nIn the pop-up window, fill in the well parameters discharge (50 m3/d), radius (0.1 m), resistance (1 d) and layer (0).\nNow add the other 7 wells locations in a fast way: do not import parameters with every single point. We will do that later. Just click OK on each Feature Attribute window.\n\n\n\n\nFigure 8: Schematization of the pumping wells, sheet piles and observation locations\n\n\n\nIn the Layers panel right select layer timml Well:pumping_wells and open the Attribute Table (F6).\nStart the editing mode and fill in the values shown in Figure 9. Don’t forget the column ‘Label’.  The discharge value in the table is a first guess to be adjusted later to desired level of -3.5 m groundwater lowering in the building pit.\nStop the editing mode, save your work and close the window.\nSelect layer timml Well:pumping_wells again, click right and from the menu select Show labels.\n\n\n\n\nFigure 9: Well properties\n\n\nWhen you finished the input of the wells and their parameters, you have to look back to the combination of wells and sheet pile wall. The reason is that near a well the flow is strong and therefore the flow through the wall is increased. This may lead to extremities in the calculation if wall segments are chosen too large. Tim uses control points but they are set at regular distances on the doublet (the number of control points is 1+order). It is necessary to divide the wall in smaller sections near well locations. The length of each section should be chosen equal to approximately the distance of the wall to the nearest well.\n\nSelect the Leaky Line Doublet in the Layers panel and start the editing mode.\nActivate the Vertex Tool () and then hoover along the sheet pile line in your drawing. The line element near your pointer lights up.\nWith the combination of Shift + double left click, you can add a new vertex to the line. Repeat that for the number of points you want to add.\n\nFigure 10 shows the result of positioned extra points in the line.\n\n\n\nFigure 10: Extra points for segmentation of the sheet pile element"
  },
  {
    "objectID": "tutorial_TheHague.html#computing-the-groundwater-head-drawdown",
    "href": "tutorial_TheHague.html#computing-the-groundwater-head-drawdown",
    "title": "Building Pit The Hague",
    "section": "Computing the groundwater head drawdown",
    "text": "Computing the groundwater head drawdown\n\nZoom in or out to desired domain for which you want to see the model results.\nIn the QGIS-Tim panel select the tab Compute.\nSelect the button Set to current extent to define the Domain.\nGrid spacing will follow automatically but for now make the results mesh more dense by changing “Grid spacing” to 3.00 m.\nIn the “Output” section give the name of the file where you want to store the results.\nFor contouring, select the check box “Auto-generate contours”.\nSet the increment for contouring to a proper value: 0.5, 0.25 or 0.1 as applicable for your study.\nPress the Compute button to have the program perform the calculations.\n\nA black Python.exe window pops up indicating that the TIM calculation started on the background. You can ignore this window but keep it open. Of course you van minimize it. If the calculation was completed successful, you will see this echo in QGIS. ."
  },
  {
    "objectID": "tutorial_TheHague.html#studying-output-results",
    "href": "tutorial_TheHague.html#studying-output-results",
    "title": "Building Pit The Hague",
    "section": "Studying output results",
    "text": "Studying output results\nAfter the calculation you see that the result is automatically added to the Layers panel, probably called “case-TheHague output”. Results are presented as Mesh, Raster and Vector data. Contours are saved as vector.  Although these layers / groups are checked, the data is not visible. That is because the geopackage was added last, and QGIS adds layers at the end of the list.  Let’s move the layer “pastel” to the background.\n\nSelect the layer “pastel” and drag it with your left mouse button to the bottom of the list of layers.\nUncheck mesh and raster to only visualize contours on the base map.\nUncheck contour lines of layer 1 and 2 to get only the result for layer 0 on screen as in Figure 11.\n\n\n\n\nFigure 11: Updated results of groundwater head lowering contours due to 8 wells 50 m3/d and a sheet pile wall with 100 d wall resistance.\n\n\nThe lowering in the building pit is shown to be around -6.20 m. To get it around -3.50 m as demanded, the well discharge should be decreased accordingly. An extra calculation with half the flow per well will be sufficient.\n\nGo to the well attribute table, adjust the flow to 60% (30 m3/d per well) and compute the model again.\n\n\nAdding observations wells\nThe city authorities that perform quality checks on the effect of construction projects insisted on the installation of some piezometers to assure reduction of risks for surrounding old monumental structures.\n\nIn the QGIS-Tim panel go to the Elements tab and select the element Observation.\nGive a name in the pop-up panel, e.g. “observations”.\nThen go to the Layers panel and select the layer timml Observation:observations.\nGo to the toolbar with drawing options and activate Toggle editing ().\nGo right to the Add point feature () and drop some piezometers in the drawing.  We propose to use 5 points (see Figure 8): 1 point in the centre of the building pit, 1 near the lower corner outside, 1 outside near the middle of the eastern sheet pile section and just 2 near street corners.\nCompute the model again.\n\nResults of calculations at the observation locations are presented as Vector data in the Layers panel.\n\nUncheck/check layers in order to display observation results only.\n\nBy default, the label at each observation location is the calculated head for layer 0. Perhaps you see a second number near the location. For your information: this is the “location number” label belonging to the model input in layer timml Observation:observations.\nWe can observe that the lowering of groundwater around the building pit is quite high due to leakage of the sheet piles or leakage through the bottom clay layer with small resistance. Therefore, it is needed to improve the wall quality or the length. First we check the effect of the clay layer by studying a cross section.\n\n\nCreating a cross section\n\nTo make a cross section, use the iMOD plugin toolbar and click on the Cross Section widget ()\nFrom the dropdown menu on the left of this panel, select the mesh () with *_layer_0.\nPress Add.\nStart to define your cross section with a click on the button Select location.\nDraw your cross section by left clicking on the map. Stop drawing with a right click. You can redraw this line anytime you like.\nSatisfied with your line? Click the button Plot to draw this layer in the cross section. Your screen might look like Figure 12.\nBy using the Export button you can store results from the cross section in a CSV file.\n\n\n\n\nFigure 12: Cross section of groundwater heads per layer, sheet pile wall R=100d and 8 wells at 30 m3/d each in layer0"
  },
  {
    "objectID": "tutorial_TheHague.html#making-calculations-with-parameter-variations-or-checking-bandwidth",
    "href": "tutorial_TheHague.html#making-calculations-with-parameter-variations-or-checking-bandwidth",
    "title": "Building Pit The Hague",
    "section": "Making calculations with parameter variations or checking bandwidth",
    "text": "Making calculations with parameter variations or checking bandwidth\nThe authorities demand a drawdown effect of dewatering at a maximum of 0.10 m at surrounding buildings. This means that improvements for leakage control are needed but first we need to discover what parameter to focus on.\nTo check whether the wall resistance or the bottom resistance of the layer 1 (below the building pit) is more important we can make 2 variations; one with C-clay=200 d and one with R-wall=500 d.  Of course you can change your model input, rerun the model and overwrite your model results. The next steps show you how to change the model input and save the results in separate .gpkg and .nc files.\n\nIn the input group select layer timml Aquifer:…\nOpen the Attrribute Table (F6) and change the value for “aquitard_c” in layer 1 into 200 d.\nIn the QGIS-Tim panel go to the tab Compute and change the name of the output, e.g. case-TheHague_v1.\nClick Compute to run variant 1.\n\nCheck in the Layers panel and see that the results are not overwritten but added to the groups, e.g. layer case-TheHague_v1-timml Observation:observations is added to the group Vector.\n\nFill in your calculated heads at the observation locations in Table 4 or use Excel.\n\n\n\nTable 3: Table: calculated heads [m] in observation points for 2 variants compared to the initial situations. Your values will differ.\n\n\n\n\n\n\n\n\n\n\n\nObservation location\nDefault:Cc=40dRw=100d*\n  your value:\nVariant 1:Cc=200dRw=100d*\nyour value:\nVariant 2:Cc=40dRw=500d*\nyour value:\n\n\n\n\nPb1 centre pit\n-3.95\n…\n-10.44\n…\n-4.00\n…\n\n\nPb2 south corner\n-0.43\n…\n-0.54\n…\n-0.35\n…\n\n\nPb3 street corner\n-0.35\n…\n-0.43\n…\n-0.31\n…\n\n\nPb4 south point\n-0.29\n…\n-0.32\n…\n-0.25\n…\n\n\nPb5 east wall\n-0.51\n…\n-0.70\n…\n-0.41\n…\n\n\n\n\n* Known issue in TimML: you have to multiply Rw by layer permeability (Rw*10).\nLet’s now run Variant 2.\n\nIn layer timml Aquifer:… reset the value for “aquitard_c” in layer 1 to the default of 40 d.\nIn layer timml Leaky Line Doublet:… change the value for “resistance” into 5000 d (500x10).\nIn the QGIS-Tim panel go to the tab Compute and change the name of the output, e.g. case-TheHague_v2.\nClick Compute to run variant 2.\nFill in your calculated heads at the observation locations in the table above.\n\nTo get the same lowering in the building pit, in the second variation the well flow might be reduced to 33% (10m3/d per well). For the sheet pile wall, increasing the wall quality or decreasing interlock leakage doesn’t make a big difference.  We can conclude that the best investment during the phase of design would be to perform extra hydrogeological research, e.g. by making more cpt’s, borings or performing a pumping test."
  },
  {
    "objectID": "tutorial_TheHague.html#sheet-piles-with-extra-depth",
    "href": "tutorial_TheHague.html#sheet-piles-with-extra-depth",
    "title": "Building Pit The Hague",
    "section": "Sheet piles with extra depth",
    "text": "Sheet piles with extra depth\nSuppose the best guess value of the clay layer resistance was right, then a mitigation measure for the effect of dewatering in the construction phase could be the installation of the wall to a deeper level where additional hydraulic resistance of 100d can be found at a depth of -13 m to -15 m NAP.\nIf we want to create extra depth of the sheet pile we will have to introduce it in a deeper layer. There are 2 options to implement it in your model:\n\nAdd a copy of the geometry of the sheet pile wall to the existing Leaky Line Doublet shape and assign it to layer 1.\nWe recommend to create an extra Leaky Line Doublet element. In this case it is more easy to switch on/off this additional element in your sensitivity analysis.\n\nHow to copy the sheet pile wall to an extra Leaky Line Doublet element?\n\nIn the QGIS-Tim panel go to the tab Elements and add a second Leaky Line Doublet and give it a name, e.g. “sheet_pile_L1”\nGo to the tab GeoPackage and see that the element separately is added to the list. Here is can switch this element on / off for a calculation.\nIn the Layers panel select the new layer timml Leaky Line Doublet:sheet_pile_l1.\nOpen its Attribute Table (F6) and start the editing mode. The table is empty.\nAlso open the Attribute Table of the first Leaky Line Doublet and select the existing element.\nClick on the Copy button () in the source table to copy the selected row to the clipboard.\n\n\n\nIn the target table, paste it with the Paste button () as a new layer.\nAssign this new sheet pile to layer=1.\nStop editing and save the new element.\nClick Compute to start the computation again.\n\nThe results are directly visible in the contours and cross-section again.  We can conclude that the drawdown in the building pit increases with a factor of almost 2 (-7.48 m at the centre of the building pit). Therefore, we adjust the well flow to 3.95/7.48*30=15.54 m3/d per well.\n\nImplement this change in the timm Well element and recalculate the model.\n\n\n\n\nFigure 13: Cross section of groundwater heads per layer, sheet pile wall R=500d in layers 0 and 1 and 8 wells at 15.25 m3/d each in layer0\n\n\nWe conclude that the drawdown of groundwater level around the building pit with deep sheet piles decreased significantly.\nNext also alternatives with a shallow concrete cut-off wall will be calculated for a shallow and a deep wall. In that case we have R=1000 d, but note that the input in the attribute than becomes k*R=10000 due to the error in Tim.\n\nAfter changing the value in attribute tables of wall elements, we can compute again, switching off and on the element for the deep wall section (tab Geopackage on the QGIS-Tim panel).\n\nAgain extra calculation is needed to adjust well extractions for drawdown in the building pit. Results of calculations are gathered in the following table, showing extractions and head outside the wall at South East monitoring position.\n\n\nTable 4: Effect of 4 Wall alternatives on extraction rate and drawdown South East.\n\n\n\n\n\n\n\n\nWall alternative  at c1=40 d\nWall resistance  [d]\nGroundwater extraction  [m3/d]\nHead SE monitoring  [dh in m]\n\n\n\n\nShallow sheet pile wall\n100\n240\n-0.39\n\n\nDeep sheet pile wall\n100\n122\n-0.16\n\n\nShallow cut-off wall\n1000\n208\n-0.30\n\n\nDeep cut-off wall\n1000\n80\n-0.04\n\n\n\n\nInstallation of 15 m deep sheet pile wall or cut-off wall can be elaborated in a geotechnical design.  Still, probably some decrease of interlock leakage is needed when sheet piles are chosen. Interlock sealing or maybe irrigation of water in a shallow drain pipe around the building pit could lead to approval by authorities."
  },
  {
    "objectID": "tutorial_TheHague.html#effect-of-a-not-closed-wall-about-20-cm",
    "href": "tutorial_TheHague.html#effect-of-a-not-closed-wall-about-20-cm",
    "title": "Building Pit The Hague",
    "section": "Effect of a not closed wall (about 20 cm)",
    "text": "Effect of a not closed wall (about 20 cm)\nAuthorities are afraid that leakage incidents could be harmful for surrounding monuments. The effect of leakage can be studied by creating a fictitious little opening in the wall. This can be done e.g. by changing the values of first and last coordinate of the leaky line doublet.\n\nSelect the Leaky Line Doublet in the Layers panel\nIn the editing toolbar go to the toggle editing option () and check the vertex option ().\nOn the drawing panel select a point in the line element of the wall and right click.\n\nThe list with coordinates appears in the vertex editor at the lower left corner of the screen. There you can edit the coordinates of all points in the line. Another option is to zoom in and select a point in the line element and drag it to a new position.\nWhen the coordinates differ a gap results, in the studied case we created a 0.2 m wide gap. It might be elaborate to perform but the result is shown in the next figure. The result is calculated by using a small grid spacing. At this created gap a large flow results in the corner of the building pit, leading to an insufficient drawdown in the building pit and a 0.1 – 0.2 m larger lowering outside the building pit at that location.\n\n\n\nFigure 14: Calculated effect of leakage at one corner in the building pit\n\n\nWhen the contractor wants to restore the dewatering level inside the building pit, the drawdown outside the gap will even grow further."
  },
  {
    "objectID": "tutorial_TheHague.html#using-python-for-sensitivity-analyses-with-a-qgis-tim-model",
    "href": "tutorial_TheHague.html#using-python-for-sensitivity-analyses-with-a-qgis-tim-model",
    "title": "Building Pit The Hague",
    "section": "Using Python for sensitivity analyses with a QGIS-Tim model",
    "text": "Using Python for sensitivity analyses with a QGIS-Tim model\nQGIS-Tim offers the opportunity to export the geopackage of the created model to a Python script. This makes it possible to use the script for other ways of calculation, e.g.: - Calculation of model results in other Python environments, like Anaconda or Spyder or in a notebook. - Use in other Python oriented programs, like the Probabilistic Toolkit.\n\nIf input of all elements is ready and the model has proved to run properly, go to the QGIS-Tim panel and the tab Geopackage.\nAt the bottom press the button Convert GeoPackage to Python script.\nAfter a short period for translation in Python the explorer panel appears where you can enter the name you want to give for the python file, e.g. “case-TheHague.py” and store it in a directory you choose to save your work. The file looks like:\n\n\n\n\nFigure 15: Python script\n\n\nAs can be seen the converted Python file start with calls (e.g. import timml) to main necessary Python packages. After that, for each timm element in the model, all data coordinates and parameter values follow. At the end of the Python file the “model.solve” command is stated after which all head values in the domain with the desired mesh density are determined and also at demanded observation points.\nAs can be seen the Python script for TimML is written in a very dedicated and condensed manner.\nTo get the Python file running in a platform like Anaconda or Spyder, extra lines should be added at wish, to get the output that the user needs.\nNext this file can be used for geostatistical and scenario-analysis. There are several ways of handling this kind of study, like writing an additional Python program to perform repeated calculations and statistical analysis on results. But an easy way is to use the Probabilistic Toolkit (PTK), a platform for statistical analysis to be used together with geotechnical design programs, developed by Deltares. The PTK can be used for study of model sensitivity for variation of parameter values or reliability analysis.\nThe PTK can be downloaded free of charge at Probabilistic Toolkit - download.\n\nOpen the Probabilistic Toolkit from your desktop () or Windows menu (Deltares folder).\n\nThe Toolkit opens at the first of 5 tabs: Model.\n\nIn the section Model Type check if the dropdown menu Type is set to Internal.\nIn the section Model Type check if the dropdown menu Language is set to Python and a the field Version appears.\nSelect the tree points (‘…’) in the field Version and give the path where PTK can find the Python interpreter, e.g. Spyder at “C:\\roelofs_fs\\_software\\deltaforge\\pythonw.exe”.\nThan you copy the content of the Python file we converted from QGIS-Tim into the window “Model code”.\n\nWe handle the process in this way because we want to change some lines in the source code to get the program running in PTK.\nNext the specific parameters must be selected that are expected to be probably most relevant to variations in results. In the source code used in the PTK, those parameters will not have input on a value but need to be mentioned with a name that the PTK can use for input selection in the calculations.  The parameters that seem to be important are:\n\nThe hydraulic resistance of the sheet pile wall Rwall.\nThe resistance c1 of the first clay layer.\nThe permeability of the sand layer k01.\nThe resistance c2 of the second clay layer at -14 m NAP.\n\n\n\n\nFigure 16: Declaration of Variables to control the analysis and first guess for values.\n\n\nIn PTK we have to set these parameters:\n\nIn the PTK panel Input click 4 times on the Add button (), to add 4 variables and name them Rshp, czba, khol and cbasis (see Figure 16)\nIn the tab Variables give these 4 variables the values 10000, 40, 10 and 100.\nReturn to the tab Model and assign these variable values to the parameters in the source code by copying this code block to the top of the Python source code (see Figure 17).  Rwall = Rshp  c0    = czba  k0    = khol  c2    = cbasis\nFinaly, replace the fixed value (NB! 2 times “Rwall”, for each sheet pile definition) in the Python code for the parameter name (see red elements in Figure 17).\n\n\n\n\nFigure 17: Replace parameters in the Python code.\n\n\n\nAt the end of the source code, eliminate the following lines from the converted file:\n\nhead = model.headgrid(xg=np.arange(80940.0, 81166.0, 4), yg=np.arange(455554.0, 455360.0, -4) )\n\nAlso eliminate the lines:\n\nobservation_peilbuis_2 = model.head(x=80970.16497991727, y=455495.54316352855) observation_peilbuis_3 = model.head(x=81004.86605597858, y=455389.68291883526) observation_peilbuis_4 = model.head(x=81049.06450220713, y=455485.0645022071)\n\nBecause we only are interested in 2 points, use the first two observation points and add these lines at the end of the Python script:\n\npb0 = observation_observations_0[0] pb1 = observation_observations_1[0]\n\nIn the panel Output of the PTK use the Add button () the new defined variables “pb0” and “pb1”.\nCheck if the program works properly. Field Analysis must contain “Run model”, field Results must contain “Single run”\nPress the RUN button () to calculate the model.\n\nIn the tab Run model we find the results of our calculation.\n\nCheck if it complies with your earlier calculations in QGIS-Tim.\n\n\n\n\nFigure 18: Result of test run in PTK to check model outcome.\n\n\nIf results are as expected, we can step to a sensitivity analyses.\n\nIn the tab Field, set the Analysis option to “Sensitivity*.\nGo to the tab Variables.\n\nFor each selected parameter a distribution is defined with certain limits or characteristic values. Distribution formulas can be chosen based on knowhow of the user. Best guess of the parameter value distributions is given in the next example window.\n\nChange the distributon types for each Variable in the column “Distrubution” and fill in the other values.\n\n\n\n\nFigure 19: Best guess of the parameter value distributions\n\n\n\nSelect the row with sheetpile resistance (Rshp) and in the panel below the distribution is shown (see Figure 20).\n\nParameter value distributions of silt layer resistance (czba), basic peat layer resistance (cbasis) and permeability of Holocene sand (khol) are shown in graphs below.\n\n\n\nFigure 20: Parameter value distributions of sheetpile resistance Rshp\n\n\n\n\n\nFigure 21: Parameter value distributions of silt layer resistance czba\n\n\n\n\n\nFigure 22: Parameter value distributions of basic peat layer resistance cbasis\n\n\n\n\n\nFigure 23: Parameter value distributions of permeability of Holocene sand khol\n\n\nLow and high value of resistivity are set in the tab Calculation to 10% and 90%.\n\nPress RUN () to recalculate the model in the Sensitivity mode.\nAfter the run is finished, a new tab Sensitivity is visible. Go to the tab.\n\nHere we can find what extent parameter variations contribute to model results. In Figure 24 it is shown what parameter variation means for drawdown in the building pit. We conclude that for a situation with a sheet pile wall in only the first sand layer the variation of the resistance of the loamy layer (czba) determines the drawdown, and with that this factor determines the amount of extraction in that situation for the largest part. Translated to practical considerations, it is worthwhile to spend extra budget on determining the homogeneity of that layer and the vertical permeability of the loamy layer in more detail.\n\n\n\nFigure 24: Sensitivity of drawdown in building pit to parameter value distributions of sheetpile resistance (Rshp), silt layer resistance (czba), basic peat layer resistance (cbasis) and permeability of Holocene sand (khol).\n\n\nHowever, with this model we get a varying outcome for the level in the building pit and this is not realistic for a practical situation. In real projects, the dewatering contractor would like to know what the effect on dewatering demand and interaction with environment would be if the aim is to reach the designed groundwater head in the building pit while adjusting the rate of extraction in the wells. \nWe can do this quite simply with the aid of the Python file. To perform this analysis we follow the assumption that the relation between drawdown and well extraction is linear.\n\nGo to the tab Model and in the panel Model code remove from the end of the script the lines for pb0 and the line for pb1.\nOn the top of the script, below the line k01 = khol add a value for the fixed total extraction flux and the fixed head within the building pit:  Qws = 100  pb0d = -3.5\nNow add the following lines to the code. NB! Use the same observation variable name as is used in your script! pb0  = observation_observations_0[0]  fact = pb0d/pb0 Qtot = 8*Qws*fact pb1  = observation_observations_1[0]*fact\nWithin the section of each of the 8 wells, go to the line defining the pumping rate (Qw) and make it variable: Qw=Qws\nRecalculate the sensitivity.\nAfter the calculation is finisched, go to the tab Sensitivity and in the top left field select “Qtot” and or “pb1”.\n\nAgain, we see that the parameter value for the hydraulic resistance of the loamy clay layer (czba) is most relevant to the variation of the outcome, not only for the drawdown effect in the area surrounding the building pit (pb1, see Figure 25) but also for the total flow to the extraction wells (Qtot, see Figure 26).\n\n\n\nFigure 25: Sensitivity of Pb1 (drawdown outside building pit) due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol with constant lowering inside the building pit.\n\n\n\n\n\nFigure 26: Sensitivity of Qtot (groundwater extraction from the building pit) due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol, with constant lowering inside the building pit.\n\n\nBased on the same statistic distributions for the parameter values we now are also able to calculate the uncertainty in output for this case, using a sheet pile wall in the first aquifer.  The distribution of the results for drawdown just outside the building pit is given in Figure 27, which in the lower part shows the distribution for total flow rate from the dewatering in the building pit.\n\n\n\nFigure 27: Uncertainty in drawdown outside building pit due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol with constant lowering inside the building pit\n\n\n\n\n\nFigure 28: Uncertainty in groundwater extraction from the building pit due to parameter value distributions of sheetpile resistance Rshp, silt layer resistance czba, basic peat layer resistance cbasis and permeability of Holocene sand khol with constant lowering inside the building pit\n\n\nThe probabilistic model gives a 50% probability on a flow of 297 m3/d, even with a 10% chance of an overrun to 659 m3/d. The groundwater drawdown at the standpipe outside the building pit amounts -0.44 m with 50% probability but with 10% value of -1.10 m. \nMoreover, it is possible to perform a calculation of reliability with the PTK.\n\nGo to the tab Analysis and select the option Reliability.\nThen we check the variable distributions again.\nNext, we open the tab Calculation.\n\nThis gives the possibility to introduce a failure criterium for certain variable, like in our case pb1. We choose a less strict criterium because with a shallow sheetpile wall it is not possible to meet the requirements anyhow.\n\nChoose a comparison with undershooting a critical value of REF -0.5 m for the groundwater head in pb1 (see Figure 29).\n\nAt the right hand side in the settings window a calculation method needs to be selected. Many statistical methods are available, like Monte Carlo method etc. They are described in the help of the PTK in the main menu. We chose FORM (First Order Reliability Method) as a fast method because it is an automated intelligent iteration process to find a design point for reliability by using first calculated realisations (p.97 in the Help manual, see PTK menu).\n\n\n\nFigure 29: Setting up a reliability calculation by choosing a failure criterium and selecting a calculation method.\n\n\n\nRecalculate the model and go to the tab Reliability.\n\nFrom the result (see Figure 30) we conclude that the FORM method is able to find a solution in just a few iterations.\n\n\n\nFigure 30: Result of the reliability analysis for the selected failure criterium.\n\n\nIt follows that the probability of failure for even a not very discriminating criterium as a drawdown outside the building pit of REF -0.5 m is 42%. The calculation method also returns the contributions of all relevant parameters to the outcome. It is obvious that the loamy layer at shallow depth below the building pit does not deliver enough hydraulic resistance to isolate the building activities from surrounding monuments. \nAs is clear, the studied layout of the building pit plus dewatering will not meet the demands of the local authorities regarding the limitations on drawdown. By waterlocking the sheet pile wall we can hardly expect a satisfactory decrease of drawdown effects around the building site, therefore, the best solution is to install the sheet pile wall to a deeper level. \nRepeating the calculations with sheetpile wall in 2 layers the results will prove the possibility to meet the demands on groundwater effects with that building pit design.\nThis description of the possibilities like exporting a Python script from Qgis-Tim and using this in statistical analysis is just a short peek into all the options. To find more information we must refer to the manual of the Probabilistic toolkit PTK."
  },
  {
    "objectID": "tutorial_TheHague.html#creating-a-transient-model",
    "href": "tutorial_TheHague.html#creating-a-transient-model",
    "title": "Building Pit The Hague",
    "section": "Creating a transient model",
    "text": "Creating a transient model\nAt this moment, it is not possible to create a transient (time dependent) model with correct answers to case studies with sheetpile walls. The TTim solution needs to be updated.  Nevertheless in this section we want to guide you on setting up a basic transient model. \n\nReturn to QGIS and in the QGIS-Tim panel go to the tab Compute.\nIn the section Output turn on the option “Transient”.\nIn the panel Layers select timml Aquifer:Aquifer.\n\nAs can be seen in Figure 31, the matrix of properties is extended in the transient mode with cells for transient parameters, like specific storage coefficients (aquitard_s, and aquifer_s) and porosities (aquitard_npor and aquifer_npor). Take care that specific storage coefficient is a storage per meter layer thickness. In older MWell course material a speadsheet is presented for estimation of coefficient values but there we calculated storage coefficients per whole layer. Those values should be divided by layer thickness.\n\n\n\nFigure 31: Attribute Table for Aquifer in transient condition.\n\n\n\nFill in the Table with the corresponding values.\nIn the TTim section in the Layers panel go to the list of elements for transient calculations.\nSelect ttim Temporal Settings:Aquifer and open its Attribute Table (F6). Here the length of the time series is specified.\nSet the starting time to 0.\n\nBut calculations take place for the range of time steps between “time_min” and “time_max”. The time unit is according to central settings in the project, mostly time in days. “Time_min” should not be zero but given a slight offset. Here we also find a “Stehfest_M” number, related to the number of terms in the calculation method performing transformation of formulas in solving differential equations. A reference date can be set to relate the calculation to real time data.\n\nFill in the table according to Figure 32.\n\n\n\n\nFigure 32: Table for ttim Temporal Settings:Aquifer\n\n\nNB!: In QGIS it is an obligation to use a “reference_date” to get the model running and present outcomes!\n\nSelect ttim Computation Times:Domain and set the time values for time steps where we want to get calculations of spatially distributed heads in mesh or raster points and contours.\n\n\n\n\nFigure 33: Table for ttim Computation Times:Domain\n\n\nFor this case we will leave this table blank, because calculating several head distributions at different time steps is rather time consuming during this course.\n\nSelect ttim Observation:observations and here we can set the time steps for a time series at certain points we want to monitor the calculation results. We set points at intervals that follow a (approximately) logarithmic increase in time intervals. Proposed values are shown in the next table.\n\n\n\n\nFigure 34: Table for ttim Observation:observations\n\n\nDon’t choose exactly the same time as when changing the flow. So if 60 is an end value, choose 59.9.\nIn the Attribute Table of layer ttim Well:pumping_wells we can set the discharge amount. The value might change during time when excavation is considered or construction is performed in phases. For each change we have to add a line of input. In case there are a lot of switch on/off moments, this is a lot of work.  We just leave this option without any change because there is an other option in case each well has only a singel start and end time.\n\nTherefor go to the layer timml Well:pumping_wells layer. This layer contains simple elements to make it behave as a simple Timm element.\nIn the Attribute Table make start_time=5, end_time=30 and discharge_transient=15.\nBut fill in a value of 0 m3/d in column “Discharge” because this variable is part of TimML well element. We use the “discharge_transient” variable to define flow in TTim. Remember: Solution of TTim is superposed on solution of TimML."
  },
  {
    "objectID": "deltaforge_install.html",
    "href": "deltaforge_install.html",
    "title": "Install iMOD Python with Deltaforge",
    "section": "",
    "text": "Deltaforge is a python distribution which includes iMOD Python and all its dependencies. It is provided as an installer and makes installing iMOD Python easy. You can download the Deltaforge installer on the Deltares download portal."
  },
  {
    "objectID": "deltaforge_install.html#what-is-deltaforge",
    "href": "deltaforge_install.html#what-is-deltaforge",
    "title": "Install iMOD Python with Deltaforge",
    "section": "",
    "text": "Deltaforge is a python distribution which includes iMOD Python and all its dependencies. It is provided as an installer and makes installing iMOD Python easy. You can download the Deltaforge installer on the Deltares download portal."
  },
  {
    "objectID": "deltaforge_install.html#installation",
    "href": "deltaforge_install.html#installation",
    "title": "Install iMOD Python with Deltaforge",
    "section": "Installation",
    "text": "Installation\nTo install Deltaforge, double-click the executable, this will open the installation Wizard. You will be greeted with the welcome screen.\n\n\n\nThe welcome screen\n\n\nClick \"Next\", and then \"I agree\" in the license agreement.\n\n\n\nLicense agreement screen\n\n\nNext, you get to decide what type of installation you want. On your local machine it suffices to select Just me. If you are an admin of a server and you want to let others enjoy the Deltaforge installation as well, click All Users.\n\n\n\nThe installation type screen\n\n\nNext you get to decide where the python environment is installed. The default location is usually fine.\n\n\n\nThe location of the python installation\n\n\nFinally, some further configuration is possible. The screenshots contains the options we recommend.\n\n\n\nInstallation options with the recommended options selected."
  },
  {
    "objectID": "deltaforge_install.html#using-deltaforge",
    "href": "deltaforge_install.html#using-deltaforge",
    "title": "Install iMOD Python with Deltaforge",
    "section": "Using Deltaforge",
    "text": "Using Deltaforge\nThe easiest way to start your environment is by pressing the Windows Key and start typing deltaforge. This will let you select the Deltaforge Prompt. Select this.\n\n\n\nThe Deltaforge Prompt should be findable in the Windows start menu\n\n\nThis will start a command prompt screen (cmd.exe), where at startup the Deltaforge python environment is activated.\n\n\n\nThe Deltaforge prompt. You can type mamba list to view all the packages installed.\n\n\nTo view all the packages installed in the environment you can type mamba list and press Enter. This will list all packages installed in the environment. If you want to start coding, you can type spyder, which will start Spyder, a Python scientific development environment."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "QGIS-Tim",
    "section": "",
    "text": "QGIS-Tim is an open source project for multi-layer groundwater flow simulations. QGIS-Tim provides a link between QGIS and the open source analytic element method software: TimML (steady-state) and TTim (transient).\nThe benefit of the analytic element method (AEM) is that no grid or time-stepping is required. Geohydrological features are represented by points, lines, and polygons. QGIS-Tim stores these features in a GeoPackage.\nQGIS-Tim consists of a “front-end” and a “back-end”. The front-end is a QGIS plugin that provides a limited graphical interface to setup model input, visualize, and analyze model input. The back-end is a Python package. It reads the contents of the GeoPackage and transforms it into a TimML or TTim model, computes a result, and writes it to a file that the QGIS plugin loads.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n Tutorials\n\n\nLearn how to use QGIS Tim plugin\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "tutorial.html",
    "href": "tutorial.html",
    "title": " Tutorials",
    "section": "",
    "text": "Modelling with analytic elements is not very common. The QGIS-Tim plugin makes it more easy to build your model in a graphical user interface starting from simple and making it as complex as you like.\nTherefore, we have compiled a set of tutorials to help you get started and give you an overview of the capabilities of analytical elements.\n\n\n\n\n\n\n\n\n\n\n\n\nBuilding Pit Rijsenhout\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBuilding Pit The Hague\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "tutorial_Rijsenhout.html",
    "href": "tutorial_Rijsenhout.html",
    "title": "Building Pit Rijsenhout",
    "section": "",
    "text": "Be sure QGIS version 3.28.00 or higher is installed.\nBe sure the gistim Python package is installed (see installation for instructions).\nDownload the tutorial material. Follow this link.\nInternet connections is optional during this Tutorial. It is only required for installation of additional plugins and the use of an online topographic background map."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#requirements",
    "href": "tutorial_Rijsenhout.html#requirements",
    "title": "Building Pit Rijsenhout",
    "section": "",
    "text": "Be sure QGIS version 3.28.00 or higher is installed.\nBe sure the gistim Python package is installed (see installation for instructions).\nDownload the tutorial material. Follow this link.\nInternet connections is optional during this Tutorial. It is only required for installation of additional plugins and the use of an online topographic background map."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#description",
    "href": "tutorial_Rijsenhout.html#description",
    "title": "Building Pit Rijsenhout",
    "section": "Description",
    "text": "Description\nIn this tutorial, you will learn how to:\n\ninstall and use the QGIS-Tim plugin;\nuse the basic of QGIS for pre- and postprocessing of TIM;\ncreate several steady state models (TimML) and a transient model (TTim);\nanalyse the results;\nexport your model to a Python script."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#objective",
    "href": "tutorial_Rijsenhout.html#objective",
    "title": "Building Pit Rijsenhout",
    "section": "Objective",
    "text": "Objective\nCalculation of a pumping well extraction."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#introduction-case-rijsenhout",
    "href": "tutorial_Rijsenhout.html#introduction-case-rijsenhout",
    "title": "Building Pit Rijsenhout",
    "section": "Introduction case Rijsenhout",
    "text": "Introduction case Rijsenhout\nIn one of the fields west of Rijsenhout industrial activities are planned, the construction of green houses. From historical sources it is known that some bombs from World War 2 are still in the surface. Before building starts, these bombs are removed for safety reasons. The question is: what dewatering is necessary to be able to remove the bombs in dry conditions? The contractor plans to drill sheet piles to prevent the excavation from collapsing. The groundwater level inside the building pit is lowered with a set of wells just in the top of the aquifer within the building pit. All pumped water is infiltrated over a stretch of wells near the existing buildings. At the project location, the top layer is 12 m thick and consists of a low permeable combination of clay and peat. Below this top layer we find an aquifer of 50 m. The Westeinderplassen, a lake system with a depth of 3 m., is located East of the project area.\n\n\n\nFigure 1: Geological cross section near Rijssenhout [source: BRO GeoTOP v1.4.1]"
  },
  {
    "objectID": "tutorial_Rijsenhout.html#getting-started",
    "href": "tutorial_Rijsenhout.html#getting-started",
    "title": "Building Pit Rijsenhout",
    "section": "Getting Started",
    "text": "Getting Started\n\nLaunch QGIS from your START menu, from your desktop or click on …\\QGIS3.28.0\\bin\\qgis-bin.exe.\n\n\nIntermezzo: QGIS language settings\nPerhaps your QGIS was installed in another language than English. Because the Tutorial refers to the English version, let’s change to English.\n\nFrom the main menu click on Settings and select Options (e.g. in Dutch Extra and Opties).\nIn the new window go to the General section (Dutch: Algemeen) on the left.\nCheck the box to allow Override System Locale (Dutch: Landinstellingen negeren) and expand this sub menu.\nFrom the drop-down menu “User interface translation” (Dutch: Vertaling gebruikers-interface) select American English and click OK.\nClose QGIS and open it again to activate your language change.\n\n\nWe start with the creation of a new QGIS project.\n\nFrom the main menu click on Project and select New.\n\nThe case in this tutorial is located in The Netherlands, so next we select the appropriate projection.\n\nFrom the main menu click on Project and select Properties.\nIn the Properties window select the category CRS, search for “EPSG:28992” and you find “Amersfoort / RD New”. Select this option and click the Apply button, followed by the OK button to close the window.\n\n\nIn case your work is mostly in The Netherlands and in the “Amersfoort / RD New” projection, consider making this your default projection.\n\nFrom the main menu click on Settings and select Options….\nIn the section CRS and Transforms select CRS (handling), pick the radio button Use a default CRS and select “EPSG:28992 -Amersfoort / RD New”.\nClick OK.\nClose this window.\n\n\n\nInstall plugins\nThis is the moment to import four plugins needed for this tutorial:\n\nthe QGIS-Tim plugin (developed by Deltares).\nthe iMOD plugin (developed by Deltares).\nthe Value Tool. A plugin to display in table or plot values from raster layers (or mesh layers) at the current mouse position.\nthe PDOK plugin. This plugin gives access to a large database from which we will load the topographic maps and use the navigation option.\n\nTo install the plugins from QGIS you need an internet connection!\n\nNo internet connection? Follow the next steps to import the two Deltares’ plugins from a ZIP file provided in the Tutorial Dataset.\n\nGo to Plugins from the main menu and select Manage and Install Plugins… to open the plugin window.\nOn the left section select Install from ZIP.\nClick the Browse button () and select the ZIP file “QGIS-Tim_Tutorial\\QGIS-iMOD-plugin.zip”.\nClick Install Plugin.\nIn the same way, install the QGIS-Tim plugin using the ZIP file “QGIS-Tim_Tutorial\\QGIS-Tim-plugin.zip”.\n\n\nIf you have an internet connection, all four plugins can be downloaded within QGIS.\n\nAt the top, find the Plugins menu (~sixth object in the menubar).\nFind \"Manage and Install plugins\" (~first object in drop-down).\nFind \"All\" (~first in left section).\nSearch for \"Qgis-Tim\".\nClick \"Install Plugin\".\nSearch for “iMOD” and install it.\nSearch for “Value Tool” and install it.\nSearch for “PDOK services plugin” and install it.\nMake sure that under Plugins &gt; Manage and Install Plugins &gt; Installed now the 4 added plugins are checked.\nClose the Plugins window.\n\nSee in the toolbar section of QGIS that the plugins are installed:\n\niMOD Toolbar \nQGIS-Tim \nValue Tool \nPDOK Services Plugin \n\nFurther in this Tutorial we will use some default toolbars that might be hidden at the moment. Let’s check that and unhide if necessary.\n\nSelect View from the main menu and choose Toolbars.\nBe sure the “Advanced Digitizing Toolbar”, the “Snapping Toolbar” and the “Attributes Toolbar” are checked.\n\n\n\nPrepare your project\nFor navigation purposes, let’s load a topographic map for The Netherlands from the online PDOK database.\n\nNo internet connection? Follow the next steps to import a simple PNG file as a background.\n\nGo to Layer in the main menu, go to Add layer and select Add Raster layer.\nUse the browse button () and from the tutorial material select “…\\QGIS-Tim_Tutorial\\dbase\\TopographicMapRijssenhout.png”.\nClick on Add and Close the window.\nIf you do not see the map, select the layer “TopographicMapRijssenhout”, click your right mouse button and select “Zoom to Layer(s)”.\nContinue after step 23.\n\n\n\nIf you do have an internet connection click on the PDOK plugin button () to open the “PDOK Services Plugin” window.\nFrom the tab PDOK Services search for “pastel” and you will find a WMTS type layer called “BTRM Achtergrondkaart WMTS”.\nSelect the layer.\nIn the section “laag toevoegen” click the button Onder.\nClose the PDOK window.\n\nOur project area is near the town of Rijsenhout so let’s navigate to that town using the PDOK plugin.\n\nType “Rijsenhout” in the PDOK search field, near the PDOK button ()\nPDOK will find “Rijsenhout, Haarlemmermeer, Noord-Holland”. Click on it and QGIS will fly you to the project location.\n\nLet’s now open a shape file containing the locations and depths of the bombs.\n\nGo to Layer in the main menu, go to Add layer and select Add Vector layer.\nUse the browse button () and from the tutorial material select “…\\QGIS-Tim_Tutorial\\dbase\\bombs.shp”.\nClick on Add and Close the window.\n\n Tip: a fast alternative for adding layers: from the menu View &gt; Toolbar add the Manage Layers Toolbar and use the button .\n\nIn the Layers panel on the left, select the layer “bombs”.\nClick your right mouse button and from the menu select Show Labels.\nYou can zoom in and out with the scroll button on your mouse or navigate with the buttons in the main menu: \nUse  to pan the map with your left mouse button and use  to zoom to the extend of the layers/groups selected in the Layers panel.\n\nLet’s save this project to be able to return to it later or in case of a crash of QGIS.\n\nGo to Project in the main menu, select Save As and select a folder and a file name for your project, e.g. “…\\QGIS-Tim_Tutorial\\Rijsenhout.qgz”"
  },
  {
    "objectID": "tutorial_Rijsenhout.html#start-your-tim-model",
    "href": "tutorial_Rijsenhout.html#start-your-tim-model",
    "title": "Building Pit Rijsenhout",
    "section": "Start your Tim model",
    "text": "Start your Tim model\nNow we are ready to activate the QGIS-Tim plugin.\n\nClick on the QGIS-Tim plugin button () and the QGIS-Tim panel appears.\nGo to the tab Model Manager.  Here we will create an empty database (GeoPackage) to store all elements and parameters for the model.\nClick the New button to create the GeoPackage and save it for instance in the folder with your tutorial data, e.g. “..\\QGIS-Tim_Tutorial\\dbase\\case-Rijsenhout.gpkg”.\n\nYour window looks like in Figure 2.\n\n\n\nFigure 2: QGIS-Tim panel\n\n\n\nCheck in the Layers panel on the left that your new geopackage is added as a group.  A sub group timml for the steady state model input and the sub group ttim for the transient model input.\n\nIf you had no introduction to the Tim plugin, read the Intermezzo below for a general explanation of the components.\n\nIntermezzo: introduction Tabs on the Tim panel\n\nModel Manager: an overview of the elements in your geopackage. In case you switch to transient modelling, an extra column with ttim elements is added.\nElements: a list of at least 16 Tim elements from which you can build your model.\nResults: here you can define your domain and cell size, decide if your model is transient or not and manage the output files.\n\n\nNow we are ready to define our first steady state model by parameterizing our Aquifer."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-1-single-aquifer",
    "href": "tutorial_Rijsenhout.html#model-1-single-aquifer",
    "title": "Building Pit Rijsenhout",
    "section": "Model 1: single aquifer",
    "text": "Model 1: single aquifer\nWe start with a very simple ‘model’, only the parameters of a single aquifer.  Important message: all editing of model parameters and model elements you do in the Layers panel on the left!\n\nSo select the layer “timml Aquifer:Aquifer” on the left.\nClick your right mouse button and from the menu select Attribute Table to open the table in a new window.  NB Alternative is to press F6 or use the button Open Attribute Table ().\nStart the editing mode with a click on the Toggle Editing Mode button ().\nHover with your mouse over the buttons and find the Add Feature button (). Perhaps button 5 from left.\nAdd a new feature with this Add Feature button. In this case a feature is a hydrological layer.\nFill the feature with the values from the table below:\n\n\n\n\n\nparameter\nvalue\nunit\ncomment\n\n\n\n\nfid\nAutogenerate\n[-]\nID is autogenerated by QGIS\n\n\nLayer\n0\n[-]\n(see remark below)\n\n\naquifer_top\n+2\n[m MSL]\n\n\n\naquifer_bottom\n-10\n[m MSL]\n\n\n\naquifer_c\nNULL\n[d]\n\n\n\naquifer_k\n5\n[m/d]\n\n\n\nsemiconfined_top\nNULL\n[m MSL]\n\n\n\nsemiconfined_head\nNULL\n[m MSL]\n\n\n\n\nNB! About Layer = 0. In the real world counting starts with 1. However, Tim is programmed in Python and in Python counting starts with 0. You will get used to it.\n\nSave all changes with the Save Edits button ().\nStop the Editing Mode with a click on the button ().\nClose the Attribute Table window with a click on the X in the upper right corner.\n\nAlso be aware that the Aquifer element you just edited is just a table. This is indicated with the icon () just before the layer name in the left panel. For Tim this means that the properties in this table apply for the full model domain. We will introduce some inhomogeneities later as polygons within that domain.\n\nGo to the tab Results in QGIS-Tim.\nClick the button Set to current extent.\nOn the tab sear for the section Output. Here you see that the output folder is by default the same as the folder of your geopackage.\nSee that from the output type ‘Raster’ is not selected so only Meshes are created.\nStart the calculation with a click on Compute.\n\nA black Python.exe window pops up indicating that the TIM calculation started on the background. You can ignore this window but keep it open. Of course you van minimize it. If the calculation was completed successful, you will see this echo in QGIS. .\nAfter the calculation you see that the result is automatically added to a new geopackage, probably called “case-Rijsenhout output”. Results are saved as vector and/or mesh and raster. For each output format a separate sub group is created. The sub group Raster is empty while the output option Raster was not checked.  Although these layers / groups are checked, the data is not visible. That is because the geopackage was added last, and QGIS adds layers at the end of the list. Let’s move the layer “pastel” to the background.\n\nSelect the layer “pastel” and drag it with your left mouse button to the bottom of the list of layers.\n\nThe calculation result is now visible and we see a mesh with just the value 0, not a very exciting result because no other elements are present yet. Let’s now add a well element.\n\nIntermezzo: Mesh and Raster format explained\n\nMesh: an unstructured grid usually with temporal and other components. Preferred format in QGIS-Tim to animate temporal data, to create cross sections or evaluate values at your mouse position.\nRaster: is made up of pixels (also referred to as grid cells). They are regularly spaced and square. Preferred format in QGIS-Tim to perform calculations with the Raster Calculator tool."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-2-single-well",
    "href": "tutorial_Rijsenhout.html#model-2-single-well",
    "title": "Building Pit Rijsenhout",
    "section": "Model 2: single well",
    "text": "Model 2: single well\n\nFirst hide the output layers by deselecting the sub group mesh or even the main group case-Rijsenhout output.\nGo to the tab Elements in QGIS-Tim.\nClick on the element “Well” and a window opens to create a new (vector) layer in QGIS.\nGive the layer a name, e.g. “DewateringWell” and click OK.\n\nSee that layer “timml Well:DewateringWell” is added to the timml sub group in your geopackage with ‘point’ as geometry. Also in the ttim sub group an element with the same name is added. This is a table that can store transient well data while referring to the x/y locations in the timml layer. Next step is to add the actual well, both the location and its parameters.\n\nSelect the layer “timml Well:DewateringWell”.\nClick your right mouse button and select the Toggle Editing Mode ().\nTo add a new well (feature) to the layer click the Add Point Feature button ().\nWith your mouse, click on a location in the centre of the group of bombs.\nFill the feature with the values from the example below.\n\n\n\nClick OK.\nClick the Toggle Editing button () and if you are asked to save changes and select Save.  An alternative way to save your edits is to click the Save Layer Edits button () and then stop editing with the Toggle Editing button ().\n\nNext step is to rerun the model including the new well.\n\nIn QGIS-Tim go to the tab Model Manager and see that the Well is added.\nGo to the tab Results and select also the output format Raster.\nClick on Compute to rerun your model.\n\nThe output in your ouput group “case-Rijsenhout output” is directly overwritten with the new results. In the sub group mesh you see the created raster “case-Rijsenhout-head_layer_0”.\nDo you like to see the values of the calculated Head under you mouse?\n\nMake the results visible again. So see if the group case-Rijsenhout output and mesh are checked.\nSelect the output sub group mesh and deselect the group raster.\nSelect the Value Tool button ().\nHover over the area and in the “Value Tool” panel you see the value within the mesh file at your mouse location.\n\n\n\n\nFigure 3: Example panel Value Tool\n\n\nDo you like to see the values in a cross section? Deltares developed the Cross Section Tool, available in the iMOD Plugin.\n\nOn the iMOD Toolbar select the Cross section button () to start the iMOD Cross Section tool. In the empty cross-section we can add a selection of (geological) layers. For now, we only select the calculated heads.\nOn the iMOD Cross Section Plot click on the button Select location and draw your cross-section line from north to south (right mouse button to close the line).\nFrom the dropdown menu on the left of this toolbar, select the raster () named “case-Rijsenhout-head_layer_0”.\nClick the button Add to add this layer to the cross-section manager below.\nClick the button Plot to draw this layer in the cross section.\n\nYour screen might look like Figure 4.\nTIP: If you do not see any line, perhaps the axes are not defined well. To view all data, click you right mouse button in the figure and select the option “View All”. The alternative is to click on the small A symbol () in the lower left of the chart.\n\n\n\nFigure 4: Cross section with calculated Head"
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-3-multiple-layers",
    "href": "tutorial_Rijsenhout.html#model-3-multiple-layers",
    "title": "Building Pit Rijsenhout",
    "section": "Model 3: multiple layers",
    "text": "Model 3: multiple layers\nA single aquifer is of course not enough to describe the geology of our project area. A simplification of the geology is given in the cross section in Figure 5. In this low lying polder, there is a Holocene top layer of 12 m thickness on top of an aquifer. The surface level of the top layer is 5 m below see level, it has a resistance of 1500 days and the water level within this polder is 1 meter below surface level. The aquifer has a horizontal permeability of 30 m/d and a thickness of 50 m. The anisotropy factor is 3 resulting in a vertical resistance of 0.1 day per meter. Tim can handle multiple layers so the next step is to bring these parameters into the model.\n\n\n\nFigure 5: Project area cross section (left) lifting the World War II bomb (right)\n\n\n\nIn your geopackage select the layer “timml Aquifer:Aquifer” and click your right mouse button.\nFrom the menu select Open Attribute Table and the table opens in a new window. Once again, press F6 for a quick open of the Attribute Table.\nStart the editing mode with a click on the Toggle Editing Mode button ().\nAdd three extra aquifers / features; click three times on the Add Feature button ().\nSee that for the new elemenst the fid is set to Autogenerate. Be aware that your QGIS probably resorts the layers and brings the existing layer (layer=0) to the botom of your table.\n\nThe Holocene top layer is not a distinguished layer but a resistance on top of layer 0.\n\nFill the features with the values from the table below.  NB Never change the fid=1 of the first layer, even if it is not on top of your table.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfid\nlayer\naquifer_top\naquifer_bottom\naquitard_c\naquifer_k\nsemiconf_top\nsemiconf_head\n\n\n\n\n1\n0\n-17\n-22\n1500\n30\n-5\n-6\n\n\n2\n1\n-22\n-27\n0.5\n30\nNULL\nNULL\n\n\n3\n2\n-27\n-47\n1.25\n30\nNULL\nNULL\n\n\n4\n3\n-47\n-67\n2\n30\nNULL\nNULL\n\n\n\n\nSave your changes and close the window.\nGo to the tab Results and run the new model with a click on the button Compute.\n\nLet’s now check the calculated heads for the 4 layers, first with the Value Tool and then with the Cross section tool.\n\nFrom the layers select the layer “case-Rijsenhout-output:raster” and deselect the “case-Rijsenhout-output:mesh”.\nActivate the Value Tool ().\nIn the Value Tool panel go to the tab Options.\nFor Show Layers choose “Visible layers” and for Show bands choose “Active bands”.\nReturn to the tab Table and hoover over the calculated values, especially near your well.\nActivate the iMOD Cross section widget () to create your cross section with the four layers (Need instructions? Go back to step 69 for support).  NB You don’t need to ‘add’ all four layers separately. Just use the raster file () “case-Rijsenhout-head_layer_0” and from the dropdown menu Variable: select the four bands/layers."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-4-add-a-set-of-sheet-piles",
    "href": "tutorial_Rijsenhout.html#model-4-add-a-set-of-sheet-piles",
    "title": "Building Pit Rijsenhout",
    "section": "Model 4: add a set of sheet piles",
    "text": "Model 4: add a set of sheet piles\nNow we introduce a new but frequently used element: the sheet pile.\n\nReturn to the QGIS-Tim panel and go to the tab Elements.\nClick on the element “Leaky Line Doublet”.\nGive the layer a name, e.g. “sheetpile”.\nIn your geopackage select the layer “timml Leaky Line Doublet:sheetpile” and start editing using the Toggle Editing Mode button ().\nIn the editing mode, the Add Line Feature button () is available. Click the button and draw a box around the 5 bombs (click left to start, click right to close).\nIn the Feature Attributes window make resistance = 1500 and layer = 0.\nClick OK.\n\nYou probably tried to close the building pit but either your lines cross or do not close actually when zooming in. To close the pit, let’s snap both start and end point together.\n\nFirst enable the snapping mode with a click on the button (), available on the Snapping Toolbar.\nMake sure the Tolerance is set to 0.00 () in the Snapping Toolbar.\nThen activate the Vertex Tool with a click on the button .\nMove your mouse to the start point location and when it shows a small circle, click your left mouse button.\nNext, move your mouse towards the end point and you see the snapping active: the end point gets a small fuchsia box.\nClick your left mouse and you see that both vertices now connect.\n\nPerhaps you are not satisfied with your created building pit.\n\nYou can play around with other nice options in QGIS to move (), rotate () or scale () your pit.\nEnd the Toggle Editing Mode with  and save your changes.\nIn the QGIS-Tim panel go to the tab Results.\nRerun your model and check the calculated heads.\n\nDisappointed in the effect of the sheet piles on the calculated head? You are right if you expected no major effect because of the shallow penetration in this high permeable thick aquifer. If we would increase the aquitard_c between layers 0 and 1, perhaps we would see more effect of the sheet piles. \n\nIf you dare… try to rerun the model yourself with aquitard_c = 800 (layer 1) and see that the drawdown is limited to the building pit (Figure 6.)\nDon’t forget to undo this side path and make aquitard_c = 0.5 again for layer 1.\n\n\n\n\nFigure 6: Drawdown within the building pit\n\n\n\nHow to reopen Tim after closing QGIS\nBefore we introduce you another new Tim element we must explain you how to reopen your Tim project after a closure of QGIS. A crash might close QGIS or just a long day of work is a reason to shut down your laptop Always remember two things:\n\nyour geopackage is saved as a *.gpkg file and contains the complete set of model features and parameter values. Every time you change a model element, you will remember, you had to save the changes. So the GPKG file is always up to date.\nyour QGIS project is saved in the *.qgz file and contains all the added layers and their format (legend, line color, labels etc.).\n\nNow let’s experience what it is to close and open QGIS including your QGIS-Tim project.\n\nSave your QGIS session (Ctrl+S).\nSelect Project from the main menu and choose New.\nAgain select Project but now choose Open Recent and find your own project in the list.\n\nThe Tim panel is empty but why?  It is not possible for the plugin to automaticcaly read your geopackage as it is loaded in the Layers panel. But there is good news. QGIS-Tim added a hidden line to your QGIS project file *.qgz. This line contains the full path to your last active geopackage file *.gpkg. Based on this information QGIS-Tim can restore your last active Tim project.\n\nIn the tab Model Manager click the button Restore.\nA window pops up asking you if you agree to restore the last active project.\nClick Yes and you see the Model Manager is filled with all project information.\n\nIn the backgorund the plugin first removes all layers and than opens the geopackage again. You did not see it, did you? It happend in a blink of an eye."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-5-add-infiltration-of-drainwater",
    "href": "tutorial_Rijsenhout.html#model-5-add-infiltration-of-drainwater",
    "title": "Building Pit Rijsenhout",
    "section": "Model 5: add infiltration of drainwater",
    "text": "Model 5: add infiltration of drainwater\nTo prevent damage on the private properties caused by the dewatering, the authorities demand 50% of the drained flux to be infiltrated. For the infiltration a horizontal well of 400 m is used. In Tim this element is called “Line Sink Ditch”. Let’s add this element just along the road (Aalsmeerderweg) southeast of the project area.\n\nOn the tab Elements in QGIS-Tim click on the element “Line Sink Ditch”.\nGive the layer a name, e.g. “InfiltrationWell”.\n\nSee that layer “timml Line Sink Ditch:InfiltrationWell” is added to the timml sub group in your geopackage with ‘line’ as geometry. For the transient version of the model a table with the same name is added to the ttim sub group. Next step is to add the location of the horizontal well and its capacity.\n\nClick the *Measure Line” button () from the “Attributes Toolbar”.\nWith your left mouse button try to get an idea what a distance of 400 m along the road looks like. Close the window.\nSelect the layer “timml Line Sink Ditch:InfiltrationWell”.\nStart editing with the Toggle Editing Mode.\nUse the Add Line Feature button () to draw a 400 m line (click left to start, click right to close).\nFill these feature within the table: discharge = -1000 (negative abstraction is flux into the model), resistance = 1, width = 1, layer = 0! not NULL ;-). By default order = 4.\nClick OK.\nStop editing the layer, save your changes.\nRerun the model.\nAnalyse the results with the iMOD Cross Section widget. Your graph may look like Figure 7.\n\n\n\n\nFigure 7: Calculated head from the abstraction (left) to the infiltration (right)"
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-6-add-observation-points",
    "href": "tutorial_Rijsenhout.html#model-6-add-observation-points",
    "title": "Building Pit Rijsenhout",
    "section": "Model 6: add observation points",
    "text": "Model 6: add observation points\nWe have the Value Tool and the Cross section tool to check for calculated values in the rasters. Besides that, Tim has the opportunity to add observation points automatically providing you with the calculated heads.\n\nOn the tab Elements in QGIS-Tim click on the element “Head Observation”.\nGive the layer a name, e.g. “Piezometers”.\nSelect the new layer “timml Head Observation:Piezometers”.\nStart editing with the Toggle Editing Mode and use Add Point Feature button ().\nClick with your left mouse button to place a point near point A.\n\nIn the poped up window fill in Label = A and click OK.\nGo to the layer “timml Head Observation:Piezometers”, click your right mouse button and activate “ show labels”\nAdd point B close to the dwatering well (Figure 8).\n\n\n\n\nFigure 8: Observation locations (A-E) together with other Tim elements\n\n\nAre you tired of the pop-up window every time you add a point? There is an option to add points C to E in one serie and fill in the labels afterwards.\n\nOn the tab Model Manager, in the lowest section, check the option “Suppress attribute form pop-up after feature creation”.\nPlace points C to E.\nOpen the Attribute Table from layer “timml Head Observation:Piezometers” and fill in the Labels C to E.\nSave your changes and stop the editing mode.\nCompute the model again.\n\nThe observed values are saved in a new layer under the existing group “case-Rijsenhout output” and sub group “vector”.\n\nIn this sub group select the layer “case-Rijsenhout-timml Head Observation:Piezometers” and check the calculated values within this layer by opening the Attribute Table (F6).\nClose the Attribute Table.\n\n\nDraw Contour Lines\nOne way of displaying the calculated results is still missing: contour lines.\n\nIn QGIS-Tim go to the tab Results.\nIn the section Contour select layer “case-Rijsenhout-head_layer_0”.\nDefine the contours from -9 to -5 with an increment of 0.10 and click Redraw contours.\n\nA layer with your contours is saved in the group “case-Rijsenhout-output:vector”. Your map hopefully looks like Figure 9. If not, try to change the contour settings and create a better contour map or check the layer so it will be displayed.\n\n\n\nFigure 9: Calculated heads, displayed as contour lines"
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-7-determine-the-influence-of-the-nearby-lake",
    "href": "tutorial_Rijsenhout.html#model-7-determine-the-influence-of-the-nearby-lake",
    "title": "Building Pit Rijsenhout",
    "section": "Model 7: determine the influence of the nearby lake",
    "text": "Model 7: determine the influence of the nearby lake\nEast of the project area there is a large lake. What will be the influence of this lake? Let’s find out.  In Tim a lake is added as an inhomogeneity within the total model domain. This domain is described in table “timml Aquifer:Aquifer” we filled in with the first model.\n\nOn the tab Elements in QGIS-Tim click on the element “Polygon Semi-Confined Top”.\nGive the layer a name, e.g. “Lake” and find out that layer “timml Polygon Semi-Confined Top:Lake” is added to the geopackage.\nStart editing with the Toggle Editing Mode and use Add Polygon Feature button () to add the Lake contour.  NB Try to minimize the number of segments because each segment slows down the calculations. With QGIS it is tempting to use detail but the influence of detail on the outcome is small.\nFill the Lake feature with the following parameters: aquitard_c = 500, semiconf_top = -7 (bottom of the Lake) and semiconf_head = -2 (water level).\nSave your changes and rerun the model.\nAnalyse the results and perhaps create contour lines from the tab “Results”.\n\n\n\n\nFigure 10: Contour lines after adding the Lake element in the east\n\n\nYou can not miss the effect of the Lake in this calculation. In many cases you like to analyse or even save this difference. Let’s see how we can use Tim and QGIS to isolate the effect. Therefor we rerun the model without the Lake and rename the output.\n\nIn QGIS-Tim go to the tab Model Manager.\nIn the list of Steady State elements switch off “timml Polygon Semi-Confined Top:Lake”.\nGo to the tab Results.\nClick the button Set path as … and change the name of the output, e.g. “case-Rijsenhout-NoLake”.\nClick Compute to run the model without the Lake.\n\nThe new results are added as new layer to the project. Check for instance sub group “raster” under the group “case-Rijsenhout output”. Now we use QGIS to calculate the head difference for layer 0. For raster calculations we prefer Raster Calculator over the Mesh Calculator in QGIS.\n\nFrom the QGIS main menu Raster select the tool Raster Calculator and the tool window opens.\nIn the section Raster Calculator Expression you can create an expression using the elements from Raster Bands and Operators. Create this expression: “case-Rijsenhout-head_layer_001 - case-Rijsenhout-NoLake-head_layer_001”.\nIn Output layer give a new name for this new GeoTIFF file, e.g. “head-effect-lake”.\nClick OK to start the calculation and see that the GeoTIFF file is added as a layer.\nIn the properties of layer “head-effect-lake” go to the section Symbology and set the Render type to “Singelband pseudocolor”.\nSee that the difference in head is maximum 3 meter.\nIn Model Manager check again the Lake element.\nIn Results reset the path to the old name."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#model-8-abstraction-effect-over-time",
    "href": "tutorial_Rijsenhout.html#model-8-abstraction-effect-over-time",
    "title": "Building Pit Rijsenhout",
    "section": "Model 8: abstraction effect over time",
    "text": "Model 8: abstraction effect over time\nNow you are ready for the last step: make your model transient. We keep it simple: we run the model for 30 days and see the increasing effect of the well.\n\nIn Results within the output section change “steady state” into “transient”.\nGo to Model Manager and see that only 5 elements have a transient component.\n\nBy selecting the “transient” option, columns containing extra parameters necessary for a transient model have been unhidden now. First of all we see it in the layer “timml Aquifer:Aquifer” where columns “storage” and “porosity are visible now.\n\nIn your geopackage select the layer “timml Aquifer:Aquifer”.\nOpen its table, start the editing mode and for every layer set both acquifer_s and acquitard_s to 0.001. Acquitard_s (layer 0) = 0.25. You can use copy and paste to do it quickly.\n\nNB! In transient mode, Tim can not handle aquitard with zero thickness so let’s set the aquitard thickness to 0.1 m\n\nChange the values in the column “aquifer_top” to -17.0, -22.1, -27.1 and -47.1 m.\nIn your geopackage select the layer “ttim Temporal Settings:Aquifer” to define the temporal properties of the model.\nOpen its table, start the editing mode and add a new feature.\nMake sure that tmin=0.01, tmax=30, tstart=0, reference_date=2023-03-23 00:00:00.\nIn your geopackage select the layer “ttim Computation Times:Domain” in order to define the moments in time for which raster output is saved.\nOpen its table, start the editing mode and add 7 features / periods (click 7 times “Add feature”).\nIn the column “time” add the moments 1,2,5,10, 15, 20 and 30.\nSave and Close the table.\n\nFor the observations we can define a different set of output moments.\n\nIn your geopackage select the layer “ttim Head Observation:Piezometers”.\nOpen its table, start the editing mode and add 10 features / periods (click 10 times “Add feature”).\nIn the column “time” add the moments 1,2,3,4,5,10,15,20,25 and 30.\nSave and Close the table.\n\nSpecial attention for the Well package while it has 2 options to make it transient:\n\nSimple: a well can be switched on and off only once. Parameters are set in the stationary part of the model, so in “timml Well:DewateringWell”.\nDetailed: a well can be switched on and off multiple times within the modelled period. Parameters are set in the transient part of the model, so in “ttim Well:DewateringWell”.\n\nIn this tutorial we show you the simple version.\n\nIn your geopackage select the layer “timml Well:DewateringWell”.\nOpen its table, start the editing mode and see that columns with time dependent parameters are visible now.\nSwitch off the Steady State abstraction, make discharge = 0.\nSwitch on the Transient abstraction: time_start = 2, time_end = 30, discharge_transient = 2000, caisson_radius = 1.\nSave your changes.\nCompute your transient model in the tab Results.\n\nIn case of a successful calculation a new layer is added to your Vector output: case-Rijsenhout-ttim Head Observation:Piezometers. This layer contains transient data which is indicated with the clock icon right from the layer name. There are 2 ways to visualize these calculated heads in the observations point a) animation over time and b) timeseries at location.\n\nFor the animation over time, activate the Temporal Control Panel with the button  on the Map Navigation Toolbar.\nFor timeseries at location activate the Timeseries panel with the Timeseries button () on the iMOD Toolbar.\nBe sure that “case-Rijsenhout-ttim Head Observation:Piezometers” is checked and “case-Rijsenhout-timml Head Observation:Piezometers” is unchecked.\nIn the Temporal Controller panel click the green play button (). Navigation buttons appear.\nIncrease the Step to 16 hours and start the animation with a click on the Play button ().\n\nOnly the first few days you see most prominent drawdown. Let’s now display the timeseries at the point of your mouse with data from the mesh.\n\nGo to the iMOD Time Series panel.\nBe sure the layer “case-Rijsenhout-head_layer_0” is selected.\nFor “variable:” select head and for “layers:” select 0.\nClick the button Select Points, your mouse changes into a . Be sure Update on Selection is checked and hover over the mesh. The graph shows the timeseries at the location of your mouse.\nDeselect the checkbox Update on Selection.\nClick the button Select Points (your mouse becomes a  and with the left mouse button select 3 points ad random.\nFinally click the Plot button and the 3 timeseries are added to the chart.\n\nIn the same way you can display the time series from the Observations.\n\nIn the iMOD time series panel select the layer “case-Rijsenhout-ttim Head Observation:Piezometers”.\nFor “ID column:” select label and for “Variable:” select head_layer0. Don’t forget to deselect fid.\nClick the button Select Points and draw a box with your mouse to select one or more observation points.\nClick the Plot button and the selected timeseries are added to the chart.\n\n\n\n\nFigure 11: Calculated time series at observations locations\n\n\nBefore closing the display we change the line properties and save the graph as a PNG file.\n\nSelect the single time series for the observation point closest to your dewatering well. The color of the line is now visible in the field next to the button Line Color.\nChange the color to red.\nSelect the timeseries with the most shallow timeseries and change the color to green.\nCheck the box Draw markers.\nMove your mouse to the display and click your right mouse button. Explore the different options.\nFrom this menu (or from the display) select the function Export….\nSet the export format to PNG and export the file and don’t forget to close the Export window."
  },
  {
    "objectID": "tutorial_Rijsenhout.html#export-your-tim-model-to-python",
    "href": "tutorial_Rijsenhout.html#export-your-tim-model-to-python",
    "title": "Building Pit Rijsenhout",
    "section": "Export your Tim model to Python",
    "text": "Export your Tim model to Python\nFor scenario calculation or sensitivity analysis you probably want to switch from QGIS to Python for efficiency reasons. In this tutorial we only show you the first step: export your model to a Python file (*.py). Your Tim model is just a set of elements (points, lines, polygons) and its parameters so the Python file is not very large.\n\nIn QGIS-Tim go to the tab Model Manager.\nClick the button Convert GeoPackage to Python script and you can save the *.py file wherever you like.\nCheck the content of the file with you text editor (e.g. Notepad).\n\nThe tutorial ends here. You can save your QGIS project if you like. Thank you!"
  }
]